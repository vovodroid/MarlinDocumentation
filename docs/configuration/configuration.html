<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"/> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> <meta name="viewport" content="width=device-width, initial-scale=1"/> <meta name="flattr:id" content="e7nqg5"/> <title>Configuring Marlin | Marlin Firmware</title> <meta name="generator" content="Jekyll v3.9.0"/> <meta property="og:title" content="Configuring Marlin"/> <meta name="author" content="Sarf2k4"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="Complete guide to Marlin configuration options."/> <meta property="og:description" content="Complete guide to Marlin configuration options."/> <link rel="canonical" href="https://marlinfw.org/docs/configuration/configuration.html"/> <meta property="og:url" content="https://marlinfw.org/docs/configuration/configuration.html"/> <meta property="og:site_name" content="Marlin Firmware"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2024-01-13T02:30:54-06:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Configuring Marlin"/> <meta name="twitter:site" content="@MarlinFirmware"/> <meta name="twitter:creator" content="@Sarf2k4"/> <script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Sarf2k4"},"dateModified":"2024-01-13T02:30:54-06:00","datePublished":"2024-01-13T02:30:54-06:00","description":"Complete guide to Marlin configuration options.","headline":"Configuring Marlin","mainEntityOfPage":{"@type":"WebPage","@id":"https://marlinfw.org/docs/configuration/configuration.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://marlinfw.org/assets/images/logo/marlin/small.png"},"name":"Sarf2k4"},"url":"https://marlinfw.org/docs/configuration/configuration.html"}</script> <link rel="icon" href="/assets/favicon_m.ico"/> <link rel="stylesheet" href="/assets/stylesheets/main.css"/> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--> <script src="/assets/javascript/head.min.js"></script> <script type="text/javascript">

      /**
       * As Github pages do not support https for custom domains
       * this is the current best workaround for #18.
       */
      var domains  = [ 'marlinfw.org', 'localhost', '127.0.0.1' ];
      var pathname = location.pathname.replace(/^\/MarlinDocumentation/, '')
      if (domains.indexOf(window.location.hostname) == -1)
        window.top.location.href = 'https://marlinfw.org' + pathname;

      /**
       * Another ugly workaround trying to improve UX reported by #35
       */
      if (location.protocol != 'https:' && window.location.hostname == 'marlinfw.org')
        location.href = 'https:' + window.location.href.substring(window.location.protocol.length);

      /**
       * Improves overall speed by loading javascript and css resources in parallel
       * with the main page.
       */
      head.load(
          "/assets/stylesheets/fontawesome.min.css",
          "/assets/stylesheets/solid.min.css",
          "/assets/stylesheets/brands.min.css",

          "/assets/javascript/jquery-2.2.1.min.js",
          "/assets/javascript/jquery-ui.min.js",
          "/assets/javascript/bootstrap.min.js",
          "/assets/javascript/tocify.min.js",
          "/assets/javascript/search.js",
          "/assets/javascript/custom.js",

          "/assets/javascript/sheetrock.min.js",
          "/assets/javascript/cookieconsent.min.js"
      );

      head.ready(function() {
        window.cookieconsent_options = {
          "message":"We use cookies to ensure you get the best experience on our website",
          "dismiss": "Got it!", "learnMore": "More info", "link":"", "theme": "dark-bottom"
        };
      });
    </script> </head> <body role="document"> <nav class="navbar navbar-default navbar-fixed-top custom-no-margin"> <div class="container"> <div class="navbar-header"> <img id="daynite" src="/assets/images/btn-night.svg" alt="Dark Mode" width="32" height="32"> <a href="/" class="navbar-brand"> <svg id="mflogo" height="95%" version="1.1" viewbox="0 0 828.26325 270.80054"> <g id="g981"> <path d="M 69.48788,0 C 31.1751,0 0,32.61059 0,72.74045 V 198.055 c 0,40.12987 31.17607,72.74553 69.48788,72.74553 H 758.7735 c 38.3127,0 69.4898,-32.61566 69.4898,-72.74553 V 5.84382 c -0.019,-3.60102 -2,-5.68155 -6.9765,-5.84159 H 220.29327 Z m 0,21.01625 H 682.6259 c 8.157,0.43104 14.4593,1.90061 18.9474,6.50681 7.8555,8.06197 84.9293,82.07514 102.73,100.35813 1.8839,1.93509 3.8964,6.37495 3.8964,11.50813 v 58.66132 c 0,28.84892 -21.8776,51.7242 -49.4209,51.7242 H 69.4932 c -27.54239,0 -49.42089,-22.87528 -49.42089,-51.7242 V 72.73609 c 0,-0.90162 0.0193,-1.79645 0.0619,-2.6858 1.30928,-27.57002 22.67685,-49.0386 49.35799,-49.0386 z" fill="#0000ff" id="path957" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 539.5917,36.40978 -0.068,135.74053 c 0,17.73633 5.7753,32.12681 17.3285,43.16739 11.7332,11.22111 26.2205,18.88542 44.6327,18.88542 1.6257,0 4.7893,-0.14503 4.7893,-0.14503 v -30.53858 c -1.4629,0.1785 -2.9571,-0.0101 -4.5172,-0.0101 -9.3867,0 -16.3858,-3.57688 -22.162,-9.36867 -5.7765,-5.79149 -8.6669,-13.38947 -8.6617,-22.80124 l 0.068,-134.92917 z" fill="#0000ff" id="path965" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 48.89544,88.53966 c 0,-15.02233 5.05444,-27.69172 15.1637,-38.00816 10.10849,-10.31644 22.56459,-15.47466 37.36638,-15.47466 6.85957,0 12.81609,0.99594 17.8713,2.98631 5.23501,1.6288 9.65764,3.80061 13.268,6.51552 3.24931,1.99088 6.40833,4.52476 9.47717,7.60143 l 5.957,5.70143 c 1.26361,-1.62891 2.34665,-2.89595 3.24921,-3.80092 1.08314,-1.086 2.07599,-1.99087 2.97855,-2.71481 1.62466,-1.6289 5.77653,-4.70578 12.45611,-9.23064 6.67909,-4.70548 15.8856,-7.05832 27.61884,-7.05832 14.44084,0 26.89694,5.15812 37.36638,15.47466 10.4704,10.31644 15.70464,22.98583 15.70464,38.00816 V 234.05708 H 212.17203 V 90.71005 c 0,-6.3347 -2.52722,-11.94525 -7.58166,-16.83268 -4.87396,-4.88662 -10.6504,-7.32972 -17.32939,-7.32972 -6.49862,0 -11.9142,2.26207 -16.24655,6.78662 -4.33235,4.34371 -6.49852,10.13551 -6.49852,17.37527 V 234.05657 H 129.58617 V 90.70954 c 0,-5.97283 -2.16617,-11.49291 -6.49862,-16.56087 -4.33235,-5.06765 -9.47707,-7.60143 -15.43369,-7.60143 -5.95661,0 -11.46325,2.53378 -16.5175,7.60143 -4.69339,5.06735 -7.04013,10.58825 -7.04013,16.56087 V 234.05657 H 56.2045 c -4.86419,0 -7.30897,-2.56065 -7.30897,-7.68216 z" fill="#0000ff" id="path971" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 325.92573,233.97594 c -14.76501,0.48682 -35.97484,-4.07232 -49.33284,-17.10347 -13.35799,-13.21198 -20.03699,-29.59131 -20.03699,-49.13799 0,-19.90874 6.85957,-36.74041 20.5789,-50.49499 13.71933,-13.75458 30.5074,-20.63288 50.36439,-20.63288 19.857,0 36.19355,6.87749 49.00963,20.63288 12.81706,13.75458 19.2251,31.67347 19.2251,53.75362 v 62.98384 h -31.68024 v -61.89764 c 0,-13.39352 -3.42988,-24.07203 -10.28944,-32.03452 -6.85967,-8.14463 -15.9756,-12.21705 -27.34789,-12.21705 -10.28945,0 -19.1351,3.80082 -26.536,11.40265 -7.40118,7.60153 -11.10134,16.55986 -11.10134,26.8763 0,11.04058 3.88112,20.36108 11.64325,27.96251 7.9427,7.60143 19.68959,9.79078 29.32391,9.40397 h 21.93269 v 30.53857 z" fill="#0000ff" id="path969" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 467.4988,98.58024 c -18.4123,0 -33.485,5.60873 -45.2182,16.82963 -11.5533,11.04059 -17.32847,25.43006 -17.32847,43.16639 v 75.47169 h 31.40927 v -74.65831 c 0,-9.41137 2.8852,-17.01117 8.6617,-22.80327 5.7765,-5.79179 13.3609,-8.68875 22.7475,-8.68875 9.0258,0 16.4265,2.98682 22.2036,8.95975 5.9571,5.97231 8.934,13.48176 8.934,22.53146 l -0.1529,1.81451 h 31.4092 l 0.1529,-2.62779 c 1.04,-17.88441 -5.8668,-32.39761 -17.6003,-43.43718 -11.7332,-11.04058 -26.806,-16.55884 -45.2182,-16.55884 z" fill="#0000ff" id="path967" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 656.9725,158.62088 c 0,-17.73633 5.7765,-32.1258 17.3294,-43.16537 11.7332,-11.22111 26.8069,-16.83166 45.2192,-16.83166 18.4122,0 33.4859,5.52009 45.2191,16.55986 11.7333,11.04058 17.6004,25.5193 17.6004,43.43717 v 67.58629 c -0.039,5.32475 -2.4795,7.8854 -7.4874,7.8854 h -23.9223 v -74.65729 c 0,-9.0493 -2.9785,-16.55986 -8.9355,-22.53248 -5.7766,-5.97262 -13.178,-8.95893 -22.2037,-8.95893 -9.3869,0 -16.9684,2.89564 -22.7446,8.68723 -5.7765,5.79179 -8.6648,13.39352 -8.6648,22.80428 v 74.65729 h -31.4092 z" fill="#0000ff" id="path959" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 616.136,92.69788 h 31.6802 l 10e-5,-15.49698 v -4.28763 c 0,-8.585 -6.4197,-15.49596 -14.3934,-15.49596 h -2.8932 c -7.9741,0 -14.3934,6.91137 -14.3934,15.49596 v 4.28763 z" color="#000000" color-rendering="auto" enable-background="accumulate" fill="#0000ff" fill-rule="evenodd" image-rendering="auto" shape-rendering="auto" solid-color="#000000" style="fill-opacity:1;stroke:none;stroke-width:0.999984" id="path961" class="logo"></path> <path d="m 616.136,100.71006 h 31.6802 V 234.00637 H 616.136 Z" color="#000000" color-rendering="auto" enable-background="accumulate" fill="#0000ff" fill-rule="evenodd" image-rendering="auto" shape-rendering="auto" solid-color="#000000" style="fill-opacity:1;stroke:none;stroke-width:0.999984" id="path963" class="logo"></path> </g> </svg> </a> <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> </div> <div class="navbar-collapse collapse" id="navbar-main"> <ul class="nav navbar-nav"> <li id="top-intro"><a href="/docs/basics/introduction.html">About Marlin</a></li> <li id="top-download"><a href="/meta/download/">Download</a></li> <li id="top-config"><a href="/docs/configuration/configuration.html">Configure</a></li> <li id="top-install"><a href="/docs/basics/install.html">Install</a></li> <li id="top-tools" class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-tools">Tools <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/tools/u8glib/converter.html">Bitmap Converter</a></li> <li><a href="/tools/rgb565/converter.html">RGB565 Converter</a></li> <li><a href="/tools/lin_advance/k-factor.html">Calibrate Linear Advance</a></li> <li><a href="/tools/input_shaping/freq-calibr.html">Calibrate Input Shaping</a></li> <li class="divider"> <li><a href="//github.com/MarlinFirmware/Marlin/issues">Bugtracker</a></li> <li><a href="/docs/basics/reporting_bugs.html">Reporting bugs</a></li> <li class="divider"> <li><a href="//github.com/MarlinFirmware/Marlin">Source Code Repository</a></li> </ul> </li> <li id="top-help" class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-documentation">Help <span class="caret"></span></a> <ul class="dropdown-menu"> <li class="dropdown-submenu configuration"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Configuration</a> <ul class="dropdown-menu"> <li><a href="/meta/configuration/">All documents</a></li> <li class="divider"> <li><a href="/docs/configuration/1.1/laser_spindle.html">Laser/Spindle Configuration (1.1.x)</a></li> <li><a href="/docs/configuration/2.0.9/laser_spindle.html">Laser/Spindle Configuration (2.0.9.x)</a></li> <li><a href="/docs/configuration/config-ini.html">Configuring with INI</a></li> <li><a href="/docs/configuration/configuration.html">Configuring Marlin</a></li> <li><a href="/docs/configuration/probes.html">Probe Configuration</a></li> </ul> </li> <li class="dropdown-submenu development"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Development</a> <ul class="dropdown-menu"> <li><a href="/meta/development/">All documents</a></li> <li class="divider"> <li><a href="/docs/development/boards.html">Boards</a></li> <li class="divider"> <li><a href="/docs/development/code_structure.html">Code Structure</a></li> <li><a href="/docs/development/coding_standards.html">Coding Standards</a></li> <li><a href="/docs/development/fastio.html">FastIO</a></li> <li><a href="/docs/development/hal.html">Hardware Abstraction Layer</a></li> <li class="divider"> <li><a href="/docs/development/contributing.html">Contributing to Marlin</a></li> <li class="divider"> <li><a href="/docs/development/feature_request.html">Feature requests</a></li> <li><a href="/docs/development/getting_started_pull_requests.html">Contributing Code with Pull Requests</a></li> <li><a href="/docs/development/git_scripts.html">Marlin Github Scripts</a></li> <li class="divider"> <li><a href="/docs/development/fonts.html">Adding new fonts</a></li> <li><a href="/docs/development/lcd_language.html">LCD Language System</a></li> </ul> </li> <li class="dropdown-submenu features"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Features</a> <ul class="dropdown-menu"> <li><a href="/meta/features/">All documents</a></li> <li class="divider"> <li><a href="/docs/features/auto_bed_leveling.html">Automatic Bed Leveling</a></li> <li><a href="/docs/features/unified_bed_leveling.html">Unified Bed Leveling</a></li> <li class="divider"> <li><a href="/docs/features/autostart.html">Autostart</a></li> <li class="divider"> <li><a href="/docs/features/eeprom.html">EEPROM</a></li> <li class="divider"> <li><a href="/docs/features/fwretract.html">Firmware Retract</a></li> <li><a href="/docs/features/input_shaping.html">Input Shaping</a></li> <li><a href="/docs/features/lin_advance.html">Linear Advance</a></li> <li><a href="/docs/features/model_predictive_control.html">Model Predictive Temperature Control</a></li> <li><a href="/docs/features/probe_temp_compensation.html">Probe Temperature Compensation</a></li> <li class="divider"> <li><a href="/docs/features/lcd_menu.html">LCD Menu Tree</a></li> </ul> </li> <li class="dropdown-submenu gcode"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">G-code</a> <ul class="dropdown-menu"> <li><a href="/meta/gcode/">All documents</a></li> <li class="divider"> <li><a href="/docs/gcode/G000-G001.html"><strong>G0-G1</strong>: Linear Move</a></li> <li><a href="/docs/gcode/G002-G003.html"><strong>G2-G3</strong>: Arc or Circle Move</a></li> <li><a href="/docs/gcode/G004.html"><strong>G4</strong>: Dwell</a></li> <li><a href="/docs/gcode/G005.html"><strong>G5</strong>: Bézier cubic spline</a></li> <li><a href="/docs/gcode/G006.html"><strong>G6</strong>: Direct Stepper Move</a></li> <li><a href="/docs/gcode/G010.html"><strong>G10</strong>: Retract</a></li> <li><a href="/docs/gcode/G011.html"><strong>G11</strong>: Recover</a></li> <li><a href="/docs/gcode/G012.html"><strong>G12</strong>: Clean the Nozzle</a></li> <li><a href="/docs/gcode/G017-G019.html"><strong>G17-G19</strong>: CNC Workspace Planes</a></li> <li><a href="/docs/gcode/G020.html"><strong>G20</strong>: Inch Units</a></li> <li><a href="/docs/gcode/G021.html"><strong>G21</strong>: Millimeter Units</a></li> <li><a href="/docs/gcode/G026.html"><strong>G26</strong>: Mesh Validation Pattern</a></li> <li><a href="/docs/gcode/G027.html"><strong>G27</strong>: Park toolhead</a></li> <li><a href="/docs/gcode/G028.html"><strong>G28</strong>: Auto Home</a></li> <li><a href="/docs/gcode/G029.html"><strong>G29</strong>: Bed Leveling</a></li> <li><a href="/docs/gcode/G029-abl-3point.html"><strong>G29</strong>: Bed Leveling (3-Point)</a></li> <li><a href="/docs/gcode/G029-abl-linear.html"><strong>G29</strong>: Bed Leveling (Linear)</a></li> <li><a href="/docs/gcode/G029-mbl.html"><strong>G29</strong>: Bed Leveling (Manual)</a></li> <li><a href="/docs/gcode/G029-abl-bilinear.html"><strong>G29</strong>: Bed Leveling (Bilinear)</a></li> <li><a href="/docs/gcode/G029-ubl.html"><strong>G29</strong>: Bed Leveling (Unified)</a></li> <li><a href="/docs/gcode/G030.html"><strong>G30</strong>: Single Z-Probe</a></li> <li><a href="/docs/gcode/G031.html"><strong>G31</strong>: Dock Sled</a></li> <li><a href="/docs/gcode/G032.html"><strong>G32</strong>: Undock Sled</a></li> <li><a href="/docs/gcode/G033.html"><strong>G33</strong>: Delta Auto Calibration</a></li> <li><a href="/docs/gcode/G034-zsaa.html"><strong>G34</strong>: Z Steppers Auto-Alignment</a></li> <li><a href="/docs/gcode/G034-mgc.html"><strong>G34</strong>: Mechanical Gantry Calibration</a></li> <li><a href="/docs/gcode/G035.html"><strong>G35</strong>: Tramming Assistant</a></li> <li><a href="/docs/gcode/G038.html"><strong>G38.2-G38.5</strong>: Probe target</a></li> <li><a href="/docs/gcode/G042.html"><strong>G42</strong>: Move to mesh coordinate</a></li> <li><a href="/docs/gcode/G053.html"><strong>G53</strong>: Move in Machine Coordinates</a></li> <li><a href="/docs/gcode/G054-G059.html"><strong>G54-G59.3</strong>: Workspace Coordinate System</a></li> <li><a href="/docs/gcode/G060.html"><strong>G60</strong>: Save Current Position</a></li> <li><a href="/docs/gcode/G061.html"><strong>G61</strong>: Return to Saved Position</a></li> <li><a href="/docs/gcode/G076.html"><strong>G76</strong>: Probe temperature calibration</a></li> <li><a href="/docs/gcode/G080.html"><strong>G80</strong>: Cancel Current Motion Mode</a></li> <li><a href="/docs/gcode/G090.html"><strong>G90</strong>: Absolute Positioning</a></li> <li><a href="/docs/gcode/G091.html"><strong>G91</strong>: Relative Positioning</a></li> <li><a href="/docs/gcode/G092.html"><strong>G92</strong>: Set Position</a></li> <li><a href="/docs/gcode/G425.html"><strong>G425</strong>: Backlash Calibration</a></li> <li><a href="/docs/gcode/M000-M001.html"><strong>M0-M1</strong>: Unconditional stop</a></li> <li><a href="/docs/gcode/M003.html"><strong>M3</strong>: Spindle CW / Laser On</a></li> <li><a href="/docs/gcode/M004.html"><strong>M4</strong>: Spindle CCW / Laser On</a></li> <li><a href="/docs/gcode/M005.html"><strong>M5</strong>: Spindle / Laser Off</a></li> <li><a href="/docs/gcode/M007-M009.html"><strong>M7-M9</strong>: Coolant Controls</a></li> <li><a href="/docs/gcode/M010-M011.html"><strong>M10-M11</strong>: Vacuum / Blower Control</a></li> <li><a href="/docs/gcode/M016.html"><strong>M16</strong>: Expected Printer Check</a></li> <li><a href="/docs/gcode/M017.html"><strong>M17</strong>: Enable Steppers</a></li> <li><a href="/docs/gcode/M018.html"><strong>M18, M84</strong>: Disable steppers</a></li> <li><a href="/docs/gcode/M020.html"><strong>M20</strong>: List SD Card</a></li> <li><a href="/docs/gcode/M021.html"><strong>M21</strong>: Init SD card</a></li> <li><a href="/docs/gcode/M022.html"><strong>M22</strong>: Release SD card</a></li> <li><a href="/docs/gcode/M023.html"><strong>M23</strong>: Select SD file</a></li> <li><a href="/docs/gcode/M024.html"><strong>M24</strong>: Start or Resume SD print</a></li> <li><a href="/docs/gcode/M025.html"><strong>M25</strong>: Pause SD print</a></li> <li><a href="/docs/gcode/M026.html"><strong>M26</strong>: Set SD position</a></li> <li><a href="/docs/gcode/M027.html"><strong>M27</strong>: Report SD print status</a></li> <li><a href="/docs/gcode/M028.html"><strong>M28</strong>: Start SD write</a></li> <li><a href="/docs/gcode/M029.html"><strong>M29</strong>: Stop SD write</a></li> <li><a href="/docs/gcode/M030.html"><strong>M30</strong>: Delete SD file</a></li> <li><a href="/docs/gcode/M031.html"><strong>M31</strong>: Print time</a></li> <li><a href="/docs/gcode/M032.html"><strong>M32</strong>: Select and Start</a></li> <li><a href="/docs/gcode/M033.html"><strong>M33</strong>: Get Long Path</a></li> <li><a href="/docs/gcode/M034.html"><strong>M34</strong>: SDCard Sorting</a></li> <li><a href="/docs/gcode/M042.html"><strong>M42</strong>: Set Pin State</a></li> <li><a href="/docs/gcode/M043.html"><strong>M43</strong>: Debug Pins</a></li> <li><a href="/docs/gcode/M043-T.html"><strong>M43 T</strong>: Toggle Pins</a></li> <li><a href="/docs/gcode/M048.html"><strong>M48</strong>: Probe Repeatability Test</a></li> <li><a href="/docs/gcode/M073.html"><strong>M73</strong>: Set Print Progress</a></li> <li><a href="/docs/gcode/M075.html"><strong>M75</strong>: Start Print Job Timer</a></li> <li><a href="/docs/gcode/M076.html"><strong>M76</strong>: Pause Print Job Timer</a></li> <li><a href="/docs/gcode/M077.html"><strong>M77</strong>: Stop Print Job Timer</a></li> <li><a href="/docs/gcode/M078.html"><strong>M78</strong>: Print Job Stats</a></li> <li><a href="/docs/gcode/M080.html"><strong>M80</strong>: Power On</a></li> <li><a href="/docs/gcode/M081.html"><strong>M81</strong>: Power Off</a></li> <li><a href="/docs/gcode/M082.html"><strong>M82</strong>: E Absolute</a></li> <li><a href="/docs/gcode/M083.html"><strong>M83</strong>: E Relative</a></li> <li><a href="/docs/gcode/M085.html"><strong>M85</strong>: Inactivity Shutdown</a></li> <li><a href="/docs/gcode/M086.html"><strong>M86</strong>: Hotend Idle Timeout</a></li> <li><a href="/docs/gcode/M087.html"><strong>M87</strong>: Disable Hotend Idle Timeout</a></li> <li><a href="/docs/gcode/M092.html"><strong>M92</strong>: Set Axis Steps-per-unit</a></li> <li><a href="/docs/gcode/M100.html"><strong>M100</strong>: Free Memory</a></li> <li><a href="/docs/gcode/M102.html"><strong>M102</strong>: Configure Bed Distance Sensor</a></li> <li><a href="/docs/gcode/M104.html"><strong>M104</strong>: Set Hotend Temperature</a></li> <li><a href="/docs/gcode/M105.html"><strong>M105</strong>: Report Temperatures</a></li> <li><a href="/docs/gcode/M106.html"><strong>M106</strong>: Set Fan Speed</a></li> <li><a href="/docs/gcode/M107.html"><strong>M107</strong>: Fan Off</a></li> <li><a href="/docs/gcode/M108.html"><strong>M108</strong>: Break and Continue</a></li> <li><a href="/docs/gcode/M109.html"><strong>M109</strong>: Wait for Hotend Temperature</a></li> <li><a href="/docs/gcode/M110.html"><strong>M110</strong>: Set Line Number</a></li> <li><a href="/docs/gcode/M111.html"><strong>M111</strong>: Debug Level</a></li> <li><a href="/docs/gcode/M112.html"><strong>M112</strong>: Full Shutdown</a></li> <li><a href="/docs/gcode/M113.html"><strong>M113</strong>: Host Keepalive</a></li> <li><a href="/docs/gcode/M114.html"><strong>M114</strong>: Get Current Position</a></li> <li><a href="/docs/gcode/M115.html"><strong>M115</strong>: Firmware Info</a></li> <li><a href="/docs/gcode/M117.html"><strong>M117</strong>: Set LCD Message</a></li> <li><a href="/docs/gcode/M118.html"><strong>M118</strong>: Serial print</a></li> <li><a href="/docs/gcode/M119.html"><strong>M119</strong>: Endstop States</a></li> <li><a href="/docs/gcode/M120.html"><strong>M120</strong>: Enable Endstops</a></li> <li><a href="/docs/gcode/M121.html"><strong>M121</strong>: Disable Endstops</a></li> <li><a href="/docs/gcode/M122.html"><strong>M122</strong>: TMC Debugging</a></li> <li><a href="/docs/gcode/M123.html"><strong>M123</strong>: Fan Tachometers</a></li> <li><a href="/docs/gcode/M125.html"><strong>M125</strong>: Park Head</a></li> <li><a href="/docs/gcode/M126.html"><strong>M126</strong>: Baricuda 1 Open</a></li> <li><a href="/docs/gcode/M127.html"><strong>M127</strong>: Baricuda 1 Close</a></li> <li><a href="/docs/gcode/M128.html"><strong>M128</strong>: Baricuda 2 Open</a></li> <li><a href="/docs/gcode/M129.html"><strong>M129</strong>: Baricuda 2 Close</a></li> <li><a href="/docs/gcode/M140.html"><strong>M140</strong>: Set Bed Temperature</a></li> <li><a href="/docs/gcode/M141.html"><strong>M141</strong>: Set Chamber Temperature</a></li> <li><a href="/docs/gcode/M143.html"><strong>M143</strong>: Set Laser Cooler Temperature</a></li> <li><a href="/docs/gcode/M145.html"><strong>M145</strong>: Set Material Preset</a></li> <li><a href="/docs/gcode/M149.html"><strong>M149</strong>: Set Temperature Units</a></li> <li><a href="/docs/gcode/M150.html"><strong>M150</strong>: Set RGB(W) Color</a></li> <li><a href="/docs/gcode/M154.html"><strong>M154</strong>: Position Auto-Report</a></li> <li><a href="/docs/gcode/M155.html"><strong>M155</strong>: Temperature Auto-Report</a></li> <li><a href="/docs/gcode/M163.html"><strong>M163</strong>: Set Mix Factor</a></li> <li><a href="/docs/gcode/M164.html"><strong>M164</strong>: Save Mix</a></li> <li><a href="/docs/gcode/M165.html"><strong>M165</strong>: Set Mix</a></li> <li><a href="/docs/gcode/M166.html"><strong>M166</strong>: Gradient Mix</a></li> <li><a href="/docs/gcode/M190.html"><strong>M190</strong>: Wait for Bed Temperature</a></li> <li><a href="/docs/gcode/M191.html"><strong>M191</strong>: Wait for Chamber Temperature</a></li> <li><a href="/docs/gcode/M192.html"><strong>M192</strong>: Wait for Probe temperature</a></li> <li><a href="/docs/gcode/M193.html"><strong>M193</strong>: Set Laser Cooler Temperature</a></li> <li><a href="/docs/gcode/M200.html"><strong>M200</strong>: Set Filament Diameter</a></li> <li><a href="/docs/gcode/M201.html"><strong>M201</strong>: Print / Travel Move Limits</a></li> <li><a href="/docs/gcode/M203.html"><strong>M203</strong>: Set Max Feedrate</a></li> <li><a href="/docs/gcode/M204.html"><strong>M204</strong>: Set Starting Acceleration</a></li> <li><a href="/docs/gcode/M205.html"><strong>M205</strong>: Set Advanced Settings</a></li> <li><a href="/docs/gcode/M206.html"><strong>M206</strong>: Set Home Offsets</a></li> <li><a href="/docs/gcode/M207.html"><strong>M207</strong>: Set Firmware Retraction</a></li> <li><a href="/docs/gcode/M208.html"><strong>M208</strong>: Firmware Recover</a></li> <li><a href="/docs/gcode/M209.html"><strong>M209</strong>: Set Auto Retract</a></li> <li><a href="/docs/gcode/M211.html"><strong>M211</strong>: Software Endstops</a></li> <li><a href="/docs/gcode/M217.html"><strong>M217</strong>: Filament swap parameters</a></li> <li><a href="/docs/gcode/M218.html"><strong>M218</strong>: Set Hotend Offset</a></li> <li><a href="/docs/gcode/M220.html"><strong>M220</strong>: Set Feedrate Percentage</a></li> <li><a href="/docs/gcode/M221.html"><strong>M221</strong>: Set Flow Percentage</a></li> <li><a href="/docs/gcode/M226.html"><strong>M226</strong>: Wait for Pin State</a></li> <li><a href="/docs/gcode/M240.html"><strong>M240</strong>: Trigger Camera</a></li> <li><a href="/docs/gcode/M250.html"><strong>M250</strong>: LCD Contrast</a></li> <li><a href="/docs/gcode/M255.html"><strong>M255</strong>: LCD Sleep/Backlight Timeout</a></li> <li><a href="/docs/gcode/M256.html"><strong>M256</strong>: LCD Brightness</a></li> <li><a href="/docs/gcode/M260.html"><strong>M260</strong>: I2C Send</a></li> <li><a href="/docs/gcode/M261.html"><strong>M261</strong>: I2C Request</a></li> <li><a href="/docs/gcode/M280.html"><strong>M280</strong>: Servo Position</a></li> <li><a href="/docs/gcode/M281.html"><strong>M281</strong>: Edit Servo Angles</a></li> <li><a href="/docs/gcode/M282.html"><strong>M282</strong>: Detach Servo</a></li> <li><a href="/docs/gcode/M290.html"><strong>M290</strong>: Babystep</a></li> <li><a href="/docs/gcode/M300.html"><strong>M300</strong>: Play Tone</a></li> <li><a href="/docs/gcode/M301.html"><strong>M301</strong>: Set Hotend PID</a></li> <li><a href="/docs/gcode/M302.html"><strong>M302</strong>: Cold Extrude</a></li> <li><a href="/docs/gcode/M303.html"><strong>M303</strong>: PID autotune</a></li> <li><a href="/docs/gcode/M304.html"><strong>M304</strong>: Set Bed PID</a></li> <li><a href="/docs/gcode/M305.html"><strong>M305</strong>: User Thermistor Parameters</a></li> <li><a href="/docs/gcode/M306.html"><strong>M306</strong>: Model Predictive Temp. Control</a></li> <li><a href="/docs/gcode/M350.html"><strong>M350</strong>: Set micro-stepping</a></li> <li><a href="/docs/gcode/M351.html"><strong>M351</strong>: Set Microstep Pins</a></li> <li><a href="/docs/gcode/M355.html"><strong>M355</strong>: Case Light Control</a></li> <li><a href="/docs/gcode/M360.html"><strong>M360</strong>: SCARA Theta A</a></li> <li><a href="/docs/gcode/M361.html"><strong>M361</strong>: SCARA Theta-B</a></li> <li><a href="/docs/gcode/M362.html"><strong>M362</strong>: SCARA Psi-A</a></li> <li><a href="/docs/gcode/M363.html"><strong>M363</strong>: SCARA Psi-B</a></li> <li><a href="/docs/gcode/M364.html"><strong>M364</strong>: SCARA Psi-C</a></li> <li><a href="/docs/gcode/M380.html"><strong>M380</strong>: Activate Solenoid</a></li> <li><a href="/docs/gcode/M381.html"><strong>M381</strong>: Deactivate Solenoids</a></li> <li><a href="/docs/gcode/M400.html"><strong>M400</strong>: Finish Moves</a></li> <li><a href="/docs/gcode/M401.html"><strong>M401</strong>: Deploy Probe</a></li> <li><a href="/docs/gcode/M402.html"><strong>M402</strong>: Stow Probe</a></li> <li><a href="/docs/gcode/M403.html"><strong>M403</strong>: MMU2 Filament Type</a></li> <li><a href="/docs/gcode/M404.html"><strong>M404</strong>: Set Filament Diameter</a></li> <li><a href="/docs/gcode/M405.html"><strong>M405</strong>: Filament Width Sensor On</a></li> <li><a href="/docs/gcode/M406.html"><strong>M406</strong>: Filament Width Sensor Off</a></li> <li><a href="/docs/gcode/M407.html"><strong>M407</strong>: Filament Width</a></li> <li><a href="/docs/gcode/M410.html"><strong>M410</strong>: Quickstop</a></li> <li><a href="/docs/gcode/M412.html"><strong>M412</strong>: Filament Runout</a></li> <li><a href="/docs/gcode/M413.html"><strong>M413</strong>: Power-loss Recovery</a></li> <li><a href="/docs/gcode/M420.html"><strong>M420</strong>: Bed Leveling State</a></li> <li><a href="/docs/gcode/M421.html"><strong>M421</strong>: Set Mesh Value</a></li> <li><a href="/docs/gcode/M422.html"><strong>M422</strong>: Set Z Motor XY</a></li> <li><a href="/docs/gcode/M423.html"><strong>M423</strong>: X Twist Compensation</a></li> <li><a href="/docs/gcode/M425.html"><strong>M425</strong>: Backlash compensation</a></li> <li><a href="/docs/gcode/M428.html"><strong>M428</strong>: Home Offsets Here</a></li> <li><a href="/docs/gcode/M430.html"><strong>M430</strong>: Power Monitor</a></li> <li><a href="/docs/gcode/M486.html"><strong>M486</strong>: Cancel Objects</a></li> <li><a href="/docs/gcode/M493.html"><strong>M493</strong>: Fixed-Time Motion</a></li> <li><a href="/docs/gcode/M500.html"><strong>M500</strong>: Save Settings</a></li> <li><a href="/docs/gcode/M501.html"><strong>M501</strong>: Restore Settings</a></li> <li><a href="/docs/gcode/M502.html"><strong>M502</strong>: Factory Reset</a></li> <li><a href="/docs/gcode/M503.html"><strong>M503</strong>: Report Settings</a></li> <li><a href="/docs/gcode/M504.html"><strong>M504</strong>: Validate EEPROM contents</a></li> <li><a href="/docs/gcode/M510.html"><strong>M510</strong>: Lock Machine</a></li> <li><a href="/docs/gcode/M511.html"><strong>M511</strong>: Unlock Machine</a></li> <li><a href="/docs/gcode/M512.html"><strong>M512</strong>: Set Passcode</a></li> <li><a href="/docs/gcode/M524.html"><strong>M524</strong>: Abort SD print</a></li> <li><a href="/docs/gcode/M540.html"><strong>M540</strong>: Endstops Abort SD</a></li> <li><a href="/docs/gcode/M569.html"><strong>M569</strong>: Set TMC stepping mode</a></li> <li><a href="/docs/gcode/M575.html"><strong>M575</strong>: Serial baud rate</a></li> <li><a href="/docs/gcode/M592.html"><strong>M592</strong>: Nonlinear Extrusion Control</a></li> <li><a href="/docs/gcode/M593.html"><strong>M593</strong>: ZV Input Shaping</a></li> <li><a href="/docs/gcode/M600.html"><strong>M600</strong>: Filament Change</a></li> <li><a href="/docs/gcode/M603.html"><strong>M603</strong>: Configure Filament Change</a></li> <li><a href="/docs/gcode/M605.html"><strong>M605</strong>: Multi Nozzle Mode</a></li> <li><a href="/docs/gcode/M665.html"><strong>M665</strong>: Delta Configuration</a></li> <li><a href="/docs/gcode/M665-scara.html"><strong>M665</strong>: SCARA Configuration</a></li> <li><a href="/docs/gcode/M666.html"><strong>M666</strong>: Set Delta endstop adjustments</a></li> <li><a href="/docs/gcode/M666-dual.html"><strong>M666</strong>: Set dual endstop offsets</a></li> <li><a href="/docs/gcode/M672.html"><strong>M672</strong>: Duet Smart Effector sensitivity</a></li> <li><a href="/docs/gcode/M701.html"><strong>M701</strong>: Load filament</a></li> <li><a href="/docs/gcode/M702.html"><strong>M702</strong>: Unload filament</a></li> <li><a href="/docs/gcode/M710.html"><strong>M710</strong>: Controller Fan settings</a></li> <li><a href="/docs/gcode/M808.html"><strong>M808</strong>: Repeat Marker</a></li> <li><a href="/docs/gcode/M810-M819.html"><strong>M810-M819</strong>: G-code macros</a></li> <li><a href="/docs/gcode/M851.html"><strong>M851</strong>: XYZ Probe Offset</a></li> <li><a href="/docs/gcode/M852.html"><strong>M852</strong>: Bed Skew Compensation</a></li> <li><a href="/docs/gcode/M860-M869.html"><strong>M860-M869</strong>: I2C Position Encoders</a></li> <li><a href="/docs/gcode/M871.html"><strong>M871</strong>: Probe temperature config</a></li> <li><a href="/docs/gcode/M876.html"><strong>M876</strong>: Handle Prompt Response</a></li> <li><a href="/docs/gcode/M900.html"><strong>M900</strong>: Linear Advance Factor</a></li> <li><a href="/docs/gcode/M906.html"><strong>M906</strong>: Stepper Motor Current</a></li> <li><a href="/docs/gcode/M907.html"><strong>M907</strong>: Set Motor Current</a></li> <li><a href="/docs/gcode/M908.html"><strong>M908</strong>: Set Trimpot Pins</a></li> <li><a href="/docs/gcode/M909.html"><strong>M909</strong>: DAC Print Values</a></li> <li><a href="/docs/gcode/M910.html"><strong>M910</strong>: Commit DAC to EEPROM</a></li> <li><a href="/docs/gcode/M911.html"><strong>M911</strong>: TMC OT Pre-Warn Condition</a></li> <li><a href="/docs/gcode/M912.html"><strong>M912</strong>: Clear TMC OT Pre-Warn</a></li> <li><a href="/docs/gcode/M913.html"><strong>M913</strong>: Set Hybrid Threshold Speed</a></li> <li><a href="/docs/gcode/M914.html"><strong>M914</strong>: TMC Bump Sensitivity</a></li> <li><a href="/docs/gcode/M915.html"><strong>M915</strong>: TMC Z axis calibration</a></li> <li><a href="/docs/gcode/M916.html"><strong>M916</strong>: L6474 Thermal Warning Test</a></li> <li><a href="/docs/gcode/M917.html"><strong>M917</strong>: L6474 Overcurrent Warning Test</a></li> <li><a href="/docs/gcode/M918.html"><strong>M918</strong>: L6474 Speed Warning Test</a></li> <li><a href="/docs/gcode/M919.html"><strong>M919</strong>: TMC Chopper Timing</a></li> <li><a href="/docs/gcode/M928.html"><strong>M928</strong>: Start SD Logging</a></li> <li><a href="/docs/gcode/M951.html"><strong>M951</strong>: Magnetic Parking Extruder</a></li> <li><a href="/docs/gcode/M993.html"><strong>M993-M994</strong>: SD / SPI Flash</a></li> <li><a href="/docs/gcode/M995.html"><strong>M995</strong>: Touch Screen Calibration</a></li> <li><a href="/docs/gcode/M997.html"><strong>M997</strong>: Firmware update</a></li> <li><a href="/docs/gcode/M999.html"><strong>M999</strong>: STOP Restart</a></li> <li><a href="/docs/gcode/M7219.html"><strong>M7219</strong>: MAX7219 Control</a></li> <li><a href="/docs/gcode/T.html"><strong>T0-T7</strong>: Select or Report Tool</a></li> <li><a href="/docs/gcode/T-mmu2.html"><strong>T?-Tx</strong>: MMU2 Special Commands</a></li> </ul> </li> <li class="dropdown-submenu hardware"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Hardware</a> <ul class="dropdown-menu"> <li><a href="/meta/hardware/">All documents</a></li> <li class="divider"> <li><a href="/docs/hardware/boards.html">Boards</a></li> <li><a href="/docs/hardware/controllers.html">Controllers and displays</a></li> <li class="divider"> <li><a href="/docs/hardware/endstops.html">Endstops</a></li> <li><a href="/docs/hardware/tmc_drivers.html">Trinamic drivers</a></li> </ul> </li> <li class="dropdown-submenu setting"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Settings</a> <ul class="dropdown-menu"> <li><a href="/meta/setting/">All documents</a></li> <li class="divider"> <li><a href="/docs/setting/config_info.html">Configuration Info</a></li> <li><a href="/docs/setting/extruder.html">Extruders</a></li> <li><a href="/docs/setting/hardware.html">Hardware</a></li> <li><a href="/docs/setting/machine_info.html">Machine Info</a></li> <li><a href="/docs/setting/stepper_drivers.html">Stepper Drivers</a></li> <li><a href="/docs/setting/temperature.html">Temperature</a></li> </ul> </li> <li><a href="/docs/basics/troubleshooting.html">Troubleshooting</a></li> <li class="divider"> <li><a href="/meta/in-review/">Documentation Needing Review</a></li> </ul> </li> <li id="top-donate"><a href="/docs/development/contributing.html#donate">❤️ Donate</a></li> <li id="searchbox"> <form action="/meta/search/"> <input type="search" name="q" placeholder="Search"> </form> </li> </ul> <ul class="nav navbar-right hidden-sm"> <li> <a href="https://github.com/MarlinFirmware/MarlinDocumentation/edit/master/_configuration/configuration.md" data-proofer-ignore><i class="fa fa-pen-to-square" aria-hidden="true"></i> <span>Edit Page</span></a> </li> </ul> </div> </div> </nav> <div class="custom-btn"> <div class="row hidden-md hidden-lg hidden-xl"> <a class="btn btn-edit e-btn btn-block btn-lg" href="https://github.com/MarlinFirmware/MarlinDocumentation/edit/master/_configuration/configuration.md" data-proofer-ignore role="button"><span class="e-btn-text"><em class="fa fa-pen-to-square" aria-hidden="true"></em>  Edit Page</span></a> </div> <div class="row"> <a class="btn btn-learn e-btn btn-block btn-lg" href="/docs/basics/introduction.html" role="button"> <span class="e-btn-text"><em class="fa fa-book" aria-hidden="true"></em>  Learn more</span></a> </div> <div class="row"> <a class="btn btn-contribute e-btn btn-block btn-lg" href="/docs/development/contributing.html" role="button"> <span class="e-btn-text"><em class="fa fa-users" aria-hidden="true"></em>  Contribute</span></a> </div> <div class="row"> <a class="btn btn-download e-btn btn-block btn-lg" href="/meta/download/" role="button"> <span class="e-btn-text"><em class="fa fa-download" aria-hidden="true"></em>  Download</span></a> </div> <div class="row"> <a class="btn btn-follow e-btn btn-block btn-lg" href="//fosstodon.org/@marlinfirmware" role="button"> <span class="e-btn-text"><em class="fa-brands fa-mastodon" aria-hidden="true"></em>  Follow @MarlinFirmware</span></a> </div> <div class="row"> <a class="btn btn-follow e-btn btn-block btn-lg" href="//twitter.com/marlinfirmware" role="button"> <span class="e-btn-text"><em class="fa-brands fa-x" aria-hidden="true"></em>  Follow @MarlinFirmware</span></a> </div> </div> <div class="container" role="main"> <div class="row"> <div class="col-lg-3 col-md-4 visible-lg-block visible-md-block custom-no-padding"> <div class="custom-fixed-sidebar"> <div id="toc"></div> </div> </div> <div class="col-lg-9 col-md-8"> <div class="row"> <div class="col-md-12 custom-article"> <p id="authors" class="text-right pull-right visible-lg-block hidden-print small custom-pt25"> <a href="//github.com/Sarf2k4" data-toggle="tooltip" data-placement="bottom" title="Visit Sarf2k4's profile on Github"><img class="avatar avatar-small" alt="Sarf2k4" width="30" height="30" data-proofer-ignore="true" src="https://avatars2.githubusercontent.com/Sarf2k4?v=3&amp;s=30" srcset="https://avatars2.githubusercontent.com/Sarf2k4?v=3&amp;s=30 1x, https://avatars2.githubusercontent.com/Sarf2k4?v=3&amp;s=60 2x, https://avatars2.githubusercontent.com/Sarf2k4?v=3&amp;s=90 3x, https://avatars2.githubusercontent.com/Sarf2k4?v=3&amp;s=120 4x"></a> <a href="//github.com/paulusjacobus" data-toggle="tooltip" data-placement="bottom" title="Visit paulusjacobus's profile on Github"><img class="avatar avatar-small" alt="paulusjacobus" width="30" height="30" data-proofer-ignore="true" src="https://avatars2.githubusercontent.com/paulusjacobus?v=3&amp;s=30" srcset="https://avatars2.githubusercontent.com/paulusjacobus?v=3&amp;s=30 1x, https://avatars2.githubusercontent.com/paulusjacobus?v=3&amp;s=60 2x, https://avatars2.githubusercontent.com/paulusjacobus?v=3&amp;s=90 3x, https://avatars2.githubusercontent.com/paulusjacobus?v=3&amp;s=120 4x"></a> <a href="//github.com/jbrazio" data-toggle="tooltip" data-placement="bottom" title="Visit jbrazio's profile on Github"><img class="avatar avatar-small" alt="jbrazio" width="30" height="30" data-proofer-ignore="true" src="https://avatars2.githubusercontent.com/jbrazio?v=3&amp;s=30" srcset="https://avatars2.githubusercontent.com/jbrazio?v=3&amp;s=30 1x, https://avatars2.githubusercontent.com/jbrazio?v=3&amp;s=60 2x, https://avatars2.githubusercontent.com/jbrazio?v=3&amp;s=90 3x, https://avatars2.githubusercontent.com/jbrazio?v=3&amp;s=120 4x"></a> <a href="//github.com/landodragon141" data-toggle="tooltip" data-placement="bottom" title="Visit landodragon141's profile on Github"><img class="avatar avatar-small" alt="landodragon141" width="30" height="30" data-proofer-ignore="true" src="https://avatars1.githubusercontent.com/landodragon141?v=3&amp;s=30" srcset="https://avatars1.githubusercontent.com/landodragon141?v=3&amp;s=30 1x, https://avatars1.githubusercontent.com/landodragon141?v=3&amp;s=60 2x, https://avatars1.githubusercontent.com/landodragon141?v=3&amp;s=90 3x, https://avatars1.githubusercontent.com/landodragon141?v=3&amp;s=120 4x"></a> <a href="//github.com/thinkyhead" data-toggle="tooltip" data-placement="bottom" title="Visit thinkyhead's profile on Github"><img class="avatar avatar-small" alt="thinkyhead" width="30" height="30" data-proofer-ignore="true" src="https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=30" srcset="https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=30 1x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=60 2x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=90 3x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=120 4x"></a> <a href="//github.com/shitcreek" data-toggle="tooltip" data-placement="bottom" title="Visit shitcreek's profile on Github"><img class="avatar avatar-small" alt="shitcreek" width="30" height="30" data-proofer-ignore="true" src="https://avatars1.githubusercontent.com/shitcreek?v=3&amp;s=30" srcset="https://avatars1.githubusercontent.com/shitcreek?v=3&amp;s=30 1x, https://avatars1.githubusercontent.com/shitcreek?v=3&amp;s=60 2x, https://avatars1.githubusercontent.com/shitcreek?v=3&amp;s=90 3x, https://avatars1.githubusercontent.com/shitcreek?v=3&amp;s=120 4x"></a> <a href="//github.com/LMF5000" data-toggle="tooltip" data-placement="bottom" title="Visit LMF5000's profile on Github"><img class="avatar avatar-small" alt="LMF5000" width="30" height="30" data-proofer-ignore="true" src="https://avatars1.githubusercontent.com/LMF5000?v=3&amp;s=30" srcset="https://avatars1.githubusercontent.com/LMF5000?v=3&amp;s=30 1x, https://avatars1.githubusercontent.com/LMF5000?v=3&amp;s=60 2x, https://avatars1.githubusercontent.com/LMF5000?v=3&amp;s=90 3x, https://avatars1.githubusercontent.com/LMF5000?v=3&amp;s=120 4x"></a> <a href="//github.com/descipher" data-toggle="tooltip" data-placement="bottom" title="Visit descipher's profile on Github"><img class="avatar avatar-small" alt="descipher" width="30" height="30" data-proofer-ignore="true" src="https://avatars0.githubusercontent.com/descipher?v=3&amp;s=30" srcset="https://avatars0.githubusercontent.com/descipher?v=3&amp;s=30 1x, https://avatars0.githubusercontent.com/descipher?v=3&amp;s=60 2x, https://avatars0.githubusercontent.com/descipher?v=3&amp;s=90 3x, https://avatars0.githubusercontent.com/descipher?v=3&amp;s=120 4x"></a> </p> <h1 class="custom-article-header">Configuring Marlin</h1> <p>Marlin is a huge C++ program composed of many files, but among the most important are the files that contain all of Marlin’s compile-time configuration options:</p> <ul> <li> <code class="language-plaintext highlighter-rouge">Configuration.h</code> contains the core settings for the hardware, language and controller selection, and settings for the most common features and components.</li> <li> <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> contains more detailed customization options, add-ons, experimental features, and other esoteric settings.</li> <li> <code class="language-plaintext highlighter-rouge">config.ini</code> may be included to modify the configuration at the start of a PlatformIO build. See the <a href="config-ini.html">Configuration with INI</a> page for more information.</li> </ul> <p>The two <code class="language-plaintext highlighter-rouge">.h</code> files contain all of Marlin’s build-time configuration options. Simply edit or replace these files, then build and upload Marlin to the board. Hundreds of user-donated configurations are posted at the <a href="//github.com/MarlinFirmware/Configurations">Configurations repository</a> to get you started.</p> <h2 id="compiler-directives">Compiler Directives</h2> <p>Marlin is configured using C++ compiler directives. This allows Marlin to leverage the C++ preprocessor and include only the code and data needed for the enabled options. This results in the smallest possible binary. A build of Marlin can range from 50K to over 230K in size.</p> <p>Settings can be enabled, disabled, and assigned values using C preprocessor syntax like so:</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define THIS_IS_ENABLED    // this switch is enabled
</span><span class="c1">//#define THIS_IS_DISABLED // this switch is disabled</span>
<span class="cp">#define OPTION_VALUE 22    // this setting is "22"
</span></code></pre></div></div> <h2 id="migration">Migration</h2> <p>To use configurations from an earlier version of Marlin, first try dropping them into the newer Marlin, updating <code class="language-plaintext highlighter-rouge">CONFIGURATION_H_VERSION</code> and <code class="language-plaintext highlighter-rouge">CONFIGURATION_ADV_H_VERSION</code>, and building the firmware. As part of the build process, Marlin will check for outdated options and show error messages that explain exactly what needs to be changed.</p> <p>To migrate your settings to a new Configuration you can use tools like Notepad++ or <a href="//winmerge.org/">Winmerge</a> to compare old configurations with the newer (default) configurations and copy settings over on a change-by-change basis. Most settings will come over without changes, then you can review any tricky changes that remain.</p> <h2 id="sources-of-documentation">Sources of Documentation</h2> <p>The most authoritative source on configuration details will always be <strong>the configuration files themselves</strong>. They provide pretty complete descriptions of each option, and are themselves the source for most of the information presented here.</p> <p>If you’ve never configured and calibrated a 3D Printer before, here are some good resources:</p> <ul> <li><a href="//reprap.org/wiki/Calibration">Calibration</a></li> <li><a href="//youtu.be/wAL9d7FgInk">Calibrating Steps-per-unit (video)</a></li> <li><a href="//blog.prusaprinters.org/calculator_3416/">Průša’s calculators</a></li> <li><a href="//reprap.org/wiki/Triffid_Hunter%27s_Calibration_Guide">Triffid Hunter’s Calibration Guide</a></li> <li><a href="//www.thingiverse.com/thing:5573">The Essential Calibration Set</a></li> <li><a href="//sites.google.com/site/repraplogphase/calibration-of-your-reprap">Calibration of your RepRap</a></li> <li><a href="//www.thingiverse.com/thing:298812">XY 20mm Calibration Box</a></li> <li><a href="//reprap.org/wiki/G-code">G-code reference</a></li> <li><a href="//github.com/cabbagecreek/Marlin3DprinterTool">Marlin3DprinterTool</a></li> </ul> <h2 id="before-you-begin">Before You Begin</h2> <p>To get your core <code class="language-plaintext highlighter-rouge">Configuration.h</code> settings right you’ll need to know the following things about your printer:</p> <ul> <li>Printer style, such as Cartesian, Delta, CoreXY, or SCARA</li> <li>Driver board, such as RAMPS, RUMBA, Teensy, etc.</li> <li>Number of extruders</li> <li>Steps-per-mm for XYZ axes and extruders (can be tuned later)</li> <li>Endstop positions</li> <li>Thermistors and/or thermocouples</li> <li>Probes and probing settings</li> <li>LCD controller brand and model</li> <li>Add-ons and custom components</li> </ul> <h1 id="configurationh"><code class="language-plaintext highlighter-rouge">Configuration.h</code></h1> <p>The core and default settings of Marlin live in the <code class="language-plaintext highlighter-rouge">Configuration.h</code> file. Most of these settings are fixed. Once you compile Marlin, that’s it. To change them you need to re-compile. However, several items in <code class="language-plaintext highlighter-rouge">Configuration.h</code> only provide defaults -factory settings- that can be changed via the user interface, stored on EEPROM and reloaded or restored to initial values.</p> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>Settings that can be changed and saved to EEPROM are marked with <em class="fa fa-sticky-note" aria-hidden="true"></em>. Options marked with <em class="fa fa-desktop" aria-hidden="true"></em> can be changed from the LCD controller.</p> <hr> <p>Settings saved in EEPROM persist across reboots and still remain after flashing new firmware, so always send <a href="/docs/gcode/M502.html"><code class="language-plaintext highlighter-rouge">M502</code></a>, <a href="/docs/gcode/M500.html"><code class="language-plaintext highlighter-rouge">M500</code></a> (or “Reset EEPROM” from the LCD) after flashing.</p> </div> </div> </div> <p>This section follows the order of settings as they appear. The order isn’t always logical, so “Search In Page” may be helpful. We’ve tried to keep descriptions brief and to the point. For more detailed information on various topics, please read the main articles and follow the links provided in the option descriptions.</p> <h2 id="configuration-versioning">Configuration versioning</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define CONFIGURATION_H_VERSION 020005
</span></code></pre></div></div> <p>Marlin now checks for a configuration version and won’t compile without this setting. If you want to upgrade from an earlier version of Marlin, add this line to your old configuration file. During compilation, Marlin will throw errors explaining what needs to be changed.</p> <h2 id="firmware-info">Firmware Info</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define STRING_CONFIG_H_AUTHOR "(none, default config)"
</span>
<span class="cp">#define SHOW_BOOTSCREEN
#define SHOW_CUSTOM_BOOTSCREEN
#define CUSTOM_STATUS_SCREEN_IMAGE
</span></code></pre></div></div> <ul> <li> <code class="language-plaintext highlighter-rouge">STRING_CONFIG_H_AUTHOR</code> is shown in the Marlin startup message to identify the author (and optional variant) of the firmware. Use this setting as a way to uniquely identify your custom configurations. The startup message is printed whenever the board (re)boots.</li> <li> <code class="language-plaintext highlighter-rouge">SHOW_BOOTSCREEN</code> enables the boot screen for LCD controllers.</li> <li> <code class="language-plaintext highlighter-rouge">SHOW_CUSTOM_BOOTSCREEN</code> shows the bitmap in <code class="language-plaintext highlighter-rouge">Marlin/_Bootscreen.h</code> on startup.</li> <li> <code class="language-plaintext highlighter-rouge">CUSTOM_STATUS_SCREEN_IMAGE</code> shows the bitmap in <code class="language-plaintext highlighter-rouge">Marlin/_Statusscreen.h</code> on the status screen.</li> </ul> <h2 id="hardware-info">Hardware Info</h2> <h3 id="serial-port">Serial Port</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SERIAL_PORT 0
</span></code></pre></div></div> <p>The index of the on-board serial port that will be used for primary host communication. Change this if, for example, you need to connect a wireless adapter to non-default port pins.</p> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>The first serial port (-1 or 0) will always be used by the Arduino bootloader regardless of this setting.</p> </div> </div> </div> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SERIAL_PORT_2 -1
</span></code></pre></div></div> <p>Enable this if your board has a secondary serial port.</p> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>Serial port -1 is the USB emulated serial port, if available.</p> </div> </div> </div> <h3 id="baud-rate">Baud Rate</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define BAUDRATE 115200
</span></code></pre></div></div> <p>The serial communication speed of the printer should be as fast as it can manage without generating errors. In most cases 115200 gives a good balance between speed and stability. Start with 250000 and only go lower if “line number” and “checksum” errors start to appear. Note that some boards (<em>e.g.,</em> a temperamental Sanguinololu clone based on the ATMEGA1284P) may not be able to handle a baud rate over 57600. Allowed values: 2400, 9600, 19200, 38400, 57600, 115200, 250000.</p> <h3 id="bluetooth">Bluetooth</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define BLUETOOTH
</span></code></pre></div></div> <p>Enable the Bluetooth serial interface. For boards based on the AT90USB.</p> <p><img src="/assets/images/config/motherboard.jpg" alt="Motherboard" class="floater framed"></p> <h3 id="motherboard">Motherboard</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define MOTHERBOARD BOARD_RAMPS_14_EFB
</span></code></pre></div></div> <p>The most important setting is Marlin is the motherboard. The firmware needs to know what board it will be running on so it can assign the right functions to all pins and take advantage of the full capabilities of the board. Setting this incorrectly will lead to unpredictable results.</p> <p>Using <code class="language-plaintext highlighter-rouge">boards.h</code> as a reference, replace <code class="language-plaintext highlighter-rouge">BOARD_RAMPS_14_EFB</code> with your board’s ID. The <code class="language-plaintext highlighter-rouge">boards.h</code> file has the most up-to-date listing of supported boards - check there first if you don’t see yours listed <a href="/docs/hardware/boards.html"><code class="language-plaintext highlighter-rouge">here</code></a>.</p> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>The Sanguino board requires adding “Sanguino” support to Arduino IDE. Open <code class="language-plaintext highlighter-rouge">Preferences</code> and locate the <code class="language-plaintext highlighter-rouge">Additional Boards Manager URLs</code> field. Copy and paste <a href="//raw.githubusercontent.com/Lauszus/Sanguino/master/package_lauszus_sanguino_index.json">this source URL</a>. Then use <code class="language-plaintext highlighter-rouge">Tools</code> &gt; <code class="language-plaintext highlighter-rouge">Boards</code> &gt; <code class="language-plaintext highlighter-rouge">Boards Manager</code> to install “Sanguino” from the list. An internet connection is required. (Thanks to “Dust’s RepRap Blog” for the tip.)</p> </div> </div> </div> <h3 id="custom-machine-name">Custom Machine Name</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define CUSTOM_MACHINE_NAME "3D Printer"</span>
</code></pre></div></div> <p>This is the name of your printer as displayed on the LCD and by <a href="/docs/gcode/M115.html"><code class="language-plaintext highlighter-rouge">M115</code></a>. For example, if you set this to “My Delta” the LCD will display “My Delta ready” when the printer starts up.</p> <h3 id="machine-uuid">Machine UUID</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MACHINE_UUID "00000000-0000-0000-0000-000000000000"</span>
</code></pre></div></div> <p>A unique ID for your 3D printer. A suitable unique ID can be generated randomly at <a href="//www.uuidtools.com/generate/v4">uuidtools.com</a>. Some host programs and slicers may use this identifier to differentiate between specific machines on your network.</p> <h2 id="extruder-info">Extruder Info</h2> <p><img src="/assets/images/config/extruders.png" alt="Extruders" class="floater framed"></p> <h3 id="extruders">Extruders</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define EXTRUDERS 1
</span></code></pre></div></div> <p>This value, from 0 to 6, defines how many extruders (or E steppers) the printer has. By default Marlin will assume separate nozzles all moving together on a single carriage. If you have a single nozzle, a switching extruder, a mixing extruder, or dual X carriages, specify that below.</p> <p>This value should be set to the total number of E stepper motors on the machine, even if there’s only a single nozzle.</p> <h3 id="filament-diameter">Filament Diameter</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define DEFAULT_NOMINAL_FILAMENT_DIA 3.00
</span></code></pre></div></div> <p>This is the “nominal” filament diameter as written on the filament spool (1.75, 2.85, 3.0). If you typically use 1.75mm filament, but physically measure the diameter as 1.70mm, you should still use 1.75 if that’s what you have set in your slicer.</p> <p>This value is used by Marlin to compensate for Filament Width when printing in volumetric mode (See <a href="/docs/gcode/M200.html"><code class="language-plaintext highlighter-rouge">M200</code></a>), and by the Unified Bed Leveling command <a href="/docs/gcode/G026.html"><code class="language-plaintext highlighter-rouge">G26</code></a> when printing a test grid.</p> <p>You can override this value with <a href="/docs/gcode/M404.html"><code class="language-plaintext highlighter-rouge">M404 W</code></a>.</p> <h3 id="single-nozzle">Single Nozzle</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SINGLENOZZLE
</span></code></pre></div></div> <p>Enable <code class="language-plaintext highlighter-rouge">SINGLENOZZLE</code> if you have an E3D Cyclops or any other “multi-extruder” system that shares a single nozzle. In a single-nozzle setup, only one filament drive is engaged at a time, and each needs to retract before the next filament can be loaded and begin purging and extruding.</p> <h3 id="průša-mk2-single-nozzle-multi-material-multiplexer">Průša MK2 Single Nozzle Multi-Material Multiplexer</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MK2_MULTIPLEXER</span>
</code></pre></div></div> <p>Enabling <code class="language-plaintext highlighter-rouge">MK2_MULTIPLEXER</code> allows one stepper driver on a control board to drive two to eight stepper motors, one at a time.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define E_MUX0_PIN 40  // Always Required</span>
<span class="c1">//#define E_MUX1_PIN 42  // Needed for 3 to 8 inputs</span>
<span class="c1">//#define E_MUX2_PIN 44  // Needed for 5 to 8 inputs</span>
</code></pre></div></div> <p>Override the default DIO selector pins.</p> <h3 id="průša-mmu2">Průša MMU2</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define PRUSA_MMU2
</span></code></pre></div></div> <p>Enable support for the Průša Multi-material unit 2. This requires a free serial port on your printer board. To use the MMU2 you also have to</p> <ul> <li>enable <a href="#nozzle-park">NOZZLE_PARK_FEATURE</a> </li> <li>set <a href="#extruders">EXTRUDERS</a> = 5</li> </ul> <p>All details are configured in [Configuration_adv.h]</p> <h3 id="switching-extruder">Switching Extruder</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SWITCHING_EXTRUDER</span>
<span class="cp">#if ENABLED(SWITCHING_EXTRUDER)
</span>  <span class="cp">#define SWITCHING_EXTRUDER_SERVO_NR 0
</span>  <span class="cp">#define SWITCHING_EXTRUDER_SERVO_ANGLES { 0, 90 } // Angles for E0, E1[, E2, E3]
</span>  <span class="cp">#if EXTRUDERS &gt; 3
</span>    <span class="cp">#define SWITCHING_EXTRUDER_E23_SERVO_NR 1
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>A Switching Extruder is a dual extruder that uses a single stepper motor to drive two filaments, but only one at a time. The servo is used to switch the side of the extruder that will drive the filament. The E motor also reverses direction for the second filament. Set the servo sub-settings above according to your particular extruder’s setup instructions.</p> <h3 id="switching-nozzle">Switching Nozzle</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SWITCHING_NOZZLE</span>
<span class="cp">#if ENABLED(SWITCHING_NOZZLE)
</span>  <span class="cp">#define SWITCHING_NOZZLE_SERVO_NR 0
</span>  <span class="c1">//#define SWITCHING_NOZZLE_E1_SERVO_NR 1          // If two servos are used, the index of the second</span>
  <span class="cp">#define SWITCHING_NOZZLE_SERVO_ANGLES { 0, 90 }   // Angles for E0, E1 (single servo) or lowered/raised (dual servo)
#endif
</span></code></pre></div></div> <p>A Switching Nozzle is a carriage with 2 nozzles. A servo is used to move one of the nozzles up and down. The servo either lowers the active nozzle or raises the inactive one. Set the servo sub-settings above according to your particular extruder’s setup instructions.</p> <h3 id="parking-extruder-with-solenoid">Parking extruder (with solenoid)</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PARKING_EXTRUDER</span>
</code></pre></div></div> <p>Two separate X-carriages with extruders that connect to a moving part via a solenoid docking mechanism. Requires SOL1_PIN and SOL2_PIN.</p> <h3 id="parking-extruder-with-magnets">Parking extruder (with magnets)</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MAGNETIC_PARKING_EXTRUDER</span>
</code></pre></div></div> <p>Two separate X-carriages with extruders that connect to a moving part via a magnetic docking mechanism using movements and no solenoid</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if EITHER(PARKING_EXTRUDER, MAGNETIC_PARKING_EXTRUDER)
</span>
  <span class="cp">#define PARKING_EXTRUDER_PARKING_X { -78, 184 }     // X positions for parking the extruders
</span>  <span class="cp">#define PARKING_EXTRUDER_GRAB_DISTANCE 1            // (mm) Distance to move beyond the parking point to grab the extruder
</span>  <span class="c1">//#define MANUAL_SOLENOID_CONTROL                   // Manual control of docking solenoids with M380 S / M381</span>

  <span class="cp">#if ENABLED(PARKING_EXTRUDER)
</span>
    <span class="cp">#define PARKING_EXTRUDER_SOLENOIDS_INVERT           // If enabled, the solenoid is NOT magnetized with applied voltage
</span>    <span class="cp">#define PARKING_EXTRUDER_SOLENOIDS_PINS_ACTIVE LOW  // LOW or HIGH pin signal energizes the coil
</span>    <span class="cp">#define PARKING_EXTRUDER_SOLENOIDS_DELAY 250        // (ms) Delay for magnetic field. No delay if 0 or not defined.
</span>    <span class="c1">//#define MANUAL_SOLENOID_CONTROL                   // Manual control of docking solenoids with M380 S / M381</span>

  <span class="cp">#elif ENABLED(MAGNETIC_PARKING_EXTRUDER)
</span>
    <span class="cp">#define MPE_FAST_SPEED      9000      // (mm/m) Speed for travel before last distance point
</span>    <span class="cp">#define MPE_SLOW_SPEED      4500      // (mm/m) Speed for last distance travel to park and couple
</span>    <span class="cp">#define MPE_TRAVEL_DISTANCE   10      // (mm) Last distance point
</span>    <span class="cp">#define MPE_COMPENSATION       0      // Offset Compensation -1 , 0 , 1 (multiplier) only for coupling
</span>
  <span class="cp">#endif
</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Adjust the relevant settings to your specifications for use with either <code class="language-plaintext highlighter-rouge">PARKING_EXTRUDER</code> or <code class="language-plaintext highlighter-rouge">MAGNETIC_PARKING_EXTRUDER</code>.</p> <h3 id="switching-toolhead">Switching Toolhead</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SWITCHING_TOOLHEAD</span>
</code></pre></div></div> <p>Support for swappable and dockable toolheads, such as the E3D Tool Changer. Toolheads are locked with a servo.</p> <h3 id="magnetic-switching-toolhead">Magnetic Switching Toolhead</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MAGNETIC_SWITCHING_TOOLHEAD</span>
</code></pre></div></div> <p>Support swappable and dockable toolheads with a magnetic docking mechanism using movement and no servo.</p> <h3 id="electromagnetic-switching-toolhead">Electromagnetic Switching Toolhead</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define ELECTROMAGNETIC_SWITCHING_TOOLHEAD</span>
</code></pre></div></div> <p>For CoreXY / HBot kinematics, toolheads are parked at one edge and held with an electromagnet. Supports more than 2 toolheads. See https://youtu.be/JolbsAKTKf4</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ANY(SWITCHING_TOOLHEAD, MAGNETIC_SWITCHING_TOOLHEAD, ELECTROMAGNETIC_SWITCHING_TOOLHEAD)
</span>  <span class="cp">#define SWITCHING_TOOLHEAD_Y_POS          235         // (mm) Y position of the toolhead dock
</span>  <span class="cp">#define SWITCHING_TOOLHEAD_Y_SECURITY      10         // (mm) Security distance Y axis
</span>  <span class="cp">#define SWITCHING_TOOLHEAD_Y_CLEAR         60         // (mm) Minimum distance from dock for unobstructed X axis
</span>  <span class="cp">#define SWITCHING_TOOLHEAD_X_POS          { 215, 0 }  // (mm) X positions for parking the extruders
</span>  <span class="cp">#if ENABLED(SWITCHING_TOOLHEAD)
</span>    <span class="cp">#define SWITCHING_TOOLHEAD_SERVO_NR       2         // Index of the servo connector
</span>    <span class="cp">#define SWITCHING_TOOLHEAD_SERVO_ANGLES { 0, 180 }  // (degrees) Angles for Lock, Unlock
</span>  <span class="cp">#elif ENABLED(MAGNETIC_SWITCHING_TOOLHEAD)
</span>    <span class="cp">#define SWITCHING_TOOLHEAD_Y_RELEASE      5         // (mm) Security distance Y axis
</span>    <span class="cp">#define SWITCHING_TOOLHEAD_X_SECURITY   { 90, 150 } // (mm) Security distance X axis (T0,T1)
</span>    <span class="c1">//#define PRIME_BEFORE_REMOVE                       // Prime the nozzle before release from the dock</span>
    <span class="cp">#if ENABLED(PRIME_BEFORE_REMOVE)
</span>      <span class="cp">#define SWITCHING_TOOLHEAD_PRIME_MM           20  // (mm)   Extruder prime length
</span>      <span class="cp">#define SWITCHING_TOOLHEAD_RETRACT_MM         10  // (mm)   Retract after priming length
</span>      <span class="cp">#define SWITCHING_TOOLHEAD_PRIME_FEEDRATE    300  // (mm/m) Extruder prime feedrate
</span>      <span class="cp">#define SWITCHING_TOOLHEAD_RETRACT_FEEDRATE 2400  // (mm/m) Extruder retract feedrate
</span>    <span class="cp">#endif
</span>  <span class="cp">#elif ENABLED(ELECTROMAGNETIC_SWITCHING_TOOLHEAD)
</span>    <span class="cp">#define SWITCHING_TOOLHEAD_Z_HOP          2         // (mm) Z raise for switching
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>Adjust the relevant settings to your specifications for use with <code class="language-plaintext highlighter-rouge">SWITCHING_TOOLHEAD</code>, <code class="language-plaintext highlighter-rouge">PARKING_EXTRUDER</code> or <code class="language-plaintext highlighter-rouge">MAGNETIC_PARKING_EXTRUDER</code>.</p> <h3 id="mixing-extruder">Mixing Extruder</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MIXING_EXTRUDER</span>
<span class="cp">#if ENABLED(MIXING_EXTRUDER)
</span>  <span class="cp">#define MIXING_STEPPERS 2        // Number of steppers in your mixing extruder
</span>  <span class="cp">#define MIXING_VIRTUAL_TOOLS 16  // Use the Virtual Tool method with M163 and M164
</span>  <span class="c1">//#define DIRECT_MIXING_IN_G1    // Allow ABCDHI mix factors in G1 movement commands</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>A Mixing Extruder uses two or more stepper motors to drive multiple filaments into a mixing chamber, with the mixed filaments extruded from a single nozzle. This option adds the ability to set a mixture, to save mixtures, and to recall mixtures using the <code class="language-plaintext highlighter-rouge">T</code> command. The extruder still uses a single E axis, while the current mixture is used to determine the proportion of each filament to use. An “experimental” <a href="/docs/gcode/G000-G001.html"><code class="language-plaintext highlighter-rouge">G1</code></a> direct mixing option is included.</p> <p><code class="language-plaintext highlighter-rouge">MIXING_EXTRUDER</code> enables <a href="/docs/gcode/M163.html"><code class="language-plaintext highlighter-rouge">M163</code></a> - set mix factor, <a href="/docs/gcode/M164.html"><code class="language-plaintext highlighter-rouge">M164</code></a> - save mix, and <a href="/docs/gcode/M165.html"><code class="language-plaintext highlighter-rouge">M165</code></a> - set mix.</p> <h3 id="hotend-offsets">Hotend Offsets</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define HOTEND_OFFSET_X { 0.0, 20.00 } // (mm) relative X-offset for each nozzle</span>
<span class="c1">//#define HOTEND_OFFSET_Y { 0.0, 5.00 }  // (mm) relative Y-offset for each nozzle</span>
<span class="c1">//#define HOTEND_OFFSET_Z { 0.0, 0.00 }  // (mm) relative Z-offset for each nozzle</span>
</code></pre></div></div> <p>Hotend offsets are needed if your extruder has more than one nozzle. These values specify the offset from the first nozzle to each nozzle. So the first element is always set to 0.0. The next element corresponds to the next nozzle, and so on. Add more offsets if you have 3 or more nozzles.</p> <h2 id="power-supply">Power Supply</h2> <p><img src="/assets/images/config/atx.jpg" alt="ATX" class="floater framed"></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PSU_CONTROL</span>
<span class="c1">//#define PSU_NAME "Power Supply"</span>

<span class="cp">#if ENABLED(PSU_CONTROL)
</span>  <span class="cp">#define PSU_ACTIVE_HIGH false // Set 'false' for ATX (1), 'true' for X-Box (2)
</span>
  <span class="c1">//#define PS_DEFAULT_OFF      // Keep power off until enabled directly with M80</span>

  <span class="c1">//#define AUTO_POWER_CONTROL  // Enable automatic control of the PS_ON pin</span>
  <span class="cp">#if ENABLED(AUTO_POWER_CONTROL)
</span>    <span class="cp">#define AUTO_POWER_FANS           // Turn on PSU if fans need power
</span>    <span class="cp">#define AUTO_POWER_E_FANS
</span>    <span class="cp">#define AUTO_POWER_CONTROLLERFAN
</span>    <span class="cp">#define AUTO_POWER_CHAMBER_FAN
</span>    <span class="c1">//#define AUTO_POWER_E_TEMP        50 // (°C) Turn on PSU over this temperature</span>
    <span class="c1">//#define AUTO_POWER_CHAMBER_TEMP  30 // (°C) Turn on PSU over this temperature</span>
    <span class="cp">#define POWER_TIMEOUT 30
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>This option allows the controller board to switch the power supply 12V on and off with <a href="/docs/gcode/M080.html"><code class="language-plaintext highlighter-rouge">M80</code></a> and <a href="/docs/gcode/M081.html"><code class="language-plaintext highlighter-rouge">M81</code></a>. Requires <code class="language-plaintext highlighter-rouge">PS_ON_PIN</code>.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PS_DEFAULT_OFF</span>
</code></pre></div></div> <p>Enable this if you don’t want the power supply to switch on when you turn on the printer. This is for printers that have dual power supplies. For instance some setups have a separate power supply for the heaters. In this situation you can save power by leaving the power supply off until needed. If you don’t know what this is leave it.</p> <p><img src="/assets/images/config/thermal.jpg" alt="Thermometer" class="floater"></p> <h2 id="thermal-settings">Thermal Settings</h2> <h3 id="temperature-sensors">Temperature Sensors</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define TEMP_SENSOR_0 1
#define TEMP_SENSOR_1 0
#define TEMP_SENSOR_2 0
#define TEMP_SENSOR_3 0
#define TEMP_SENSOR_4 0
#define TEMP_SENSOR_5 0
#define TEMP_SENSOR_BED 0
#define TEMP_SENSOR_CHAMBER 0
</span></code></pre></div></div> <p>Temperature sensors are vital components in a 3D printer. Fast and accurate sensors ensure that the temperature will be well controlled, to keep plastic flowing smoothly and to prevent mishaps. Use these settings to specify the hotend and bed temperature sensors. Every 3D printer will have a hotend thermistor, and most will have a bed thermistor.</p> <p>The listing above these options in <code class="language-plaintext highlighter-rouge">Configuration.h</code> contains all the thermistors and thermocouples that Marlin knows and supports. Try to match your brand and model with one of the sensors in the list. If no match is found, use a profile for a similar sensor of the same brand, or try “1” – the generic profile. Each profile is calibrated for a particular temperature sensor so it’s important to be as precise as possible.</p> <div class="container-fluid"> <div class="row alert alert-warning custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-exclamation-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>It is crucial to obtain accurate temperature measurements. As a last resort, use 100k thermistor for <code class="language-plaintext highlighter-rouge">TEMP_SENSOR</code> and <code class="language-plaintext highlighter-rouge">TEMP_SENSOR_BED</code> but be highly skeptical of the temperature accuracy.</p> </div> </div> </div> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Dummy thermistor constant temperature readings, for use with 998 and 999</span>
<span class="cp">#define DUMMY_THERMISTOR_998_VALUE 25
#define DUMMY_THERMISTOR_999_VALUE 100
</span></code></pre></div></div> <p>Marlin provides two dummy sensors for testing purposes. Set their constant temperature readings here.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define TEMP_SENSOR_1_AS_REDUNDANT</span>
<span class="cp">#define MAX_REDUNDANT_TEMP_SENSOR_DIFF 10
</span></code></pre></div></div> <p>Enable this option to use sensor 1 as a redundant sensor for sensor 0. This is an advanced way to protect against temp sensor failure. If the temperature difference between sensors exceeds <code class="language-plaintext highlighter-rouge">MAX_REDUNDANT_TEMP_SENSOR_DIFF</code> Marlin will abort the print and disable the heater.</p> <h3 id="temperature-stability">Temperature Stability</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define TEMP_RESIDENCY_TIME 10  // (seconds)
#define TEMP_HYSTERESIS 3       // (degC) range of +/- temperatures considered "close" to the target one
#define TEMP_WINDOW 1           // (degC) Window around target to start the residency timer x degC early.
</span></code></pre></div></div> <p>Extruders must maintain a stable temperature for <code class="language-plaintext highlighter-rouge">TEMP_RESIDENCY_TIME</code> before <a href="/docs/gcode/M109.html"><code class="language-plaintext highlighter-rouge">M109</code></a> will return success and start the print. Tune what “stable” means using <code class="language-plaintext highlighter-rouge">TEMP_HYSTERESIS</code> and <code class="language-plaintext highlighter-rouge">TEMP_WINDOW</code>.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define TEMP_BED_RESIDENCY_TIME 10  // (seconds)
#define TEMP_BED_HYSTERESIS 3       // (degC) range of +/- temperatures considered "close" to the target one
#define TEMP_BED_WINDOW 1           // (degC) Window around target to start the residency timer x degC early.
</span></code></pre></div></div> <p>The bed must maintain a stable temperature for <code class="language-plaintext highlighter-rouge">TEMP_BED_RESIDENCY_TIME</code> before <a href="/docs/gcode/M109.html"><code class="language-plaintext highlighter-rouge">M109</code></a> will return success and start the print. Tune what “stable” means using <code class="language-plaintext highlighter-rouge">TEMP_BED_HYSTERESIS</code> and <code class="language-plaintext highlighter-rouge">TEMP_BED_WINDOW</code>.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define TEMP_CHAMBER_HYSTERESIS  3  // (°C) Temperature proximity considered "close enough" to the target
</span></code></pre></div></div> <p>Set how far from target the chamber can be and still be considered ok.</p> <h3 id="temperature-ranges">Temperature Ranges</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define HEATER_0_MINTEMP 5
#define HEATER_1_MINTEMP 5
#define HEATER_2_MINTEMP 5
#define HEATER_3_MINTEMP 5
#define HEATER_4_MINTEMP 5
#define BED_MINTEMP 5
</span></code></pre></div></div> <p>These parameters help prevent the printer from overheating and catching fire. Temperature sensors report abnormally low values when they fail or become disconnected. Set these to the lowest value (in degrees C) that the machine is likely to experience. Indoor temperatures range from 10C-40C, but a value of 0 might be appropriate for an unheated workshop.</p> <p>If any sensor goes below the minimum temperature set here, Marlin will <strong>shut down the printer</strong> with a “MINTEMP” error.</p> <div class="container-fluid"> <div class="row alert alert-primary custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-comment fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p><code class="language-plaintext highlighter-rouge">Err: MINTEMP</code>: This error means your thermistor has disconnected or become an open circuit. (Or the machine is just very cold.)</p> </div> </div> </div> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define HEATER_0_MAXTEMP 285
#define HEATER_1_MAXTEMP 275
#define HEATER_2_MAXTEMP 275
#define HEATER_3_MAXTEMP 275
#define HEATER_4_MAXTEMP 275
#define BED_MAXTEMP      130
</span></code></pre></div></div> <p>Maximum temperature for each temperature sensor. If Marlin reads a temperature above these values, it will immediately shut down for safety reasons. For the E3D V6 hotend, many use 285 as a maximum value.</p> <div class="container-fluid"> <div class="row alert alert-primary custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-comment fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p><code class="language-plaintext highlighter-rouge">Err: MAXTEMP</code>: This error usually means that the temperature sensor wires are shorted together. It may also indicate an issue with the heater MOSFET or relay that is causing it to stay on.</p> </div> </div> </div> <div class="container-fluid"> <div class="row alert alert-warning custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-exclamation-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>Remember that cold surfaces near hot surfaces can lead to <strong>condensation</strong>, which is NOT GOOD for electronics. Use blower fans to keep air moving and use a <a href="//www.dpcalc.org/">Dew Point Calculator</a> to check your local dew point.</p> </div> </div> </div> <hr> <h3 id="pid">PID</h3> <p>Marlin uses PID (Proportional, Integral, Derivative) control (<a href="//en.wikipedia.org/wiki/PID_controller">Wikipedia</a>) to stabilize the dynamic heating system for the hotends and bed. When PID values are set correctly, heaters reach their target temperatures faster, maintain temperature better, and experience less wear over time.</p> <p>Most vitally, correct PID settings will prevent excessive overshoot, which is a safety hazard. During PID calibration, use the highest target temperature you intend to use (where overshoots are more critical).</p> <p>See the <a href="//reprap.org/wiki/PID_Tuning">PID Tuning</a> topic on the RepRap wiki for detailed instructions on <a href="/docs/gcode/M303.html"><code class="language-plaintext highlighter-rouge">M303</code></a> auto-tuning. The PID settings should be tuned whenever changing a hotend, temperature sensor, heating element, board, power supply voltage (12/24V), or anything else related to the high-voltage circuitry.</p> <hr> <h4 id="hotend-pid-options">Hotend PID Options</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define PIDTEMP
#define BANG_MAX 255     // limits current to nozzle while in bang-bang mode; 255=full current
#define PID_MAX BANG_MAX // limits current to nozzle while PID is active (see PID_FUNCTIONAL_RANGE below); 255=full current
#define K1 0.95
</span></code></pre></div></div> <p>Disable <code class="language-plaintext highlighter-rouge">PIDTEMP</code> to run extruders in bang-bang mode. Bang-bang is a pure binary mode - the heater is either fully-on or fully-off for a long period. PID control uses higher frequency PWM and (in most cases) is superior for maintaining a stable temperature.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(PIDTEMP)
</span>  <span class="c1">//#define PID_EDIT_MENU</span>
  <span class="c1">//#define PID_AUTOTUNE_MENU</span>
  <span class="c1">//#define PID_PARAMS_PER_HOTEND</span>

  <span class="c1">//#define PID_DEBUG</span>
  <span class="c1">//#define PID_OPENLOOP 1</span>
  <span class="c1">//#define SLOW_PWM_HEATERS</span>
  <span class="cp">#define PID_FUNCTIONAL_RANGE 10
</span>
</code></pre></div></div> <p>Enable <code class="language-plaintext highlighter-rouge">PID_AUTOTUNE_MENU</code> to add an option on the LCD to run an Autotune cycle and automatically apply the result. Enable <code class="language-plaintext highlighter-rouge">PID_PARAMS_PER_HOTEND</code> if you have more than one extruder and they are different models.</p> <h4 id="pid-values--">PID Values <em class="fa fa-sticky-note" aria-hidden="true"></em> <em class="fa fa-desktop" aria-hidden="true"></em> </h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="cp">#if ENABLED(PID_PARAMS_PER_HOTEND)
</span>    <span class="c1">// Specify between 1 and HOTENDS values per array.</span>
    <span class="c1">// If fewer than EXTRUDER values are provided, the last element will be repeated.</span>
    <span class="cp">#define DEFAULT_Kp_LIST {  22.20,  22.20 }
</span>    <span class="cp">#define DEFAULT_Ki_LIST {   1.08,   1.08 }
</span>    <span class="cp">#define DEFAULT_Kd_LIST { 114.00, 114.00 }
</span>  <span class="cp">#else
</span>    <span class="cp">#define DEFAULT_Kp  22.20
</span>    <span class="cp">#define DEFAULT_Ki   1.08
</span>    <span class="cp">#define DEFAULT_Kd 114.00
</span>  <span class="cp">#endif
</span></code></pre></div></div> <p>Sample PID values are included for reference, but they won’t apply to most setups. The PID values you get from <a href="/docs/gcode/M303.html"><code class="language-plaintext highlighter-rouge">M303</code></a> may be very different, but will be better for your specific machine.</p> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p><a href="/docs/gcode/M301.html"><code class="language-plaintext highlighter-rouge">M301</code></a> can be used to set Hotend PID and is also accessible through the LCD. <a href="/docs/gcode/M304.html"><code class="language-plaintext highlighter-rouge">M304</code></a> can be used to set bed PID. <a href="/docs/gcode/M303.html"><code class="language-plaintext highlighter-rouge">M303</code></a> should be used to tune PID values before using any new hotend components.</p> </div> </div> </div> <hr> <h4 id="bed-pid-options">Bed PID Options</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PIDTEMPBED</span>
</code></pre></div></div> <p>Enable <code class="language-plaintext highlighter-rouge">PIDTEMPBED</code> to use PID for the bed heater (at the same PWM frequency as the extruders). With the default PID_dT the PWM frequency is 7.689 Hz, fine for driving a square wave into a resistive load without significant impact on FET heating. This also works fine on a Fotek SSR-10DA Solid State Relay into a 250 W heater. If your configuration is significantly different than this and you don’t understand the issues involved, you probably shouldn’t use bed PID until it’s verified that your hardware works. Use <code class="language-plaintext highlighter-rouge">M303 E-1</code> to tune the bed PID for this option.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define BED_LIMIT_SWITCHING</span>
</code></pre></div></div> <p>Enable <code class="language-plaintext highlighter-rouge">BED_LIMIT_SWITCHING</code></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define MAX_BED_POWER 255
</span></code></pre></div></div> <p>The max power delivered to the bed. All forms of bed control obey this (PID, bang-bang, bang-bang with hysteresis). Setting this to anything other than 255 enables a form of PWM. As with <code class="language-plaintext highlighter-rouge">PIDTEMPBED</code>, don’t enable this unless your bed hardware is ok with PWM.</p> <h4 id="bed-pid-values--">Bed PID Values <em class="fa fa-sticky-note" aria-hidden="true"></em> <em class="fa fa-desktop" aria-hidden="true"></em> </h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(PIDTEMPBED)
</span>
  <span class="c1">//#define PID_BED_DEBUG // Sends debug data to the serial port.</span>

  <span class="c1">// 120V 250W silicone heater into 4mm borosilicate (MendelMax 1.5+)</span>
  <span class="c1">// from FOPDT model - kp=.39 Tp=405 Tdead=66, Tc set to 79.2, aggressive factor of .15 (vs .1, 1, 10)</span>
  <span class="cp">#define  DEFAULT_bedKp 10.00
</span>  <span class="cp">#define  DEFAULT_bedKi .023
</span>  <span class="cp">#define  DEFAULT_bedKd 305.4
</span>
  <span class="c1">// 120V 250W silicone heater into 4mm borosilicate (MendelMax 1.5+)</span>
  <span class="c1">// from pidautotune</span>
  <span class="c1">//#define  DEFAULT_bedKp 97.1</span>
  <span class="c1">//#define  DEFAULT_bedKi 1.41</span>
  <span class="c1">//#define  DEFAULT_bedKd 1675.16</span>

  <span class="c1">// FIND YOUR OWN: "M303 E-1 C8 S90" to run autotune on the bed at 90 degreesC for 8 cycles.</span>
<span class="cp">#endif // PIDTEMPBED
</span></code></pre></div></div> <p>Sample Bed PID values are included for reference, but use the result from <a href="/docs/gcode/M303.html"><code class="language-plaintext highlighter-rouge">M303 E-1</code></a> for your specific machine.</p> <p><img src="/assets/images/config/safety.gif" alt="Safety" class="floater"></p> <h3 id="safety">Safety</h3> <h4 id="prevent-cold-extrusion-">Prevent Cold Extrusion <em class="fa fa-sticky-note" aria-hidden="true"></em> </h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define PREVENT_COLD_EXTRUSION
#define EXTRUDE_MINTEMP 170
</span></code></pre></div></div> <p>So-called “cold extrusion” can damage a machine in several ways, but it usually just results in gouged filament and a jammed extruder. With this option, the extruder motor won’t move if the hotend is below the specified temperature. Override this setting with <a href="/docs/gcode/M302.html"><code class="language-plaintext highlighter-rouge">M302</code></a> if needed.</p> <h4 id="prevent-lengthy-extrude">Prevent Lengthy Extrude</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define PREVENT_LENGTHY_EXTRUDE
#define EXTRUDE_MAXLENGTH 200
</span></code></pre></div></div> <p>A lengthy extrusion may not damage your machine, but it can be an awful waste of filament. This feature is meant to prevent a typo or glitch in a <a href="/docs/gcode/G000-G001.html"><code class="language-plaintext highlighter-rouge">G1</code></a> command from extruding some enormous amount of filament. For Bowden setups, the max length should be set greater than or equal to the load/eject length.</p> <h4 id="thermal-protection">Thermal Protection</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define THERMAL_PROTECTION_HOTENDS // Enable thermal protection for all extruders
#define THERMAL_PROTECTION_BED     // Enable thermal protection for the heated bed
#define THERMAL_PROTECTION_CHAMBER // Enable thermal protection for the heated chamber
</span></code></pre></div></div> <p>Thermal protection is one of the most vital safety features in Marlin, allowing the firmware to catch a bad situation and shut down heaters before it goes too far. Consider what happens when a thermistor comes loose during printing. The firmware sees a low temperature reading so it keeps the heat on. As long as the temperature reading is low, the hotend will continue to heat up indefinitely, leading to smoke, oozing, a ruined print, and possibly even fire.</p> <p>Marlin offers two levels of thermal protection:</p> <ol> <li>Check that the temperature is actually increasing when a heater is on. If the temperature fails to rise enough within a certain time period (by default, 2 degrees in 20 seconds), the machine will shut down with a “<code class="language-plaintext highlighter-rouge">Heating failed</code>” error. This will detect a disconnected, loose, or misconfigured thermistor, or a disconnected heater.</li> <li>Monitor thermal stability. If the measured temperature drifts too far from the target temperature for too long, the machine will shut down with a “<code class="language-plaintext highlighter-rouge">Thermal runaway</code>” error. This error may indicate poor contact between thermistor and hot end, poor PID tuning, or a cold environment.</li> </ol> <p>More thermal protection options are located in <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code>. In most setups these can be left unchanged, but should be tuned as needed to prevent false positives.</p> <div class="panel panel-info"> <div class="panel-heading"><h4 class="panel-title"> <i class="fa fa-info-circle pull-left" aria-hidden="true"></i>Information</h4></div> <div class="panel-body"> <p> </p> <p>For false thermal runaways <em>not</em> caused by a loose temperature sensor, try increasing <code class="language-plaintext highlighter-rouge">WATCH_TEMP_PERIOD</code> or decreasing <code class="language-plaintext highlighter-rouge">WATCH_TEMP_INCREASE</code>. Heating may be slowed in a cold environment, if a fan is blowing on the heat block, or if the heater has high resistance.</p> </div> </div> <p><img src="/assets/images/config/kinematics.jpg" alt="Kinematics" class="floater"></p> <h2 id="kinematics">Kinematics</h2> <p>Marlin supports four kinematic motion systems: Cartesian, Core (H-Bot), Delta, and SCARA. Cartesian is the simplest, applying each stepper directly to an axis. CoreXY uses a special belt arrangement to do XY motion, requiring a little extra maths. Delta robots convert the motion of three vertical carriages into XYZ motion in an “effector” attached to the carriages by six arms. SCARA robots move an arm in the XY plane using two angular joints.</p> <h3 id="corexy">CoreXY</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define COREXY</span>
<span class="c1">//#define COREXZ</span>
<span class="c1">//#define COREYZ</span>
<span class="c1">//#define COREYX</span>
<span class="c1">//#define COREZX</span>
<span class="c1">//#define COREZY</span>
</code></pre></div></div> <p>Enable the option that applies to the specific Core setup. Both normal and reversed options are included for completeness.</p> <p><img src="/assets/images/config/endstop.jpg" alt="Endstop switch" class="floater"></p> <h2 id="endstops">Endstops</h2> <p>In open loop systems, endstops are an inexpensive way to establish the actual position of the carriage on all axes. In the procedure known as “homing,” each axis is moved towards one end until the endstop switch is triggered, at which point the machine knows that the axis is at the endstop (home) position. From this point on, the machine “knows” its position by keeping track of how far the steppers have been moved. If the machine gets out of step for any reason, re-homing may be required.</p> <h3 id="endstop-plugs">Endstop Plugs</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define USE_XMIN_PLUG
#define USE_YMIN_PLUG
#define USE_ZMIN_PLUG
</span><span class="c1">//#define USE_XMAX_PLUG</span>
<span class="c1">//#define USE_YMAX_PLUG</span>
<span class="c1">//#define USE_ZMAX_PLUG</span>
</code></pre></div></div> <p>Specify all the endstop connectors that are connected to any endstop or probe. Most printers will use all three min plugs. On delta machines, all the max plugs should be used. Probes can share the Z min plug, or can use one or more of the extra connectors. Don’t enable plugs used for non-endstop and non-probe purposes here.</p> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p><code class="language-plaintext highlighter-rouge">SENSORLESS_HOMING</code> will still need endstop connectors declared.</p> </div> </div> </div> <h3 id="endstop-pullups">Endstop Pullups</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define ENDSTOPPULLUPS
</span>
<span class="cp">#if DISABLED(ENDSTOPPULLUPS)
</span>  <span class="c1">// Disable ENDSTOPPULLUPS to set pullups individually</span>
  <span class="c1">//#define ENDSTOPPULLUP_XMAX</span>
  <span class="c1">//#define ENDSTOPPULLUP_YMAX</span>
  <span class="c1">//#define ENDSTOPPULLUP_ZMAX</span>
  <span class="c1">//#define ENDSTOPPULLUP_XMIN</span>
  <span class="c1">//#define ENDSTOPPULLUP_YMIN</span>
  <span class="c1">//#define ENDSTOPPULLUP_ZMIN</span>
  <span class="c1">//#define ENDSTOPPULLUP_ZMIN_PROBE</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>By default all endstops have pullup resistors enabled. This is best for NC switches, preventing the values from “floating.” If only some endstops should have pullup resistors, you can disable <code class="language-plaintext highlighter-rouge">ENDSTOPPULLUPS</code> and enable pullups individually.</p> <h3 id="endstop-pulldowns">Endstop Pulldowns</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define ENDSTOPPULLDOWNS</span>

<span class="cp">#if DISABLED(ENDSTOPPULLDOWNS)
</span>  <span class="c1">// Disable ENDSTOPPULLDOWNS to set pulldowns individually</span>
  <span class="c1">//#define ENDSTOPPULLDOWN_XMAX</span>
  <span class="c1">//#define ENDSTOPPULLDOWN_YMAX</span>
  <span class="c1">//#define ENDSTOPPULLDOWN_ZMAX</span>
  <span class="c1">//#define ENDSTOPPULLDOWN_XMIN</span>
  <span class="c1">//#define ENDSTOPPULLDOWN_YMIN</span>
  <span class="c1">//#define ENDSTOPPULLDOWN_ZMIN</span>
  <span class="c1">//#define ENDSTOPPULLDOWN_ZMIN_PROBE</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>By default all endstops have pulldown resistors disabled.</p> <h3 id="endstop-hit-state">Endstop Hit State</h3> <p>Use these options to set to the state (HIGH or LOW) that applies to each endstop and the Z probe, if enabled.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define X_MIN_ENDSTOP_HIT_STATE HIGH
#define X_MAX_ENDSTOP_HIT_STATE HIGH
#define Y_MIN_ENDSTOP_HIT_STATE HIGH
#define Y_MAX_ENDSTOP_HIT_STATE HIGH
#define Z_MIN_ENDSTOP_HIT_STATE HIGH
#define Z_MAX_ENDSTOP_HIT_STATE HIGH
#define Z_MIN_PROBE_ENDSTOP_HIT_STATE HIGH
</span></code></pre></div></div> <p>You can use <a href="/docs/gcode/M119.html"><code class="language-plaintext highlighter-rouge">M119</code></a> to test if these are set correctly. If an endstop shows up as “TRIGGERED” when not pressed, and “open” when pressed, then it should be inverted here.</p> <h3 id="stepper-drivers">Stepper Drivers</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define X_DRIVER_TYPE  A4988</span>
<span class="c1">//#define Y_DRIVER_TYPE  A4988</span>
<span class="c1">//#define Z_DRIVER_TYPE  A4988</span>
<span class="c1">//#define X2_DRIVER_TYPE A4988</span>
<span class="c1">//#define Y2_DRIVER_TYPE A4988</span>
<span class="c1">//#define Z2_DRIVER_TYPE A4988</span>
<span class="c1">//#define Z3_DRIVER_TYPE A4988</span>
<span class="c1">//#define E0_DRIVER_TYPE A4988</span>
<span class="c1">//#define E1_DRIVER_TYPE A4988</span>
<span class="c1">//#define E2_DRIVER_TYPE A4988</span>
<span class="c1">//#define E3_DRIVER_TYPE A4988</span>
<span class="c1">//#define E4_DRIVER_TYPE A4988</span>
<span class="c1">//#define E5_DRIVER_TYPE A4988</span>
</code></pre></div></div> <p>These settings allow Marlin to tune stepper driver timing and enable advanced options for stepper drivers that support them. You may also override timing options in Configuration_adv.h.</p> <h3 id="endstop-interrupts">Endstop Interrupts</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define ENDSTOP_INTERRUPTS_FEATURE</span>
</code></pre></div></div> <p>Enable this feature if all enabled endstop pins are interrupt-capable. This will remove the need to poll the interrupt pins, saving many CPU cycles.</p> <h3 id="endstop-noise-threshold">Endstop Noise Threshold</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define ENDSTOP_NOISE_FEATURE</span>
</code></pre></div></div> <p>Enable if your probe or endstops falsely trigger due to noise.</p> <p><img src="/assets/images/config/movement.png" alt="Movement" class="floater"></p> <h2 id="movement">Movement</h2> <h3 id="distinct-e-factors">Distinct E Factors</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define DISTINCT_E_FACTORS</span>
</code></pre></div></div> <p>Enable <code class="language-plaintext highlighter-rouge">DISTINCT_E_FACTORS</code> if your extruders are not all mechanically identical. With this setting you can optionally specify different steps-per-mm, max feedrate, and max acceleration for each extruder.</p> <h3 id="default-steps-per-mm--">Default Steps per mm <em class="fa fa-sticky-note" aria-hidden="true"></em> <em class="fa fa-desktop" aria-hidden="true"></em> </h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define DEFAULT_AXIS_STEPS_PER_UNIT   { 80, 80, 4000, 500 }
</span></code></pre></div></div> <p>These are the most crucial settings for your printer, as they determine how accurately the steppers will position the axes. Here we’re telling the firmware how many individual steps produce a single millimeter (or degree on SCARA) of movement. These depend on various factors, including belt pitch, number of teeth on the pulley, thread pitch on leadscrews, micro-stepping settings, and extruder style.</p> <p>Override with <a href="/docs/gcode/M092.html"><code class="language-plaintext highlighter-rouge">M92</code></a>.</p> <div class="panel panel-info"> <div class="panel-heading"><h4 class="panel-title"> <i class="fa fa-info-circle pull-left" aria-hidden="true"></i>Step Calculator</h4></div> <div class="panel-body"> <p> </p> <p>The <a href="//prusaprinters.org/calculator/">Průša Calculator</a> is a great tool to help find the right values for your specific printer configuration.</p> </div> </div> <h4 id="default-max-feed-rate--">Default Max Feed Rate <em class="fa fa-sticky-note" aria-hidden="true"></em> <em class="fa fa-desktop" aria-hidden="true"></em> </h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define DEFAULT_MAX_FEEDRATE { 500, 500, 2.25, 45 }
</span></code></pre></div></div> <p>In any move, the velocities (in mm/sec) in the X, Y, Z, and E directions will be limited to the corresponding <code class="language-plaintext highlighter-rouge">DEFAULT_MAX_FEEDRATE</code>.</p> <p>Override with <a href="/docs/gcode/M203.html"><code class="language-plaintext highlighter-rouge">M203</code></a>.</p> <div class="container-fluid"> <div class="row alert alert-danger custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-exclamation-triangle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>Setting these too high will cause the corresponding stepper motor to lose steps, especially on high speed movements.</p> </div> </div> </div> <h3 id="acceleration">Acceleration</h3> <h4 id="default-max-acceleration--">Default Max Acceleration <em class="fa fa-sticky-note" aria-hidden="true"></em> <em class="fa fa-desktop" aria-hidden="true"></em> </h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define DEFAULT_MAX_ACCELERATION      { 3000, 3000, 100, 10000 }
</span></code></pre></div></div> <p>When the velocity of any axis changes, its acceleration (or deceleration) in mm/s/s is limited by the current max acceleration setting. Also see the <em>jerk</em> settings below, which specify the largest instant speed change that can occur between segments.</p> <p>A value of 3000 means that an axis may accelerate by 100mm/s within 1/30th of a second, or up to 3000mm/s (180000mm/m) in a full second.</p> <p>Jerk sets the floor for accelerated moves. If the change in top speed for a given axis between segments is less than the jerk value for the axis, an instantaneous change in speed may be allowed. Limits placed on other axes also apply. Basically, lower jerk values result in more accelerated moves, which may be near-instantaneous in some cases, depending on the final acceleration determined by the planner.</p> <p>Override with <a href="/docs/gcode/M201.html"><code class="language-plaintext highlighter-rouge">M201</code></a>.</p> <h4 id="default-acceleration--">Default Acceleration <em class="fa fa-sticky-note" aria-hidden="true"></em> <em class="fa fa-desktop" aria-hidden="true"></em> </h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define DEFAULT_ACCELERATION          3000    // X, Y, Z and E acceleration for printing moves
#define DEFAULT_RETRACT_ACCELERATION  3000    // E acceleration for retracts
#define DEFAULT_TRAVEL_ACCELERATION   3000    // X, Y, Z acceleration for travel (non printing) moves
</span></code></pre></div></div> <p>The planner uses the default accelerations set here (or by <a href="/docs/gcode/M204.html"><code class="language-plaintext highlighter-rouge">M204</code></a>) as the starting values for movement acceleration, and then constrains them further, if needed. There are separate default acceleration values for printing moves, retraction moves, and travel moves.</p> <ul> <li>Printing moves include E plus at least one of the XYZ axes.</li> <li>Retraction moves include only the E axis.</li> <li>Travel moves include only the XYZ axes.</li> </ul> <p>In print/travel moves, <code class="language-plaintext highlighter-rouge">DEFAULT_ACCELERATION</code> and <code class="language-plaintext highlighter-rouge">DEFAULT_TRAVEL_ACCELERATION</code> apply to the XYZ axes. In retraction moves, <code class="language-plaintext highlighter-rouge">DEFAULT_RETRACT_ACCELERATION</code> applies only to the <em>E</em>-axis. During movement planning, Marlin constrains the default accelerations to the maximum acceleration of all axes involved in the move.</p> <p>Override with <a href="/docs/gcode/M204.html"><code class="language-plaintext highlighter-rouge">M204</code></a>.</p> <div class="container-fluid"> <div class="row alert alert-danger custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-exclamation-triangle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>Don’t set these too high. Larger acceleration values can lead to excessive vibration, noisy steppers, or even skipped steps. Lower acceleration produces smoother motion, eliminates vibration, and helps reduce wear on mechanical parts.</p> </div> </div> </div> <hr> <h4 id="jerk--">Jerk <em class="fa fa-sticky-note" aria-hidden="true"></em> <em class="fa fa-desktop" aria-hidden="true"></em> </h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define CLASSIC_JERK</span>
<span class="cp">#if ENABLED(CLASSIC_JERK)
</span>  <span class="cp">#define DEFAULT_XJERK 10.0
</span>  <span class="cp">#define DEFAULT_YJERK 10.0
</span>  <span class="cp">#define DEFAULT_ZJERK  0.3
</span>
  <span class="c1">//#define TRAVEL_EXTRA_XYJERK 0.0     // Additional jerk allowance for all travel moves</span>

  <span class="c1">//#define LIMITED_JERK_EDITING        // Limit edit via M205 or LCD to DEFAULT_aJERK * 2</span>
  <span class="cp">#if ENABLED(LIMITED_JERK_EDITING)
</span>    <span class="cp">#define MAX_JERK_EDIT_VALUES { 20, 20, 0.6, 10 } // ...or, set your own edit limits
</span>  <span class="cp">#endif
#endif
</span>
<span class="cp">#define DEFAULT_EJERK    5.0  // May be used by Linear Advance
</span></code></pre></div></div> <div class="panel panel-info"> <div class="panel-heading"><h4 class="panel-title"> <i class="fa fa-info-circle pull-left" aria-hidden="true"></i>Configuration Update</h4></div> <div class="panel-body"> <p> </p> <p>Junction Deviation is now the default mode. Enabling <code class="language-plaintext highlighter-rouge">CLASSIC JERK</code> will override it.</p> </div> </div> <p>Jerk works in conjunction with acceleration (see above). Jerk is the maximum change in velocity (in mm/sec) that can occur instantaneously. It can also be thought of as the minimum change in velocity that will be done as an accelerated (not instantaneous) move.</p> <p>Both acceleration and jerk affect your print quality. If jerk is too low, the extruder will linger too long on small segments and corners, possibly leaving blobs. If the jerk is set too high, direction changes will apply too much torque and you may see “ringing” artifacts or dropped steps.</p> <p>Override with <a href="/docs/gcode/M205.html"><code class="language-plaintext highlighter-rouge">M205</code></a>.</p> <h4 id="junction-deviation--">Junction Deviation <em class="fa fa-sticky-note" aria-hidden="true"></em> <em class="fa fa-desktop" aria-hidden="true"></em> </h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if DISABLED(CLASSIC_JERK)
</span>  <span class="cp">#define JUNCTION_DEVIATION_MM 0.013 // (mm) Distance from real junction edge
#endif
</span></code></pre></div></div> <p>Junction Deviation determins the cornering speed. The smaller the value the slower the cornering speed will be.</p> <p><img src="//latex.codecogs.com/gif.latex?d=0.4\frac{Jerk^{2}}{Accel_{printing}}" alt="Junction Deviation formula"></p> <p>Use the above formula to calculate the Junction Deviation amount.</p> <p>See the following sources for detailed explanations of Junction Deviation:</p> <ul> <li><a href="//reprap.org/forum/read.php?1,739819">JD Explained and Visualized, by Paul Wanamaker</a></li> <li><a href="//blog.kyneticcnc.com/2018/10/computing-junction-deviation-for-marlin.html">Computing JD for Marlin Firmware</a></li> <li><a href="//onehossshay.wordpress.com/2011/09/24/improving_grbl_cornering_algorithm/">Improving GRBL: Cornering Algorithm</a></li> </ul> <h4 id="s-curve-acceleration--">S-Curve Acceleration <em class="fa fa-sticky-note" aria-hidden="true"></em> <em class="fa fa-desktop" aria-hidden="true"></em> </h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define S_CURVE_ACCELERATION</span>
</code></pre></div></div> <p>This option eliminates vibration during printing by fitting a Bézier curve to move acceleration, producing much smoother direction changes.</p> <h2 id="z-probe-options">Z Probe Options</h2> <h3 id="probe-pins">Probe Pins</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define Z_MIN_PROBE_USES_Z_MIN_ENDSTOP_PIN
</span></code></pre></div></div> <p>Use this option in all cases when the probe is connected to the Z MIN endstop plug. This option is used for <code class="language-plaintext highlighter-rouge">DELTA</code> robots, which always home to MAX, and may be used in other setups.</p> <p>You can use this option to configure a machine with no Z endstops. In that case the probe will be used to home Z and you will need to enable <code class="language-plaintext highlighter-rouge">Z_SAFE_HOMING</code> to ensure that the probe is positioned over the bed when homing the Z axis - done after X and Y.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define Z_MIN_PROBE_PIN 32</span>
</code></pre></div></div> <p>With <code class="language-plaintext highlighter-rouge">Z_MIN_PROBE_USES_Z_MIN_ENDSTOP_PIN</code> enabled, by default Marlin will use the <code class="language-plaintext highlighter-rouge">Z_MIN_PROBE_PIN</code> specified in your board’s pins file (usually the X or Z MAX endstop pin since these are the most likely to be unused). If you need to use a different pin, define it here in <code class="language-plaintext highlighter-rouge">Configuration.h</code>.</p> <h3 id="probe-type">Probe Type</h3> <p>Marlin supports any kind of probe that can be made to work like a switch. Specific types of probes have different needs.</p> <h4 id="manual-probe-no-probe">Manual Probe (no probe)</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PROBE_MANUALLY</span>
<span class="c1">//#define MANUAL_PROBE_START_Z 0.2</span>
</code></pre></div></div> <p>Even if you have no bed probe you can still use any of the core <code class="language-plaintext highlighter-rouge">AUTO_BED_LEVELING_*</code> options below by selecting this option. With <code class="language-plaintext highlighter-rouge">PROBE_MANUALLY</code> the <a href="/docs/gcode/G029-mbl.html"><code class="language-plaintext highlighter-rouge">G29</code></a> command only moves the nozzle to the next probe point where it pauses. You adjust the Z height with a piece of paper or feeler gauge, then send <a href="/docs/gcode/G029-mbl.html"><code class="language-plaintext highlighter-rouge">G29</code></a> again to continue to the next point. You can also enable <code class="language-plaintext highlighter-rouge">LCD_BED_LEVELING</code> to add a “Level Bed” Menu item to the LCD for a fully interactive leveling process. <code class="language-plaintext highlighter-rouge">MANUAL_PROBE_START_Z</code> sets the Z-height the printer initially moves to at each mesh point during manual probing. With this disabled, the printer will move to Z0 for the first probe point. Then each consecutive probe point uses the Z position of the probe point preceding it.</p> <h4 id="fix-mounted-probe">Fix Mounted Probe</h4> <p><img src="/assets/images/config/fixed_probe_EZABL.png" alt="Fixed Probe - EZABL" class="floater framed"></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define FIX_MOUNTED_PROBE</span>
</code></pre></div></div> <p>This option is for any probe that’s fixed in place, with no need to be deployed or stowed. Specify this type for an inductive probe or when using the nozzle itself as the probe.</p> <h4 id="servo-z-probe">Servo Z Probe</h4> <p><img src="/assets/images/config/probe.png" alt="Probe" class="floater framed"></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define Z_PROBE_SERVO_NR 0       // Defaults to SERVO 0 connector.</span>
<span class="c1">//#define Z_SERVO_ANGLES { 70, 0 } // Z Servo Deploy and Stow angles</span>
</code></pre></div></div> <p>To indicate a Servo Z Probe (<em>e.g.,</em> an endstop switch mounted on a rotating arm) just specify the servo index. Use the <a href="/docs/gcode/M280.html"><code class="language-plaintext highlighter-rouge">M280</code></a> command to find the best <code class="language-plaintext highlighter-rouge">Z_SERVO_ANGLES</code> values.</p> <h4 id="bltouch">BLTouch</h4> <p><img src="/assets/images/config/BLTouch.png" alt="BLTouch" class="floater framed"></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define BLTOUCH</span>
</code></pre></div></div> <p>The <a href="//plus.google.com/113792662927481823969">ANTCLABS BLTouch</a> probe uses custom circuitry and a magnet to raise and lower a metal pin which acts as a touch probe. The BLTouch uses the servo connector and is controlled using specific servo angles. With this option enabled the other required settings are automatically configured (so there’s no need to enter servo angles, for example).</p> <h4 id="touch-mi-probe">TOUCH MI PROBE</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define TOUCH_MI_PROBE</span>
<span class="cp">#if ENABLED(TOUCH_MI_PROBE)
</span>  <span class="cp">#define TOUCH_MI_RETRACT_Z 0.5                  // Height at which the probe retracts
</span>  <span class="c1">//#define TOUCH_MI_DEPLOY_XPOS (X_MAX_BED + 2)  // For a magnet on the right side of the bed</span>
  <span class="c1">//#define TOUCH_MI_MANUAL_DEPLOY                // For manual deploy (LCD menu)</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Touch-MI Probe by hotends.fr is deployed and activated by moving the X-axis to a magnet at the edge of the bed. By default, the magnet is assumed to be on the left and activated by a home. If the magnet is on the right, enable and set TOUCH_MI_DEPLOY_XPOS to the deploy position. Also option requires: <code class="language-plaintext highlighter-rouge">BABYSTEPPING</code>, <code class="language-plaintext highlighter-rouge">BABYSTEP_ZPROBE_OFFSET</code>, <code class="language-plaintext highlighter-rouge">Z_SAFE_HOMING</code>, and a minimum <code class="language-plaintext highlighter-rouge">Z_HOMING_HEIGHT</code> of 10.</p> <h4 id="solenoid-probe">Solenoid Probe</h4> <p><img src="/assets/images/config/solenoid.png" alt="Solenoid probe" class="floater framed"></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SOLENOID_PROBE</span>
</code></pre></div></div> <p>A probe that is deployed and stowed with a solenoid pin (Defined as <code class="language-plaintext highlighter-rouge">SOL1_PIN</code>.)</p> <h4 id="z-probe-sled">Z Probe Sled</h4> <p><img src="/assets/images/config/zprobe_sled.png" alt="Z-Probe Sled" class="floater framed"></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define Z_PROBE_SLED</span>
<span class="c1">//#define SLED_DOCKING_OFFSET 5</span>
</code></pre></div></div> <p>This type of probe is mounted on a detachable “sled” that sits at the far end of the X axis. Before probing, the X carriage moves to the far end and picks up the sled. When probing is completed, it drops the sled off. The <code class="language-plaintext highlighter-rouge">SLED_DOCKING_OFFSET</code> specifies the extra distance the X axis must travel to pickup the sled. 0 should be fine but it may be pushed further if needed.</p> <h4 id="rack-and-pinion-probe">Rack-and-pinion probe</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define RACK_AND_PINION_PROBE</span>
<span class="cp">#if ENABLED(RACK_AND_PINION_PROBE)
</span>  <span class="cp">#define Z_PROBE_DEPLOY_X  X_MIN_POS
</span>  <span class="cp">#define Z_PROBE_RETRACT_X X_MAX_POS
#endif
</span></code></pre></div></div> <p>A probe deployed by moving the X-axis (<em>e.g.,</em> Wilson II’s rack-and-pinion probe designed by Marty Rice.)</p> <h4 id="allen-key">Allen Key</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define Z_PROBE_ALLEN_KEY</span>
</code></pre></div></div> <p>A retractable Z-probe for deltas that uses an Allen key as the probe. See “<a href="//reprap.org/wiki/Kossel#Automatic_bed_leveling_probe">Kossel automatic bed leveling probe</a>” at the RepRap wiki. It deploys by leveraging against the Z-axis belt, and retracts by pushing the probe down.</p> <p>More information will be included in an upcoming Delta configuration page.</p> <h3 id="probe-offsets--">Probe Offsets <em class="fa fa-sticky-note" aria-hidden="true"></em> <em class="fa fa-desktop" aria-hidden="true"></em> </h3> <p>These offsets specify the distance from the tip of the nozzle to the probe — or more precisely, to the point at which the probe triggers. The X and Y offsets are specified as integers. The Z offset should be specified as exactly as possible using a decimal value. The Z offset can be overridden with <code class="language-plaintext highlighter-rouge">M851 Z</code> or the LCD controller. The <a href="/docs/gcode/M851.html"><code class="language-plaintext highlighter-rouge">M851</code></a> offset is saved to EEPROM with <a href="/docs/gcode/M500.html"><code class="language-plaintext highlighter-rouge">M500</code></a>.</p> <h3 id="distance-from-edge">Distance from edge</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define X_PROBE_OFFSET_FROM_EXTRUDER 10  // X offset: -left  +right  [of the nozzle]
#define Y_PROBE_OFFSET_FROM_EXTRUDER 10  // Y offset: -front +behind [the nozzle]
#define Z_PROBE_OFFSET_FROM_EXTRUDER 0   // Z offset: -below +above  [the nozzle]
</span>
<span class="cp">#define PROBING_MARGIN 10
</span></code></pre></div></div> <p>Certain types of probe need to stay away from the edge</p> <h3 id="probing-speed">Probing Speed</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// X and Y axis travel speed (mm/m) between probes</span>
<span class="cp">#define XY_PROBE_SPEED 8000
</span>
<span class="c1">// Feedrate (mm/m) for the first approach when double-probing (MULTIPLE_PROBING == 2)</span>
<span class="cp">#define Z_PROBE_SPEED_FAST HOMING_FEEDRATE_Z
</span>
<span class="c1">// Feedrate (mm/m) for the "accurate" probe of each point</span>
<span class="cp">#define Z_PROBE_SPEED_SLOW (Z_PROBE_SPEED_FAST / 2)
</span></code></pre></div></div> <p>Probing should be done quickly, but the Z speed should be tuned for best repeatability. Depending on the probe, a slower Z probing speed may be needed for repeatable results.</p> <h3 id="multiple-probes">Multiple Probes</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MULTIPLE_PROBING 2</span>
<span class="c1">//#define EXTRA_PROBING    1</span>
</code></pre></div></div> <p>Probing multiple times yields better results. Set to 2 for a fast/slow probe - the second probe result will be used. Set to 3 or more for slow probes - the average result will be used.</p> <h3 id="probe-clearance">Probe Clearance</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define Z_CLEARANCE_DEPLOY_PROBE   10 // Z Clearance for Deploy/Stow
#define Z_CLEARANCE_BETWEEN_PROBES  5 // Z Clearance between probe points
#define Z_CLEARANCE_MULTI_PROBE     5 // Z Clearance between multiple probes
</span><span class="c1">//#define Z_AFTER_PROBING           5 // Z position after probing is done</span>

<span class="cp">#define Z_PROBE_LOW_POINT          -2 // Farthest distance below the trigger-point to go before stopping
</span></code></pre></div></div> <p>Z probes require clearance when deploying, stowing, and moving between probe points to avoid hitting the bed and other hardware. Servo-mounted probes require extra space for the arm to rotate. Inductive probes need space to keep from triggering early.</p> <p>Use these settings to specify the distance (mm) to raise the probe (or lower the bed). The values set here apply over and above any (negative) probe Z Offset set with <code class="language-plaintext highlighter-rouge">Z_PROBE_OFFSET_FROM_EXTRUDER</code>, <a href="/docs/gcode/M204.html"><code class="language-plaintext highlighter-rouge">M851</code></a>, or the LCD. Only integer values &gt;= 1 are valid for these settings.</p> <ul> <li> <em>Example</em>: <code class="language-plaintext highlighter-rouge">M851 Z-5</code> with a CLEARANCE of 4 =&gt; 9 mm from bed to nozzle.</li> <li> <em>But</em>: <code class="language-plaintext highlighter-rouge">M851 Z+1</code> with a CLEARANCE of 2 =&gt; 2 mm from bed to nozzle.</li> </ul> <div class="panel panel-warning"> <div class="panel-heading"><h4 class="panel-title"> <i class="fa fa-exclamation-circle pull-left" aria-hidden="true"></i>G29 Movement</h4></div> <div class="panel-body"> <p> </p> <p>Make sure you have enough clearance for the probe to move between points!</p> </div> </div> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define Z_PROBE_OFFSET_RANGE_MIN -20
#define Z_PROBE_OFFSET_RANGE_MAX 20
</span></code></pre></div></div> <p>For <a href="/docs/gcode/M851.html"><code class="language-plaintext highlighter-rouge">M851</code></a> and LCD menus give a range for adjusting the Z probe offset.</p> <h3 id="probe-testing">Probe Testing</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define Z_MIN_PROBE_REPEATABILITY_TEST
</span></code></pre></div></div> <p>This enables you to test the reliability of your probe. Issue a <a href="/docs/gcode/M048.html"><code class="language-plaintext highlighter-rouge">M48</code></a> command to start testing. It will give you a standard deviation for the probe. Tip: 0.02mm is normally acceptable for bed leveling to work.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Before deploy/stow pause for user confirmation</span>
<span class="c1">//#define PAUSE_BEFORE_DEPLOY_STOW</span>
<span class="cp">#if ENABLED(PAUSE_BEFORE_DEPLOY_STOW)
</span>  <span class="c1">//#define PAUSE_PROBE_DEPLOY_WHEN_TRIGGERED // For Manual Deploy Allenkey Probe</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Before deploy/stow pause for user confirmation</p> <h3 id="probe-with-heaters-off">Probe with heaters off</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PROBING_HEATERS_OFF       // Turn heaters off when probing</span>
<span class="cp">#if ENABLED(PROBING_HEATERS_OFF)
</span>  <span class="c1">//#define WAIT_FOR_BED_HEATER     // Wait for bed to heat back up between probes (to improve accuracy)</span>
<span class="cp">#endif
</span><span class="c1">//#define PROBING_FANS_OFF          // Turn fans off when probing</span>
<span class="c1">//#define PROBING_STEPPERS_OFF      // Turn steppers off (unless needed to hold position) when probing</span>
<span class="c1">//#define DELAY_BEFORE_PROBING 200  // (ms) To prevent vibrations from triggering piezo sensors</span>
</code></pre></div></div> <p>Heatinging the bed and extruder for probing will produce results that more accurately correspond with your bed if you typically print with the bed heated. Enable <code class="language-plaintext highlighter-rouge">PROBING_HEATERS_OFF</code> if you are experiencing electrical noise. A delay can also be added to allow noise and vibration to settle.</p> <p><img src="/assets/images/config/motor-dir.jpg" alt="Stepper Spin" class="floater"></p> <h2 id="stepper-drivers-1">Stepper Drivers</h2> <h3 id="motor-enable">Motor Enable</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define X_ENABLE_ON 0
#define Y_ENABLE_ON 0
#define Z_ENABLE_ON 0
#define E_ENABLE_ON 0 // For all extruders
</span></code></pre></div></div> <p>These options set the pin states used for stepper enable. The most common setting is 0 (<code class="language-plaintext highlighter-rouge">LOW</code>) for Active Low. For Active High use 1 or <code class="language-plaintext highlighter-rouge">HIGH</code>.</p> <h3 id="motor-disable">Motor Disable</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define DISABLE_X false
#define DISABLE_Y false
#define DISABLE_Z false
</span></code></pre></div></div> <p>Use these options to disable steppers when not being issued a movement. This was implemented as a hack to run steppers at higher-than-normal current in an effort to produce more torque at the cost of increased heat for drivers and steppers.</p> <p>Disabling the steppers between moves gives the motors and drivers a chance to cool off. It sounds good in theory, but in practice it has drawbacks. Disabled steppers can’t hold the carriage stable. This results in poor accuracy and carries a strong probability of axial drift (i.e., lost steps).</p> <p>Most 3D printers use an “open loop” control system, meaning the software can’t ascertain the actual carriage position at a given time. It simply sends commands and assumes they have been obeyed. In practice with a well-calibrated machine this is not an issue and using open loop is a major cost saving with excellent quality.</p> <p><strong>We don’t recommend this hack.</strong> There are much better ways to address the problem of stepper/driver overheating. Some examples: stepper/driver heatsink, active cooling, dual motors on the axis, reduce micro-stepping, check belt for over tension, check components for smooth motion, etc.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define DISABLE_REDUCED_ACCURACY_WARNING</span>
</code></pre></div></div> <p>Enable this option to suppress the warning given in cases when reduced accuracy is likely to occur.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define DISABLE_E false 					// For all extruders
#define DISABLE_INACTIVE_EXTRUDER	false 	// Keep only the active extruder enabled
</span>
</code></pre></div></div> <p>The E disable option works like <code class="language-plaintext highlighter-rouge">DISABLE_[XYZ]</code> but pertains to one or more extruders. The default setting keeps the active extruder enabled, disabling all inactive extruders. This is reasonable for situations where a “wipe tower” or other means is used to ensure that the nozzle is primed and not oozing between uses.</p> <h3 id="motor-direction">Motor Direction</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define INVERT_X_DIR false
#define INVERT_Y_DIR true
#define INVERT_Z_DIR false
</span>
<span class="cp">#define INVERT_E0_DIR false
#define INVERT_E1_DIR false
#define INVERT_E2_DIR false
#define INVERT_E3_DIR false
#define INVERT_E4_DIR false
</span></code></pre></div></div> <p>These settings reverse the motor direction for each axis. Be careful when first setting these. Axes moving the wrong direction can cause damage. Get these right without belts attached first, if possible. Before testing, move the carriage and bed to the middle. Test each axis for proper movement using the host or LCD “Move Axis” menu. If an axis is inverted, either flip the plug around or change its invert setting.</p> <h2 id="homing-and-bounds">Homing and Bounds</h2> <h3 id="z-homing-height">Z Homing Height</h3> <p><img src="/assets/images/config/home.jpg" alt="Home Icon" class="floater framed"></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define NO_MOTION_BEFORE_HOMING	// Inhibit movement until all axes have been homed</span>
<span class="c1">//#define UNKNOWN_Z_NO_RAISE		// Don't raise Z (lower the bed) if Z is "unknown."</span>
									<span class="c1">//For beds that fall when Z is powered off.</span>
<span class="c1">//#define Z_HOMING_HEIGHT 4</span>

</code></pre></div></div> <p>This value raises Z to the specified height above the bed before homing X or Y. This is useful to prevent the head crashing into bed mountings such as screws, bulldog clips, etc. This also works with auto bed leveling enabled and will be triggered only when the Z axis height is less than the defined value, otherwise the Z axis will not move. <code class="language-plaintext highlighter-rouge">NO_MOTION_BEFORE_HOMING</code> and <code class="language-plaintext highlighter-rouge">UNKNOWN_Z_NO_RAISE</code></p> <h3 id="homing-direction">Homing Direction</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define X_HOME_DIR -1
#define Y_HOME_DIR -1
#define Z_HOME_DIR -1
</span></code></pre></div></div> <p>Homing direction for each axis: -1 = min, 1 = max. Most Cartesian and core machines have three min endstops. Deltas have three max endstops. For other configurations set these values appropriately.</p> <h3 id="movement-bounds">Movement Bounds</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define X_BED_SIZE 200
#define Y_BED_SIZE 200
</span></code></pre></div></div> <p>With Marlin you can directly specify the bed size. This allows Marlin to do extra logic related to the bed size when it differs from the movement limits below. If the XY carriage is able to move outside of the bed, you can specify a wider range below.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define X_MIN_POS 0
#define Y_MIN_POS 0
#define Z_MIN_POS 0
#define X_MAX_POS X_BED_SIZE
#define Y_MAX_POS Y_BED_SIZE
#define Z_MAX_POS 170
</span></code></pre></div></div> <p>These values specify the physical limits of the machine. Usually the <code class="language-plaintext highlighter-rouge">[XYZ]_MIN_POS</code> values are set to 0, because endstops are positioned at the bed limits. <code class="language-plaintext highlighter-rouge">[XYZ]_MAX_POS</code> should be set to the farthest reachable point. By default, these are used as your homing positions as well. However, the <code class="language-plaintext highlighter-rouge">MANUAL_[XYZ]_HOME_POS</code> options can be used to override these, if needed.</p> <div class="panel panel-info"> <div class="panel-heading"><h4 class="panel-title"> <i class="fa fa-info-circle pull-left" aria-hidden="true"></i>Home Offset</h4></div> <div class="panel-body"> <p> </p> <p>Although home positions are fixed, <a href="/docs/gcode/M206.html"><code class="language-plaintext highlighter-rouge">M206</code></a> can be used to apply offsets to the home position if needed.</p> </div> </div> <h3 id="software-endstops">Software Endstops</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define MIN_SOFTWARE_ENDSTOPS
#if ENABLED(MIN_SOFTWARE_ENDSTOPS)
</span>  <span class="cp">#define MIN_SOFTWARE_ENDSTOP_X
</span>  <span class="cp">#define MIN_SOFTWARE_ENDSTOP_Y
</span>  <span class="cp">#define MIN_SOFTWARE_ENDSTOP_Z
#endif
</span>
<span class="cp">#define MAX_SOFTWARE_ENDSTOPS
#if ENABLED(MAX_SOFTWARE_ENDSTOPS)
</span>  <span class="cp">#define MAX_SOFTWARE_ENDSTOP_X
</span>  <span class="cp">#define MAX_SOFTWARE_ENDSTOP_Y
</span>  <span class="cp">#define MAX_SOFTWARE_ENDSTOP_Z
#endif
</span></code></pre></div></div> <p>Enable these options to constrain movement to the physical boundaries of the machine (as set by <code class="language-plaintext highlighter-rouge">[XYZ]_(MIN|MAX)_POS</code>). For example, <code class="language-plaintext highlighter-rouge">G1 Z-100</code> can be min constrained to <code class="language-plaintext highlighter-rouge">G1 Z0</code>. It is recommended to enable these options as a safety feature. If software endstops need to be disabled, use <a href="/docs/gcode/M211.html"><code class="language-plaintext highlighter-rouge">M211 S0</code></a>.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if EITHER(MIN_SOFTWARE_ENDSTOPS, MAX_SOFTWARE_ENDSTOPS)
</span>  <span class="c1">//#define SOFT_ENDSTOPS_MENU_ITEM</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Enable/Disable software endstops from the LCD</p> <h2 id="filament-runout-sensor">Filament Runout Sensor</h2> <p><img src="/assets/images/config/filament-sensor.jpg" alt="Filament Sensor" class="floater framed"></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define FILAMENT_RUNOUT_SENSOR</span>
<span class="cp">#if ENABLED(FILAMENT_RUNOUT_SENSOR)
</span>  <span class="cp">#define NUM_RUNOUT_SENSORS   1     // Number of sensors, up to one per extruder. Define a FIL_RUNOUT#_PIN for each.
</span>  <span class="cp">#define FIL_RUNOUT_INVERTING false // Set to true to invert the logic of the sensor.
</span>  <span class="cp">#define FIL_RUNOUT_PULLUP          // Use internal pullup for filament runout pins.
</span>  <span class="c1">//#define FIL_RUNOUT_PULLDOWN      // Use internal pulldown for filament runout pins.</span>

  <span class="c1">// Set one or more commands to execute on filament runout.</span>
  <span class="c1">// (After 'M412 H' Marlin will ask the host to handle the process.)</span>
  <span class="cp">#define FILAMENT_RUNOUT_SCRIPT "M600"
</span>
  <span class="c1">// When using a runout switch (no encoder), after a runout is detected,</span>
  <span class="c1">// continue printing this length of filament before executing the runout script.</span>
  <span class="c1">// Useful for a sensor at the end of a feed tube.</span>
  <span class="c1">// If using an encoder disc, this is the length of filament that would print</span>
  <span class="c1">// without any movement from the sensor before it triggers a runout.</span>
  <span class="c1">// Requires 4 bytes SRAM per sensor, plus 4 bytes overhead.</span>
  <span class="c1">//#define FILAMENT_RUNOUT_DISTANCE_MM 25</span>

  <span class="cp">#ifdef FILAMENT_RUNOUT_DISTANCE_MM
</span>    <span class="c1">// Enable this option to use an encoder disc that toggles the runout pin as the filament moves.</span>
    <span class="c1">// Be sure to set FILAMENT_RUNOUT_DISTANCE_MM large enough to avoid false positives.</span>
    <span class="c1">// Start at the value of the sensor for one revolution and if you experience false positives,</span>
    <span class="c1">// increment the value by the same amount.</span>
    <span class="c1">// ie., 7mm is set, and you get false positives, set it to 14 and try it again.</span>
    <span class="c1">//#define FILAMENT_MOTION_SENSOR</span>
  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>With this feature, a mechanical or opto endstop switch is used to check for the presence of filament in the feeder (usually the switch is closed when filament is present). If the filament runs out, Marlin will run the specified G-code script (by default <a href="/docs/gcode/M600.html"><code class="language-plaintext highlighter-rouge">M600</code></a>).</p> <p>RAMPS-based boards use <code class="language-plaintext highlighter-rouge">SERVO3_PIN</code>. For other boards you may need to define <code class="language-plaintext highlighter-rouge">FIL_RUNOUT_PIN</code>. Enable the <a href="/docs/gcode/M43.html"><code class="language-plaintext highlighter-rouge">M43</code></a> feature in your firmware (<code class="language-plaintext highlighter-rouge">PINS_DEBUGGING</code>) and load it to your printer. Assuming you already have a runout sensor (switch based) there, you can watch the pin states while toggling the runout sensor on an off to see which pin is changing.</p> <h2 id="bed-leveling">Bed Leveling</h2> <p><img src="/assets/images/config/bedlevel.png" alt="Bed Level" class="floater"></p> <p>Bed Leveling is a standard feature on many 3D printers. It takes the guess-work out of getting a good first layer and good bed adhesion.</p> <p>It is highly recommended to get your printer aligned and constrained as much as possible before using bed leveling, because it exists to compensate for imperfections in the hardware.</p> <p>For all the in-depth details please read the <a href="/docs/features/auto_bed_leveling.html">Auto Bed Leveling</a> documentation and the <a href="/docs/gcode/G029.html"><code class="language-plaintext highlighter-rouge">G29</code></a> G-codes documentation.</p> <p>With Bed Leveling enabled:</p> <ul> <li>| By default <code class="language-plaintext highlighter-rouge">G28</code> disables bed leveling. Follow <code class="language-plaintext highlighter-rouge">G28</code> with <code class="language-plaintext highlighter-rouge">M420 S</code> to turn leveling on. <ul> <li>With <code class="language-plaintext highlighter-rouge">ENABLE_LEVELING_AFTER_G28</code> leveling will always be enabled after <code class="language-plaintext highlighter-rouge">G28</code>.</li> <li>With <code class="language-plaintext highlighter-rouge">RESTORE_LEVELING_AFTER_G28</code> leveling is restored to whatever state it was in before <code class="language-plaintext highlighter-rouge">G28</code>.</li> </ul> </li> <li> <a href="/docs/gcode/G029.html"><code class="language-plaintext highlighter-rouge">G29</code></a> will automatically probe the bed or guide you to do a paper-test at various points. After measurement it calculates a correction grid or matrix and enables leveling compensation. The specific behavior depends on configuration and type of bed leveling.</li> <li> <a href="/docs/gcode/M500.html"><code class="language-plaintext highlighter-rouge">M500</code></a> will save the bed leveling data to EEPROM. <a href="/docs/gcode/M501.html"><code class="language-plaintext highlighter-rouge">M501</code></a> will load it. <a href="/docs/gcode/M502.html"><code class="language-plaintext highlighter-rouge">M502</code></a> will erase it. And <a href="/docs/gcode/M503.html"><code class="language-plaintext highlighter-rouge">M503</code></a> will report it.</li> <li> <code class="language-plaintext highlighter-rouge">M420 S&lt;bool&gt;</code> can be used to enable/disable bed leveling. For example, <a href="/docs/gcode/M420.html"><code class="language-plaintext highlighter-rouge">M420 S1</code></a> must be used after <a href="/docs/gcode/M501.html"><code class="language-plaintext highlighter-rouge">M501</code></a> to enable the loaded mesh or matrix, and to re-enable leveling after <a href="/docs/gcode/G028.html"><code class="language-plaintext highlighter-rouge">G28</code></a>, which disables leveling compensation.</li> <li>A “Level Bed” menu item can be added to the LCD with the <code class="language-plaintext highlighter-rouge">LCD_BED_LEVELING</code> option.</li> </ul> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define AUTO_BED_LEVELING_3POINT</span>
<span class="c1">//#define AUTO_BED_LEVELING_LINEAR</span>
<span class="c1">//#define AUTO_BED_LEVELING_BILINEAR</span>
<span class="c1">//#define AUTO_BED_LEVELING_UBL</span>
<span class="c1">//#define MESH_BED_LEVELING</span>
</code></pre></div></div> <p>Enable just one type of Bed Leveling.</p> <ul> <li> <code class="language-plaintext highlighter-rouge">AUTO_BED_LEVELING_3POINT</code> probes three points in a triangle. The flat plane gives a transform matrix suitable to compensate for a flat but tilted bed.</li> <li> <code class="language-plaintext highlighter-rouge">AUTO_BED_LEVELING_LINEAR</code> probes the bed in a grid. A transform matrix is produced by least-squares method to compensate for a flat but tilted bed.</li> <li> <code class="language-plaintext highlighter-rouge">AUTO_BED_LEVELING_BILINEAR</code> probes the bed in a grid, with optional Catmull-Rom subdivision. The mesh data is used to adjust Z height across the bed using bilinear interpolation. Good for delta, large, or uneven beds.</li> <li> <code class="language-plaintext highlighter-rouge">AUTO_BED_LEVELING_UBL</code> (recommended) combines the features of 3-point, linear, bilinear, and mesh leveling. As with bilinear leveling, the mesh data generated by UBL is used to adjust Z height across the bed using bilinear interpolation. An LCD controller is currently required.</li> <li> <code class="language-plaintext highlighter-rouge">MESH_BED_LEVELING</code> provides a custom <a href="/docs/gcode/G029.html"><code class="language-plaintext highlighter-rouge">G29</code></a> command to measure the bed height at several grid points using a piece of paper or feeler gauge. See <a href="/docs/gcode/G029-mbl.html"><code class="language-plaintext highlighter-rouge">G29</code> for MBL</a> for the full procedure. This type of leveling is only compatible with <code class="language-plaintext highlighter-rouge">PROBE_MANUALLY</code>.</li> </ul> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>Only <code class="language-plaintext highlighter-rouge">AUTO_BED_LEVELING_BILINEAR</code> and <code class="language-plaintext highlighter-rouge">AUTO_BED_LEVELING_UBL</code> support <code class="language-plaintext highlighter-rouge">DELTA</code>.<br> Only <code class="language-plaintext highlighter-rouge">AUTO_BED_LEVELING_BILINEAR</code> currently supports <code class="language-plaintext highlighter-rouge">SCARA</code>.<br> <code class="language-plaintext highlighter-rouge">MESH_BED_LEVELING</code> is incompatible with Delta and SCARA.</p> </div> </div> </div> <h3 id="restore-after-g28">Restore after G28</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define RESTORE_LEVELING_AFTER_G28</span>
</code></pre></div></div> <p>Normally <a href="/docs/gcode/G028.html"><code class="language-plaintext highlighter-rouge">G28</code></a> causes leveling to be disabled, so you have to re-enable it with <code class="language-plaintext highlighter-rouge">M420 S1</code> or <a href="/docs/gcode/G029.html"><code class="language-plaintext highlighter-rouge">G29</code></a>. If you enable this option then <a href="/docs/gcode/G028.html"><code class="language-plaintext highlighter-rouge">G28</code></a> will make sure to turn leveling back on if it was enabled beforehand.</p> <h3 id="debug-leveling">Debug Leveling</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define DEBUG_LEVELING_FEATURE</span>
</code></pre></div></div> <p>Use this option to enable extra debugging of homing and leveling. You can then use <code class="language-plaintext highlighter-rouge">M111 S32</code> before issuing <a href="/docs/gcode/G028.html"><code class="language-plaintext highlighter-rouge">G28</code></a> and <code class="language-plaintext highlighter-rouge">G29 V4</code> to get a detailed log of the process for diagnosis. This option is useful to figure out the cause of unexpected behaviors, or when reporting issues to the project.</p> <h3 id="leveling-fade-height">Leveling Fade Height</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define ENABLE_LEVELING_FADE_HEIGHT
</span></code></pre></div></div> <p>Available with <code class="language-plaintext highlighter-rouge">MESH_BED_LEVELING</code>, <code class="language-plaintext highlighter-rouge">AUTO_BED_LEVELING_BILINEAR</code>, and <code class="language-plaintext highlighter-rouge">AUTO_BED_LEVELING_UBL</code>.</p> <p>This option adds the <code class="language-plaintext highlighter-rouge">Z</code> parameter to <a href="/docs/gcode/M420.html"><code class="language-plaintext highlighter-rouge">M420</code></a> which sets a fade distance over which leveling will be gradually reduced. Above the given Z height, leveling compensation will no longer be applied.</p> <p>This feature exists to prevent irregularities in the bed from propagating through the model’s entire height. Fading out leveling also reduces computational requirements and resonance from the Z axis above the fade height. For a well-aligned machine, this feature can improve print results.</p> <p>Example: To have leveling fade out over the first 10mm of layer printing use <code class="language-plaintext highlighter-rouge">M420 Z10</code>. If each layer is 0.2 mm high, leveling compensation will be reduced by 1/50th (2 %) after each layer. Above 10mm the machine will move without compensation.</p> <h4 id="g26-mesh-validation-pattern">G26 Mesh Validation Pattern</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Enable the G26 Mesh Validation Pattern tool.
 */</span>
<span class="cp">#define G26_MESH_VALIDATION   // Enable G26 mesh validation
#if ENABLED(G26_MESH_VALIDATION)
</span>  <span class="cp">#define MESH_TEST_NOZZLE_SIZE     0.4   // (mm) Diameter of primary nozzle.
</span>  <span class="cp">#define MESH_TEST_LAYER_HEIGHT    0.2   // (mm) Default layer height for the G26 Mesh Validation Tool.
</span>  <span class="cp">#define MESH_TEST_HOTEND_TEMP   205   // (°C) Default nozzle temperature for the G26 Mesh Validation Tool.
</span>  <span class="cp">#define MESH_TEST_BED_TEMP       60   // (°C) Default bed temperature for the G26 Mesh Validation Tool.
</span>  <span class="cp">#define G26_XY_FEEDRATE         20    // (mm/s) Feedrate for XY Moves for the G26 Mesh Validation Tool.
</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>When using any of the mesh-based leveling systems (1.1.7) you can activate <code class="language-plaintext highlighter-rouge">G26_MESH_VALIDATION</code> to print test patterns and fine-tune the mesh. See <a href="/docs/gcode/G026.html"><code class="language-plaintext highlighter-rouge">G26</code> Mesh Validation</a> for full details. The <a href="/docs/gcode/G026.html"><code class="language-plaintext highlighter-rouge">G26</code></a> command accepts parameters for nozzle size, layer height, etc. The sub-options above specify the default values that will be applied for omitted parameters.</p> <h3 id="linear--bilinear-options">Linear / Bilinear Options</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define GRID_MAX_POINTS_X 3
#define GRID_MAX_POINTS_Y GRID_MAX_POINTS_X
</span></code></pre></div></div> <p>These options specify the default number of points to probe in each dimension during <a href="/docs/gcode/G029.html"><code class="language-plaintext highlighter-rouge">G29</code></a>.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PROBING_MARGIN_LEFT PROBING_MARGIN</span>
<span class="c1">//#define PROBING_MARGIN_RIGHT PROBING_MARGIN</span>
<span class="c1">//#define PROBING_MARGIN_FRONT PROBING_MARGIN</span>
<span class="c1">//#define PROBING_MARGIN_BACK PROBING_MARGIN</span>
</code></pre></div></div> <p>These settings specify the boundaries for probing with <a href="/docs/gcode/G029-mbl.html"><code class="language-plaintext highlighter-rouge">G29</code></a>. This will most likely be a sub-section of the bed because probes are not usually able to reach every point that the nozzle can. Take account of the probe’s XY offsets when setting these boundaries.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PROBE_Y_FIRST</span>
</code></pre></div></div> <p>Enable this option if probing should proceed in the Y dimension first instead of X first.</p> <h3 id="bilinear-options">Bilinear Options</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define EXTRAPOLATE_BEYOND_GRID</span>
</code></pre></div></div> <p>Usually the probed grid doesn’t extend all the way to the edges of the bed. So, outside the bounds of the probed grid, Z adjustment can take one of two approaches. Either the Z height can continue to raise/lower by the established tilt of the nearest grid box (best when most of the bed was probed), or it can follow the contour of the nearest edge (the default). Enable this option for extrapolation.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define ABL_BILINEAR_SUBDIVISION</span>
<span class="cp">#if ENABLED(ABL_BILINEAR_SUBDIVISION)
</span>  <span class="c1">// Number of subdivisions between probe points</span>
  <span class="cp">#define BILINEAR_SUBDIVISIONS 3
#endif
</span></code></pre></div></div> <p>If you have SRAM to spare, this option will multiply the resolution of the bilinear grid using the Catmull-Rom subdivision method. This option only applies to bilinear leveling. If the default value of 3 is too expensive, try 2 or 1. (In Marlin 1.1.1, the default grid will be stored in PROGMEM, as UBL now does.)</p> <h3 id="unified-bed-leveling-options">Unified Bed Leveling Options</h3> <h4 id="probe-points">Probe Points</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define UBL_MESH_INSET 1          // Mesh inset margin on print area
#define GRID_MAX_POINTS_X 10      // Don't use more than 15 points per axis, implementation limited.
#define GRID_MAX_POINTS_Y GRID_MAX_POINTS_X
</span>
  <span class="cp">#define UBL_MESH_EDIT_MOVES_Z     // Sophisticated users prefer no movement of nozzle
</span>  <span class="cp">#define UBL_SAVE_ACTIVE_ON_M500   // Save the currently active mesh in the current slot on M500
</span>
  <span class="c1">//#define UBL_Z_RAISE_WHEN_OFF_MESH 2.5 // When the nozzle is off the mesh, this value is used</span>
                                          <span class="c1">// as the Z-Height correction value.</span>
</code></pre></div></div> <p>These options specify the inset, grid, and 3-point triangle to use for UBL. Note that probe XY offsets and movement limits may constrain the probeable area of the bed.</p> <h3 id="mesh-bed-leveling-options">Mesh Bed Leveling Options</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define MESH_INSET 10          // Mesh inset margin on print area
#define GRID_MAX_POINTS_X 3    // Don't use more than 7 points per axis, implementation limited.
#define GRID_MAX_POINTS_Y GRID_MAX_POINTS_X
</span>
<span class="c1">//#define MESH_G28_REST_ORIGIN // After homing all axes ('G28' or 'G28 XYZ') rest Z at Z_MIN_POS</span>
</code></pre></div></div> <p>These options specify the number of points that will always be probed in each dimension during <a href="/docs/gcode/G029.html"><code class="language-plaintext highlighter-rouge">G29</code></a>. The mesh inset is used to automatically calculate the probe boundaries. These can be set explicitly in <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code>. <code class="language-plaintext highlighter-rouge">MESH_G28_REST_ORIGIN</code> moves the nozzle to rest at <code class="language-plaintext highlighter-rouge">Z_MIN_POS</code> when mesh probing is done. If Z is offset (<em>e.g.,</em> due to <code class="language-plaintext highlighter-rouge">home_offset</code> or some other cause) this is intended to move Z to a good starting point, usually Z=0.</p> <h3 id="lcd-bed-leveling">LCD Bed Leveling</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define LCD_BED_LEVELING</span>
<span class="cp">#if ENABLED(LCD_BED_LEVELING)
</span>  <span class="cp">#define MESH_EDIT_Z_STEP  0.025 // (mm) Step size while manually probing Z axis.
</span>  <span class="cp">#define LCD_PROBE_Z_RANGE 4     // (mm) Z Range centered on Z_MIN_POS for LCD Z adjustment
</span>  <span class="c1">//#define MESH_EDIT_MENU        // Add a menu to edit mesh points</span>
<span class="cp">#endif
</span></code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">LCD_BED_LEVELING</code> adds a “Level Bed” menu to the LCD that starts a step-by-step guided leveling procedure that requires no probe.</p> <p>Available with <code class="language-plaintext highlighter-rouge">MESH_BED_LEVELING</code> and <code class="language-plaintext highlighter-rouge">PROBE_MANUALLY</code> (all forms of Auto Bed Leveling). See the <code class="language-plaintext highlighter-rouge">Configuration.h</code> file for sub-options and the <a href="/docs/gcode/G029.html"><code class="language-plaintext highlighter-rouge">G29</code></a> G-code documentation that applies to your selected leveling system.</p> <h3 id="corner-leveling">Corner Leveling</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define LEVEL_BED_CORNERS</span>
<span class="cp">#if ENABLED(LEVEL_BED_CORNERS)
</span>  <span class="cp">#define LEVEL_CORNERS_INSET 30    // (mm) An inset for corner leveling
</span>  <span class="cp">#define LEVEL_CORNERS_Z_HOP  4.0  // (mm) Move nozzle up before moving between corners
</span>  <span class="cp">#define LEVEL_CORNERS_HEIGHT 0.0  // (mm) Z height of nozzle at leveling points
</span>  <span class="c1">//#define LEVEL_CENTER_TOO        // Move to the center after the last corner</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Add a menu item to move between bed corners for manual bed adjustment.</p> <h3 id="z-probe-end-script">Z Probe End Script</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define Z_PROBE_END_SCRIPT "G1 Z10 F12000\nG1 X15 Y330\nG1 Z0.5\nG1 Z10"</span>
</code></pre></div></div> <p>A custom script to do at the very end of <a href="/docs/gcode/G029.html"><code class="language-plaintext highlighter-rouge">G29</code></a>. If multiple commands are needed, divide them with <code class="language-plaintext highlighter-rouge">\n</code> (the newline character).</p> <h2 id="homing-options">Homing Options</h2> <h3 id="bed-center-at-00">Bed Center at 0,0</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define BED_CENTER_AT_0_0</span>
</code></pre></div></div> <p>Enable this option if the bed center is at X0 Y0. This setting affects the way automatic home positions (those not set with <code class="language-plaintext highlighter-rouge">MANUAL_[XYZ]_POS</code>) are calculated. This should always be enabled with <code class="language-plaintext highlighter-rouge">DELTA</code>.</p> <h3 id="manual-home-position">Manual Home Position</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MANUAL_X_HOME_POS 0</span>
<span class="c1">//#define MANUAL_Y_HOME_POS 0</span>
<span class="c1">//#define MANUAL_Z_HOME_POS 0 // Distance from nozzle to printbed after homing</span>
</code></pre></div></div> <p>These settings are used to override the home position. Leave them undefined for automatic settings. For <code class="language-plaintext highlighter-rouge">DELTA</code> Z home must be set to the top-most position.</p> <h3 id="z-safe-homing">Z Safe Homing</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define Z_SAFE_HOMING
</span>
<span class="cp">#if ENABLED(Z_SAFE_HOMING)
</span>  <span class="cp">#define Z_SAFE_HOMING_X_POINT ((X_BED_SIZE) / 2)    // X point for Z homing when homing all axes (G28).
</span>  <span class="cp">#define Z_SAFE_HOMING_Y_POINT ((Y_BED_SIZE) / 2)    // Y point for Z homing when homing all axes (G28).
#endif
</span></code></pre></div></div> <p><strong>Z Safe Homing</strong> prevents Z from homing when the probe (or nozzle) is outside bed area by moving to a defined XY point (by default, the middle of the bed) before Z Homing when homing all axes with <a href="/docs/gcode/G028.html"><code class="language-plaintext highlighter-rouge">G28</code></a>. As a side-effect, X and Y homing are required before Z homing. If stepper drivers time out, X and Y homing will be required again.</p> <p>Enable this option if a probe (not an endstop) is being used for Z homing. Z Safe Homing isn’t needed if a Z endstop is used for homing, but it may also be enabled just to have XY always move to some custom position after homing.</p> <h3 id="homing-speed">Homing Speed</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Homing speeds (mm/m)</span>
<span class="cp">#define HOMING_FEEDRATE_XY (50*60)
#define HOMING_FEEDRATE_Z  (4*60)
</span></code></pre></div></div> <p>Homing speed for use in auto home and auto bed leveling. These values may be set to the fastest speeds your machine can achieve. Homing and probing speeds are constrained by the current max feedrate and max acceleration settings.</p> <div class="container-fluid"> <div class="row alert alert-warning custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-exclamation-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>Setting these values too high may result in reduced accuracy and/or skipped steps. Reducing acceleration may help to achieve higher top speeds.</p> </div> </div> </div> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define VALIDATE_HOMING_ENDSTOPS
</span></code></pre></div></div> <p>Validate that endstops are triggered on homing moves.</p> <h3 id="bed-skew-compensation">Bed Skew Compensation</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SKEW_CORRECTION</span>

<span class="cp">#if ENABLED(SKEW_CORRECTION)
</span>  <span class="c1">// Input all length measurements here:</span>
  <span class="cp">#define XY_DIAG_AC 282.8427124746
</span>  <span class="cp">#define XY_DIAG_BD 282.8427124746
</span>  <span class="cp">#define XY_SIDE_AD 200
</span>
  <span class="c1">// Or, set the default skew factors directly here</span>
  <span class="c1">// to override the above measurements:</span>
  <span class="cp">#define XY_SKEW_FACTOR 0.0
</span>
  <span class="c1">//#define SKEW_CORRECTION_FOR_Z</span>
  <span class="cp">#if ENABLED(SKEW_CORRECTION_FOR_Z)
</span>    <span class="cp">#define XZ_DIAG_AC 282.8427124746
</span>    <span class="cp">#define XZ_DIAG_BD 282.8427124746
</span>    <span class="cp">#define YZ_DIAG_AC 282.8427124746
</span>    <span class="cp">#define YZ_DIAG_BD 282.8427124746
</span>    <span class="cp">#define YZ_SIDE_AD 200
</span>    <span class="cp">#define XZ_SKEW_FACTOR 0.0
</span>    <span class="cp">#define YZ_SKEW_FACTOR 0.0
</span>  <span class="cp">#endif
</span>
  <span class="c1">// Enable this option for M852 to set skew at runtime</span>
  <span class="c1">//#define SKEW_CORRECTION_GCODE</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Correct for misalignment in the XYZ axes. See <code class="language-plaintext highlighter-rouge">Configuration.h</code> for a thorough explanation.</p> <h2 id="additional-features">Additional Features</h2> <h3 id="eeprom">EEPROM</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define EEPROM_SETTINGS</span>
</code></pre></div></div> <p>Commands like <a href="/docs/gcode/M092.html"><code class="language-plaintext highlighter-rouge">M92</code></a> only change the settings in volatile memory, and these settings are lost when the machine is powered off. With this option enabled, Marlin uses the built-in EEPROM to preserve settings across reboots. Settings saved to EEPROM (with <a href="/docs/gcode/M500.html"><code class="language-plaintext highlighter-rouge">M500</code></a>) are loaded automatically whenever the machine restarts (and in most setups, when connecting to a host), overriding the defaults set in the configuration files. This option is highly recommended, as it makes configurations easier to manage.</p> <p>The EEPROM-related commands are:</p> <ul> <li> <a href="/docs/gcode/M500.html"><code class="language-plaintext highlighter-rouge">M500</code></a>: Save all current settings to EEPROM.</li> <li> <a href="/docs/gcode/M501.html"><code class="language-plaintext highlighter-rouge">M501</code></a>: Load all settings last saved to EEPROM.</li> <li> <a href="/docs/gcode/M502.html"><code class="language-plaintext highlighter-rouge">M502</code></a>: Reset all settings to their default values (as set by <code class="language-plaintext highlighter-rouge">Configuration.h</code>)</li> <li> <a href="/docs/gcode/M503.html"><code class="language-plaintext highlighter-rouge">M503</code></a>: Print the current settings (in RAM, not EEPROM)</li> </ul> <h4 id="eeprom-options">EEPROM Options</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define DISABLE_M503    // Saves ~2700 bytes of PROGMEM. Disable for release!</span>
<span class="cp">#define EEPROM_CHITCHAT   // Give feedback on EEPROM commands. Disable to save PROGMEM.
</span></code></pre></div></div> <p>These EEPROM options should be left as they are, but for 128K and smaller boards they may be used to recover some program memory. Vendors are strongly discouraged from using <code class="language-plaintext highlighter-rouge">DISABLE_M503</code>.</p> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>Settings that can be changed and saved to EEPROM are marked with <em class="fa fa-sticky-note" aria-hidden="true"></em>. Options marked with <em class="fa fa-desktop" aria-hidden="true"></em> can be changed from the LCD controller.</p> </div> </div> </div> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>When you change saveable settings in the configuration files and re-flash, the new values don’t take effect right away. They are still overridden by the saved values in EEPROM. To get your new default settings into the EEPROM, use <a href="/docs/gcode/M502.html"><code class="language-plaintext highlighter-rouge">M502</code></a> followed by <a href="/docs/gcode/M500.html"><code class="language-plaintext highlighter-rouge">M500</code></a>.</p> </div> </div> </div> <h3 id="host-keepalive">Host Keepalive</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define HOST_KEEPALIVE_FEATURE        // Disable this if your host doesn't like keepalive messages
#define DEFAULT_KEEPALIVE_INTERVAL 2  // Number of seconds between "busy" messages. Set with M113.
#define BUSY_WHILE_HEATING            // Some hosts require "busy" messages even during heating
</span></code></pre></div></div> <p>When Host Keepalive is enabled Marlin will send a busy status message to the host every couple of seconds when it can’t accept commands. Disable if your host doesn’t like keepalive messages. Use <code class="language-plaintext highlighter-rouge">DEFAULT_KEEPALIVE_INTERVAL</code> for the default number of seconds between “busy” messages. Override with <a href="/docs/gcode/M113.html"><code class="language-plaintext highlighter-rouge">M113</code></a>. Marlin 1.1.5 and up include the <code class="language-plaintext highlighter-rouge">BUSY_WHILE_HEATING</code> option for hosts that treat host keepalive as a strict busy protocol.</p> <h3 id="free-memory-watcher">Free Memory Watcher</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define M100_FREE_MEMORY_WATCHER</span>
</code></pre></div></div> <p>Uncomment to add the <a href="/docs/gcode/M100.html"><code class="language-plaintext highlighter-rouge">M100</code></a> Free Memory Watcher for debugging purposes.</p> <h3 id="inch-units">Inch Units</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define INCH_MODE_SUPPORT</span>
</code></pre></div></div> <p>This option adds support for the <a href="/docs/gcode/G020.html"><code class="language-plaintext highlighter-rouge">G20</code></a> and <a href="/docs/gcode/G021.html"><code class="language-plaintext highlighter-rouge">G21</code></a> commands, allowing G-code to specify units in inches.</p> <h3 id="temperature-units">Temperature Units</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define TEMPERATURE_UNITS_SUPPORT</span>
</code></pre></div></div> <p>This option adds support for <a href="/docs/gcode/M149.html"><code class="language-plaintext highlighter-rouge">M149</code></a> <code class="language-plaintext highlighter-rouge">C</code>, <a href="/docs/gcode/M149.html"><code class="language-plaintext highlighter-rouge">M149</code></a> <code class="language-plaintext highlighter-rouge">K</code>, and <a href="/docs/gcode/M149.html"><code class="language-plaintext highlighter-rouge">M149</code></a> <code class="language-plaintext highlighter-rouge">F</code> to set temperature units to Celsius, Kelvin, or Fahrenheit. Without this option all temperatures must be specified in Celsius units.</p> <h3 id="lcd-material-presets--">LCD Material Presets <em class="fa fa-sticky-note text-info" aria-hidden="true"></em> <em class="fa fa-desktop text-info" aria-hidden="true"></em> </h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define PREHEAT_1_TEMP_HOTEND 180
#define PREHEAT_1_TEMP_BED     70
#define PREHEAT_1_FAN_SPEED     0 // Value from 0 to 255
</span>
<span class="cp">#define PREHEAT_2_TEMP_HOTEND 240
#define PREHEAT_2_TEMP_BED    110
#define PREHEAT_2_FAN_SPEED     0 // Value from 0 to 255
</span></code></pre></div></div> <p>These are the default values for the <code class="language-plaintext highlighter-rouge">Prepare</code> &gt; <code class="language-plaintext highlighter-rouge">Preheat</code> LCD menu options. These values can be overridden using the <a href="/docs/gcode/M145.html"><code class="language-plaintext highlighter-rouge">M145</code></a> command or the <code class="language-plaintext highlighter-rouge">Control</code> &gt; <code class="language-plaintext highlighter-rouge">Temperature</code> &gt; <code class="language-plaintext highlighter-rouge">Preheat Material X conf</code> submenus.</p> <h3 id="nozzle-park">Nozzle Park</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define NOZZLE_PARK_FEATURE</span>
<span class="cp">#if ENABLED(NOZZLE_PARK_FEATURE)
</span>  <span class="c1">// Specify a park position as { X, Y, Z_raise }</span>
  <span class="cp">#define NOZZLE_PARK_POINT { (X_MIN_POS + 10), (Y_MAX_POS - 10), 20 }
</span>  <span class="cp">#define NOZZLE_PARK_XY_FEEDRATE 100   // (mm/s) X and Y axes feedrate (also used for delta Z axis)
</span>  <span class="cp">#define NOZZLE_PARK_Z_FEEDRATE 5      // (mm/s) Z axis feedrate (not used for delta printers)
#endif
</span>
</code></pre></div></div> <p>Park the nozzle at the given XYZ position on idle or <a href="/docs/gcode/G027.html"><code class="language-plaintext highlighter-rouge">G27</code></a>.</p> <p>The “P” parameter controls the action applied to the Z axis:</p> <ul> <li> <code class="language-plaintext highlighter-rouge">P0</code> - (Default) If Z is below park Z raise the nozzle.</li> <li> <code class="language-plaintext highlighter-rouge">P1</code> - Raise the nozzle always to Z-park height.</li> <li> <code class="language-plaintext highlighter-rouge">P2</code> - Raise the nozzle by Z-park amount, limited to <code class="language-plaintext highlighter-rouge">Z_MAX_POS</code>.</li> </ul> <h3 id="nozzle-clean">Nozzle Clean</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define NOZZLE_CLEAN_FEATURE</span>
<span class="cp">#if ENABLED(NOZZLE_CLEAN_FEATURE)
</span>  <span class="c1">// Default number of pattern repetitions</span>
  <span class="cp">#define NOZZLE_CLEAN_STROKES  12
</span>
  <span class="c1">// Default number of triangles</span>
  <span class="cp">#define NOZZLE_CLEAN_TRIANGLES  3
</span>
  <span class="c1">// Specify positions as { X, Y, Z }</span>
  <span class="cp">#define NOZZLE_CLEAN_START_POINT { 30, 30, (Z_MIN_POS + 1)}
</span>  <span class="cp">#define NOZZLE_CLEAN_END_POINT   { 100, 60, (Z_MIN_POS + 1) }
</span>
  <span class="c1">// Circular pattern radius</span>
  <span class="cp">#define NOZZLE_CLEAN_CIRCLE_RADIUS 6.5
</span>  <span class="c1">// Circular pattern circle fragments number</span>
  <span class="cp">#define NOZZLE_CLEAN_CIRCLE_FN 10
</span>  <span class="c1">// Middle point of circle</span>
  <span class="cp">#define NOZZLE_CLEAN_CIRCLE_MIDDLE NOZZLE_CLEAN_START_POINT
</span>
  <span class="c1">// Move the nozzle to the initial position after cleaning</span>
  <span class="cp">#define NOZZLE_CLEAN_GOBACK
</span>
  <span class="c1">// Enable for a purge/clean station that's always at the gantry height (thus no Z move)</span>
  <span class="c1">//#define NOZZLE_CLEAN_NO_Z</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Adds the <a href="/docs/gcode/G012.html"><code class="language-plaintext highlighter-rouge">G12</code></a> command to perform a nozzle cleaning process. See <code class="language-plaintext highlighter-rouge">Configuration.h</code> for additional configuration options.</p> <h3 id="print-job-timer">Print Job Timer</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define PRINTJOB_TIMER_AUTOSTART
</span></code></pre></div></div> <p>Automatically start and stop the print job timer when <a href="/docs/gcode/M104.html"><code class="language-plaintext highlighter-rouge">M104</code></a>/<a href="/docs/gcode/M109.html"><code class="language-plaintext highlighter-rouge">M109</code></a>/<a href="/docs/gcode/M190.html"><code class="language-plaintext highlighter-rouge">M190</code></a> commands are received. Also adds the following commands to control the timer:</p> <ul> <li> <a href="/docs/gcode/M075.html"><code class="language-plaintext highlighter-rouge">M75</code></a> - Start the print job timer.</li> <li> <a href="/docs/gcode/M076.html"><code class="language-plaintext highlighter-rouge">M76</code></a> - Pause the print job timer.</li> <li> <a href="/docs/gcode/M077.html"><code class="language-plaintext highlighter-rouge">M77</code></a> - Stop the print job timer.</li> </ul> <h3 id="print-counter">Print Counter</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PRINTCOUNTER</span>
</code></pre></div></div> <p>When enabled Marlin will keep track of some print statistics such as:</p> <ul> <li>Total print jobs</li> <li>Total successful print jobs</li> <li>Total failed print jobs</li> <li>Total time printing</li> </ul> <p>This information can be viewed by the <a href="/docs/gcode/M078.html"><code class="language-plaintext highlighter-rouge">M78</code></a> command.</p> <h2 id="user-interface-language">User Interface Language</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define LCD_LANGUAGE en
</span></code></pre></div></div> <p>Choose your preferred language for the LCD controller here. Supported languages include:</p> <table> <thead> <tr> <th>Code</th> <th>Language</th> <th> </th> <th>Code</th> <th>Language</th> <th> </th> <th>Code</th> <th>Language</th> </tr> </thead> <tbody> <tr> <td>en</td> <td>English (Default)</td> <td> </td> <td>an</td> <td>Aragonese</td> <td> </td> <td>bg</td> <td>Bulgarian</td> </tr> <tr> <td>ca</td> <td>Catalan</td> <td> </td> <td>cz</td> <td>Czech</td> <td> </td> <td>da</td> <td>Danish</td> </tr> <tr> <td>de</td> <td>German</td> <td> </td> <td>el</td> <td>Greek</td> <td> </td> <td>el_CY</td> <td>Greek (Cyprus)</td> </tr> <tr> <td>el_gr</td> <td>Greek (Greece)</td> <td> </td> <td>es</td> <td>Spanish</td> <td> </td> <td>eu</td> <td>Basque-Euskera</td> </tr> <tr> <td>fi</td> <td>Finnish</td> <td> </td> <td>fr</td> <td>French</td> <td> </td> <td>fr_na</td> <td>French (no accent)</td> </tr> <tr> <td>gl</td> <td>Galician</td> <td> </td> <td>hr</td> <td>Croatian (Hrvatski)</td> <td> </td> <td>hu</td> <td>Hungarian / Magyar</td> </tr> <tr> <td>it</td> <td>Italian</td> <td> </td> <td>jp_kana</td> <td>Japanese (Kana)</td> <td> </td> <td>ko_KR</td> <td>Korean</td> </tr> <tr> <td>nl</td> <td>Dutch</td> <td> </td> <td>pl</td> <td>Polish</td> <td> </td> <td>pt</td> <td>Portuguese</td> </tr> <tr> <td>pt_br</td> <td>Portuguese (Brazil)</td> <td> </td> <td>ro</td> <td>Romanian</td> <td> </td> <td>ru</td> <td>Russian</td> </tr> <tr> <td>sk</td> <td>Slovak</td> <td> </td> <td>sv</td> <td>Swedish</td> <td> </td> <td>tr</td> <td>Turkish</td> </tr> <tr> <td>uk</td> <td>Ukrainian</td> <td> </td> <td>vi</td> <td>Vietnamese</td> <td> </td> <td>zh_CN</td> <td>Simplified Chinese</td> </tr> <tr> <td>zh_TW</td> <td>Traditional Chinese</td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> </tbody> </table> <p>See <code class="language-plaintext highlighter-rouge">language.h</code> for the latest list of supported languages and their international language codes.</p> <h3 id="hd44780-character-set">HD44780 Character Set</h3> <p><img src="/assets/images/config/lcd-charset.png" alt="LCD Charset" class="floater framed"></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define DISPLAY_CHARSET_HD44780 JAPANESE
</span></code></pre></div></div> <p>This option applies only to character-based displays. Character-based displays (based on the Hitachi HD44780) provide an ASCII character set plus one of the following language extensions:</p> <ul> <li> <code class="language-plaintext highlighter-rouge">JAPANESE</code> … the most common</li> <li> <code class="language-plaintext highlighter-rouge">WESTERN</code> …. with more accented characters</li> <li> <code class="language-plaintext highlighter-rouge">CYRILLIC</code> … for the Russian language</li> </ul> <p>To determine the language extension installed on your controller:</p> <ul> <li>Compile and upload with <code class="language-plaintext highlighter-rouge">LCD_LANGUAGE</code> set to ‘test’</li> <li>Click the controller to view the LCD menu</li> <li>The LCD will display Japanese, Western, or Cyrillic text</li> </ul> <p>See <a href="/docs/development/lcd_language.html">LCD Language System</a> for in-depth info on how the Marlin display system currently works.</p> <p><img src="/assets/images/config/sdcard.jpg" alt="SD Card" class="floater"></p> <h3 id="lcd_info_screen_style">LCD_INFO_SCREEN_STYLE</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define LCD_INFO_SCREEN_STYLE 0
</span></code></pre></div></div> <p>0 for classic; 1 for Průša info screen style.</p> <h2 id="sd-card">SD Card</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SDSUPPORT</span>
</code></pre></div></div> <p>Enable to use SD printing, whether as part of an LCD controller or as a standalone SDCard slot.</p> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>The <code class="language-plaintext highlighter-rouge">SDSUPPORT</code> option must be enabled or SD printing will not be supported. It is no longer enabled automatically for LCD controllers with built-in SDCard slot.</p> </div> </div> </div> <h3 id="spi-speed">SPI Speed</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SPI_SPEED SPI_HALF_SPEED</span>
<span class="c1">//#define SPI_SPEED SPI_QUARTER_SPEED</span>
<span class="c1">//#define SPI_SPEED SPI_EIGHTH_SPEED</span>
</code></pre></div></div> <p>Uncomment ONE of these options to use a slower SPI transfer speed. This is usually required if you’re getting volume init errors.</p> <h3 id="enable-crc">Enable CRC</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SD_CHECK_AND_RETRY</span>
</code></pre></div></div> <p>Use CRC checks and retries on the SD communication.</p> <h2 id="lcd-menu-items">LCD Menu Items</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define NO_LCD_MENUS</span>
<span class="c1">//#define SLIM_LCD_MENUS</span>
</code></pre></div></div> <p>Disable all menus and only display the Status Screen with <code class="language-plaintext highlighter-rouge">NO_LCD_MENUS</code>, or just remove some extraneous menu items to recover space with <code class="language-plaintext highlighter-rouge">SLIM_LCD_MENUS</code>.</p> <h2 id="encoder">Encoder</h2> <p><img src="/assets/images/config/encoder.jpg" alt="Encoder Knob" class="floater"></p> <h3 id="encoder-resolution">Encoder Resolution</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define ENCODER_PULSES_PER_STEP 1</span>
</code></pre></div></div> <p>This option overrides the default number of encoder pulses needed to produce one step. Should be increased for high-resolution encoders.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define ENCODER_STEPS_PER_MENU_ITEM 5</span>
</code></pre></div></div> <p>Use this option to override the number of step signals required to move between next/prev menu items.</p> <h3 id="encoder-direction">Encoder Direction</h3> <p>Test your encoder’s behavior first with both of the following options disabled.</p> <ul> <li>Reversed Value Edit and Menu Nav? Enable <code class="language-plaintext highlighter-rouge">REVERSE_ENCODER_DIRECTION</code>.</li> <li>Reversed Menu Navigation only? Enable <code class="language-plaintext highlighter-rouge">REVERSE_MENU_DIRECTION</code>.</li> <li>Reversed Value Editing only? Enable <em>BOTH</em> options.</li> </ul> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define REVERSE_ENCODER_DIRECTION</span>
</code></pre></div></div> <p>This option reverses the encoder direction everywhere. Set if CLOCKWISE causes values to DECREASE.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define REVERSE_MENU_DIRECTION</span>
</code></pre></div></div> <p>This option reverses the encoder direction for navigating LCD menus. If CLOCKWISE normally moves DOWN this makes it go UP. If CLOCKWISE normally moves UP this makes it go DOWN.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define REVERSE_SELECT_DIRECTION</span>
</code></pre></div></div> <p>This option reverses the encoder direction for Select Screen If CLOCKWISE normally moves LEFT this makes it go RIGHT. If CLOCKWISE normally moves RIGHT this makes it go LEFT.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define INDIVIDUAL_AXIS_HOMING_MENU</span>
</code></pre></div></div> <p>Add individual axis homing items (Home X, Home Y, and Home Z) to the LCD menu.</p> <p><img src="/assets/images/config/piezo.png" alt="Piezo" class="floater"></p> <h2 id="speaker">Speaker</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SPEAKER</span>
</code></pre></div></div> <p>By default Marlin assumes you have a buzzer with a fixed frequency. If you have a speaker that can produce tones, enable it here.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define LCD_FEEDBACK_FREQUENCY_DURATION_MS 100</span>
<span class="c1">//#define LCD_FEEDBACK_FREQUENCY_HZ 1000</span>
</code></pre></div></div> <p>The duration and frequency for the UI feedback sound. Set these to 0 to disable audio feedback in the LCD menus. Test audio output with the G-code <code class="language-plaintext highlighter-rouge">M300 S&lt;frequency Hz&gt; P&lt;duration ms&gt;</code></p> <h2 id="lcd-controller">LCD Controller</h2> <p><img src="/assets/images/config/controllers.png" alt="LCD Controllers" class="floater"></p> <p>Marlin includes support for several controllers. The two most popular controllers supported by Marlin are:</p> <ul> <li> <code class="language-plaintext highlighter-rouge">REPRAP_DISCOUNT_SMART_CONTROLLER</code> A 20 x 4 character-based LCD controller with click-wheel.</li> <li> <code class="language-plaintext highlighter-rouge">REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER</code> A monochrome 128 x 64 pixel-based LCD controller with click-wheel. Able to display simple bitmap graphics and up to 5 lines of text.</li> </ul> <p>Most other LCD controllers are variants of these. Enable just one of the following options for your specific controller:</p> <h3 id="character-lcds">Character LCDs</h3> <p>Option|Description ——|———– <code class="language-plaintext highlighter-rouge">ULTIMAKERCONTROLLER</code>|The original Ultimaker Controller. <code class="language-plaintext highlighter-rouge">ULTIPANEL</code>|<a href="//www.thingiverse.com/thing:15081">ULTIPANEL</a> as seen on Thingiverse. <code class="language-plaintext highlighter-rouge">PANEL_ONE</code>|<a href="//reprap.org/wiki/PanelOne">PanelOne from T3P3</a> (via RAMPS 1.4 AUX2/AUX3). A variant of <code class="language-plaintext highlighter-rouge">ULTIMAKERCONTROLLER</code>. <code class="language-plaintext highlighter-rouge">REPRAP_DISCOUNT_SMART_CONTROLLER</code>|<a href="//reprap.org/wiki/RepRapDiscount_Smart_Controller">RepRapDiscount Smart Controller</a>. Usually sold with a white PCB. <code class="language-plaintext highlighter-rouge">G3D_PANEL</code>|<a href="//reprap.org/wiki/RAMPS_1.3/1.4_GADGETS3D_Shield_with_Panel">Gadgets3D G3D LCD/SD Controller</a>. Usually sold with a blue PCB. <code class="language-plaintext highlighter-rouge">RIGIDBOT_PANEL</code>|<a href="//www.inventapart.com/">RigidBot Panel V1.0</a>. <code class="language-plaintext highlighter-rouge">ANET_KEYPAD_LCD</code>|<a href="//www.anet3d.com/prod_view.aspx?TypeId=10&amp;Id=178">Anet Keypad LCD</a> for the Anet A3</p> <h3 id="graphical-lcds">Graphical LCDs</h3> <p>Option|Description ——|———– <code class="language-plaintext highlighter-rouge">CARTESIO_UI</code>|<a href="//mauk.cc/webshop/cartesio-shop/electronics/user-interface">Cartesio UI</a>. <code class="language-plaintext highlighter-rouge">MAKRPANEL</code>|<a href="//reprap.org/wiki/MaKr3d_MaKrPanel">MaKr3d Makr-Panel</a> with graphic controller and SD support. <code class="language-plaintext highlighter-rouge">REPRAPWORLD_GRAPHICAL_LCD</code>|<a href="//reprapworld.com/?products_details&amp;products_id/1218">ReprapWorld Graphical LCD</a>. <code class="language-plaintext highlighter-rouge">VIKI2</code>|<a href="//panucatt.com">Panucatt Devices</a> <a href="//panucatt.com">Viki 2.0</a>. <code class="language-plaintext highlighter-rouge">miniVIKI</code>|<a href="//panucatt.com">mini Viki with Graphic LCD</a>. <code class="language-plaintext highlighter-rouge">ELB_FULL_GRAPHIC_CONTROLLER</code>|<a href="//github.com/eboston/Adafruit-ST7565-Full-Graphic-Controller/">Adafruit ST7565 Full Graphic Controller</a>. <code class="language-plaintext highlighter-rouge">REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER</code>|<a href="//reprap.org/wiki/RepRapDiscount_Full_Graphic_Smart_Controller">RepRapDiscount Full Graphic Smart Controller</a>. <code class="language-plaintext highlighter-rouge">MINIPANEL</code>|<a href="//reprap.org/wiki/Mini_panel">MakerLab Mini Panel</a> with graphic controller and SD support. <code class="language-plaintext highlighter-rouge">BQ_LCD_SMART_CONTROLLER</code>|BQ LCD Smart Controller shipped with the BQ Hephestos 2 and Witbox 2. <code class="language-plaintext highlighter-rouge">ANET_FULL_GRAPHICS_LCD</code>|<a href="//www.anet3d.com/prod_view.aspx?TypeId=10&amp;Id=178">Anet Full Graphics LCD</a> for the Anet A3</p> <h3 id="keypads">Keypads</h3> <p>Option|Description ——|———– <code class="language-plaintext highlighter-rouge">REPRAPWORLD_KEYPAD</code>|<a href="//reprapworld.com/?products_details&amp;products_id=202&amp;cPath=1591_1626">RepRapWorld Keypad v1.1</a> Use <code class="language-plaintext highlighter-rouge">REPRAPWORLD_KEYPAD_MOVE_STEP</code> to set how much the robot should move on each keypress (<em>e.g.,</em> 10mm per click).</p> <h3 id="i2c-character-lcds">I2C Character LCDs</h3> <p>These controllers all require the <a href="//github.com/kiyoshigawa/LiquidCrystal_I2C">LiquidCrystal_I2C library</a>.</p> <table> <thead> <tr> <th>Option</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">RA_CONTROL_PANEL</code></td> <td>Elefu RA Board Control Panel</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">LCD_I2C_SAINSMART_YWROBOT</code></td> <td>Sainsmart <a href="//henrysbench.capnfatz.com/henrys-bench/arduino-displays/ywrobot-lcm1602-iic-v1-lcd-arduino-tutorial/">YWRobot LCM1602 LCD Display</a>.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">LCM1602</code></td> <td>Generic LCM1602 LCD adapter</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">LCD_I2C_PANELOLU2</code></td> <td>PANELOLU2 LCD with status LEDs, separate encoder and click inputs. The click input can either be directly connected to a pin (if <code class="language-plaintext highlighter-rouge">BTN_ENC</code> is defined) or read through I2C (with <code class="language-plaintext highlighter-rouge">BTN_ENC</code> undefined). Requires <a href="//github.com/lincomatic/LiquidTWI2">LiquidTWI2 library</a> v1.2.3 or later.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">LCD_I2C_VIKI</code></td> <td>Panucatt VIKI LCD with status LEDs, integrated click &amp; L/R/U/D buttons, separate encoder inputs.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SAV_3DLCD</code></td> <td>Shift register panels. <a href="//github.com/fmalpartida/New-LiquidCrystal">2 wire Non-latching LCD SR</a>. See <a href="//reprap.org/wiki/SAV_3D_LCD">LCD configuration</a>.</td> </tr> </tbody> </table> <h3 id="i2c-graphical-lcds">I2C Graphical LCDs</h3> <p>These controllers all require the <a href="//github.com/kiyoshigawa/LiquidCrystal_I2C">LiquidCrystal_I2C library</a>.</p> <table> <thead> <tr> <th>Option</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">U8GLIB_SSD1306</code></td> <td>SSD1306 OLED full graphics generic display.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SAV_3DGLCD</code></td> <td>SAV OLED LCD module support using either SSD1306 or SH1106 based LCD modules.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">OLED_PANEL_TINYBOY2</code></td> <td>TinyBoy2 128x64 OLED / Encoder Panel</td> </tr> </tbody> </table> <h3 id="fan-pwm">Fan PWM</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define FAST_PWM_FAN</span>
</code></pre></div></div> <p>Increase the FAN PWM frequency. Removes the PWM noise but increases heating in the FET/Arduino.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define FAN_SOFT_PWM</span>
</code></pre></div></div> <p>Use software PWM to drive the fan, as with the heaters. This uses a very low frequency which is not as annoying as with the hardware PWM. On the other hand, if this frequency is too low, you should also increment <code class="language-plaintext highlighter-rouge">SOFT_PWM_SCALE</code>.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SOFT_PWM_SCALE 0
</span></code></pre></div></div> <p>Incrementing this by 1 will double the software PWM frequency, affecting heaters (and the fan if <code class="language-plaintext highlighter-rouge">FAN_SOFT_PWM</code> is enabled). However, control resolution will be halved for each increment; at zero value, there are 128 effective control positions.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SOFT_PWM_DITHER</span>
</code></pre></div></div> <p>If <code class="language-plaintext highlighter-rouge">SOFT_PWM_SCALE</code> is set to a value higher than 0, dithering can be used to mitigate the associated resolution loss. If enabled, some of the PWM cycles are stretched so on average the desired duty cycle is attained.</p> <h3 id="temperature-status-leds">Temperature Status LEDs</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define TEMP_STAT_LEDS</span>
</code></pre></div></div> <p>Temperature status LEDs that display the hotend and bed temperature. If all hotend and bed temperature set-point are &lt; 54C then the BLUE led is on. Otherwise the RED led is on. There is 1C hysteresis.</p> <h3 id="photo-pin">Photo Pin</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PHOTOGRAPH_PIN     23</span>
</code></pre></div></div> <p><a href="/docs/gcode/M240.html"><code class="language-plaintext highlighter-rouge">M240</code></a> triggers a camera by emulating a Canon RC-1 Remote Data as described on <a href="//www.doc-diy.net/photo/rc-1_hacked/">this site</a>.</p> <h3 id="skeinforge-arc-fix">SkeinForge Arc Fix</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SF_ARC_FIX</span>
</code></pre></div></div> <p>Files sliced with SkeinForge contain the wrong arc G-codes when using “Arc Point” as fillet procedure. This option works around that bug, but otherwise should be left off.</p> <h2 id="extra-features">Extra Features</h2> <h3 id="fast-pwm-fan">Fast PWM Fan</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define FAST_PWM_FAN</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">FAST_PWM_FAN</code> increases the FAN PWM frequency. The frequency and scaling can be adjusted in <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code>.</p> <h3 id="fan-software-pwm">Fan Software PWM</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define FAN_SOFT_PWM</span>
<span class="cp">#define SOFT_PWM_SCALE 0
</span><span class="c1">//#define SOFT_PWM_DITHER</span>
</code></pre></div></div> <p>Use software PWM to drive the fan. This uses a very low frequency which is not as annoying as with the hardware PWM. Increase <code class="language-plaintext highlighter-rouge">SOFT_PWM_SCALE</code> if the frequency is too low. If experiencing resolution loss when <code class="language-plaintext highlighter-rouge">SOFT_PWM_SCALE</code> is set to a value greater than 0, <code class="language-plaintext highlighter-rouge">SOFT_PWM_DITHER</code> can be used to mitigate it. If enabled.</p> <h3 id="temperature-status-leds-1">Temperature Status LEDs</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define TEMP_STAT_LEDS</span>
</code></pre></div></div> <p>Adds a simple temperature status indicators using LEDs.</p> <h3 id="skeinforge-arc-g-code-correction">SkeinForge ARC G-code correction</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SF_ARC_FIX</span>
</code></pre></div></div> <p>Correct the wrong arc g-codes sent by SkeinForge when using Arc Point as fillet procedure</p> <h3 id="paste-extruder">Paste Extruder</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Support for the BariCUDA Paste Extruder.</span>
<span class="c1">//#define BARICUDA</span>
</code></pre></div></div> <p>Marlin includes support for the <a href="//www.thingiverse.com/thing:26343">Baricuda Extruder for 3D Printing Sugar and Chocolate</a> also <a href="//www.github.com/jmil/BariCUDA">hosted on GitHub</a>. The feature adds the codes <a href="/docs/gcode/M126.html"><code class="language-plaintext highlighter-rouge">M126</code></a>, <a href="/docs/gcode/M127.html"><code class="language-plaintext highlighter-rouge">M127</code></a>, <a href="/docs/gcode/M128.html"><code class="language-plaintext highlighter-rouge">M128</code></a>, and <a href="/docs/gcode/M129.html"><code class="language-plaintext highlighter-rouge">M129</code></a> for controlling the pump and valve of the Baricuda.</p> <p><a href="//www.instructables.com/id/3D-Printer-RGB-LED-Feedback/" target="_blank"><img src="/assets/images/config/led-lights.jpg" alt="LED Lights" class="floater framed"></a></p> <h3 id="rgb-color-leds">RGB Color LEDs</h3> <p>Marlin currently supplies two options for RGB-addressable color indicators. In both cases the color is set using <a href="/docs/gcode/M150.html"><code class="language-plaintext highlighter-rouge">M150</code></a> <code class="language-plaintext highlighter-rouge">Rr Ug Bb</code> to specify RGB components from 0 to 255.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//define BlinkM/CyzRgb Support</span>
<span class="c1">//#define BLINKM</span>
</code></pre></div></div> <p>The <a href="//thingm.com/products/blinkm/">BLINKM board</a> supplies the backlighting for some LCD controllers. Its color is set using I2C messages.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//define PCA9632 PWM LED driver Support</span>
<span class="c1">//#define PCA9632</span>
</code></pre></div></div> <p>The <a href="//www.digchip.com/datasheets/3286493-pca9632.html">Philips PCA9632</a> is a common PWM LED driver, controlled (like BlinkM) using I2C.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Support for PCA9533 PWM LED driver</span>
<span class="c1">//#define PCA9533</span>
</code></pre></div></div> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define RGB_LED</span>
<span class="c1">//#define RGBW_LED</span>
<span class="cp">#if EITHER(RGB_LED, RGBW_LED)
</span>  <span class="c1">//#define RGB_LED_R_PIN 34</span>
  <span class="c1">//#define RGB_LED_G_PIN 43</span>
  <span class="c1">//#define RGB_LED_B_PIN 35</span>
  <span class="c1">//#define RGB_LED_W_PIN -1</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Enable support for an RGB(W) LED connected to 5 V digital pins, or an RGB(W) Strip connected to MOSFETs controlled by digital pins. An inexpensive RGB LED can be used simply by assigning digital pins for each component. If the pins are able to do hardware PWM then a wide range of colors will be available. With simple digital pins only 7 colors are possible.</p> <p>Adds the <a href="/docs/gcode/M150.html"><code class="language-plaintext highlighter-rouge">M150</code></a> command to set the LED (or LED strip) color. If pins are PWM capable (<em>e.g.,</em> 4, 5, 6, 11) then a range of luminance values can be set from 0 to 255.</p> <div class="container-fluid"> <div class="row alert alert-warning custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-exclamation-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>LED Strips require a MOFSET Chip between PWM lines and LEDs, as the Arduino cannot handle the current the LEDs will require. Failure to follow this precaution can destroy your Arduino!</p> </div> </div> </div> <h4 id="adafruit-neopixel-led-driver">Adafruit NeoPixel LED Driver</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define NEOPIXEL_LED</span>
<span class="cp">#if ENABLED(NEOPIXEL_LED)
</span>  <span class="cp">#define NEOPIXEL_TYPE   NEO_GRBW // NEO_GRBW / NEO_GRB - four/three channel driver type (defined in Adafruit_NeoPixel.h)
</span>  <span class="cp">#define NEOPIXEL_PIN     4       // LED driving pin
</span>  <span class="c1">//#define NEOPIXEL2_TYPE NEOPIXEL_TYPE</span>
  <span class="c1">//#define NEOPIXEL2_PIN    5</span>
  <span class="cp">#define NEOPIXEL_PIXELS 30       // Number of LEDs in the strip, larger of 2 strips if 2 NeoPixel strips are used
</span>  <span class="cp">#define NEOPIXEL_IS_SEQUENTIAL   // Sequential display for temperature change - LED by LED. Disable to change all LEDs at once.
</span>  <span class="cp">#define NEOPIXEL_BRIGHTNESS 127  // Initial brightness (0-255)
</span>  <span class="c1">//#define NEOPIXEL_STARTUP_TEST  // Cycle through colors at startup</span>
  <span class="c1">//#define NEOPIXEL_BKGD_LED_INDEX  0               // Index of the LED to use</span>
  <span class="c1">//#define NEOPIXEL_BKGD_COLOR { 255, 255, 255, 0 } // R, G, B, W</span>
<span class="cp">#endif
</span></code></pre></div></div> <p><a href="//www.adafruit.com/category/168">NEOPIXELS</a></p> <h4 id="printer-event-leds">Printer Event LEDs</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ANY(BLINKM, RGB_LED, RGBW_LED, PCA9632, PCA9533, NEOPIXEL_LED)
</span>  <span class="cp">#define PRINTER_EVENT_LEDS
#endif
</span></code></pre></div></div> <p>This option causes the printer to give status feedback on the installed color LED, BLINKM, or PCA9632:</p> <ul> <li>Gradually change from blue to violet as the heated bed gets to target temp.</li> <li>Gradually change from violet to red as the hotend gets to temperature.</li> <li>Change to white to illuminate work surface.</li> <li>Change to green once print has finished.</li> <li>Turn off after the print has finished and the user has pushed a button.</li> </ul> <h3 id="servos">Servos</h3> <p><img src="/assets/images/config/servo.png" alt="Servo" class="floater"></p> <h4 id="number-of-servos">Number of Servos</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define NUM_SERVOS 3 // Servo index starts with 0 for M280 command</span>
</code></pre></div></div> <p>The total number of servos to enable for use. One common application for a servo is a Z bed probe consisting of an endstop switch mounted on a rotating arm. To use one of the servo connectors for this type of probe, set <code class="language-plaintext highlighter-rouge">Z_ENDSTOP_SERVO_NR</code> in the probe options above.</p> <h4 id="servo-deactivation">Servo Deactivation</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SERVO_DELAY 300
</span></code></pre></div></div> <p>Delay (in microseconds) before the next move will start, to give the servo time to reach its target angle. 300ms is a good value but you can try less delay. Specify a large enough delay so the servo has enough time to complete a full motion before deactivation.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define DEACTIVATE_SERVOS_AFTER_MOVE</span>
</code></pre></div></div> <p>With this option servos are powered only during movement, then turned off to prevent jitter. We recommend enabling this option to keep electrical noise from active servos from interfering with other components. The high amperage generated by extruder motor wiring during movement can also induce movement in active servos. Leave this option enabled to avoid all such servo-related troubles.</p> <h1 id="configuration_advh"><code class="language-plaintext highlighter-rouge">Configuration_adv.h</code></h1> <h2 id="temperature-options">Temperature Options</h2> <h3 id="custom-thermistor-1000-parameters">Custom Thermistor 1000 Parameters</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if TEMP_SENSOR_0 == 1000
</span>  <span class="cp">#define HOTEND0_PULLUP_RESISTOR_OHMS 4700    // Pullup resistor
</span>  <span class="cp">#define HOTEND0_RESISTANCE_25C_OHMS  100000  // Resistance at 25C
</span>  <span class="cp">#define HOTEND0_BETA                 3950    // Beta value
#endif
</span>
<span class="cp">#if TEMP_SENSOR_1 == 1000
</span>  <span class="cp">#define HOTEND1_PULLUP_RESISTOR_OHMS 4700    // Pullup resistor
</span>  <span class="cp">#define HOTEND1_RESISTANCE_25C_OHMS  100000  // Resistance at 25C
</span>  <span class="cp">#define HOTEND1_BETA                 3950    // Beta value
#endif
</span>
<span class="cp">#if TEMP_SENSOR_2 == 1000
</span>  <span class="cp">#define HOTEND2_PULLUP_RESISTOR_OHMS 4700    // Pullup resistor
</span>  <span class="cp">#define HOTEND2_RESISTANCE_25C_OHMS  100000  // Resistance at 25C
</span>  <span class="cp">#define HOTEND2_BETA                 3950    // Beta value
#endif
</span>
<span class="cp">#if TEMP_SENSOR_3 == 1000
</span>  <span class="cp">#define HOTEND3_PULLUP_RESISTOR_OHMS 4700    // Pullup resistor
</span>  <span class="cp">#define HOTEND3_RESISTANCE_25C_OHMS  100000  // Resistance at 25C
</span>  <span class="cp">#define HOTEND3_BETA                 3950    // Beta value
#endif
</span>
<span class="cp">#if TEMP_SENSOR_4 == 1000
</span>  <span class="cp">#define HOTEND4_PULLUP_RESISTOR_OHMS 4700    // Pullup resistor
</span>  <span class="cp">#define HOTEND4_RESISTANCE_25C_OHMS  100000  // Resistance at 25C
</span>  <span class="cp">#define HOTEND4_BETA                 3950    // Beta value
#endif
</span>
<span class="cp">#if TEMP_SENSOR_5 == 1000
</span>  <span class="cp">#define HOTEND5_PULLUP_RESISTOR_OHMS 4700    // Pullup resistor
</span>  <span class="cp">#define HOTEND5_RESISTANCE_25C_OHMS  100000  // Resistance at 25C
</span>  <span class="cp">#define HOTEND5_BETA                 3950    // Beta value
#endif
</span>
<span class="cp">#if TEMP_SENSOR_BED == 1000
</span>  <span class="cp">#define BED_PULLUP_RESISTOR_OHMS     4700    // Pullup resistor
</span>  <span class="cp">#define BED_RESISTANCE_25C_OHMS      100000  // Resistance at 25C
</span>  <span class="cp">#define BED_BETA                     3950    // Beta value
#endif
</span>
<span class="cp">#if TEMP_SENSOR_CHAMBER == 1000
</span>  <span class="cp">#define CHAMBER_PULLUP_RESISTOR_OHMS 4700    // Pullup resistor
</span>  <span class="cp">#define CHAMBER_RESISTANCE_25C_OHMS  100000  // Resistance at 25C
</span>  <span class="cp">#define CHAMBER_BETA                 3950    // Beta value
#endif
</span></code></pre></div></div> <p>Marlin 2.0 allows for custom temperature sensors.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//</span>
<span class="c1">// Hephestos 2 24V heated bed upgrade kit.</span>
<span class="c1">// https://store.bq.com/en/heated-bed-kit-hephestos2</span>
<span class="c1">//</span>
<span class="c1">//#define HEPHESTOS2_HEATED_BED_KIT</span>
<span class="cp">#if ENABLED(HEPHESTOS2_HEATED_BED_KIT)
</span>  <span class="cp">#undef TEMP_SENSOR_BED
</span>  <span class="cp">#define TEMP_SENSOR_BED 70
</span>  <span class="cp">#define HEATER_BED_INVERTING true
#endif
</span></code></pre></div></div> <p>Enables the use of Hephestos 2 24V heated bed.</p> <h3 id="heated-chamber">Heated Chamber</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if TEMP_SENSOR_CHAMBER
</span>  <span class="cp">#define CHAMBER_MINTEMP             5
</span>  <span class="cp">#define CHAMBER_MAXTEMP            60
</span>  <span class="cp">#define TEMP_CHAMBER_HYSTERESIS     1   // (°C) Temperature proximity considered "close enough" to the target
</span>  <span class="c1">//#define CHAMBER_LIMIT_SWITCHING</span>
  <span class="c1">//#define HEATER_CHAMBER_PIN       44   // Chamber heater on/off pin</span>
  <span class="c1">//#define HEATER_CHAMBER_INVERTING false</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>A heated chamber can greatly improve print quality. Check the pins file of your board for <code class="language-plaintext highlighter-rouge">TEMP_CHAMBER_PIN</code>. The spare extruder and hotend temperature pins can be used for <code class="language-plaintext highlighter-rouge">HEATER_CHAMBER_PIN</code> and <code class="language-plaintext highlighter-rouge">TEMP_CHAMBER_PIN</code>.</p> <h3 id="bang-bang-bed-heating">Bang-Bang Bed Heating</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if DISABLED(PIDTEMPBED)
</span>  <span class="cp">#define BED_CHECK_INTERVAL 5000 // ms between checks in bang-bang control
</span>  <span class="cp">#if ENABLED(BED_LIMIT_SWITCHING)
</span>    <span class="cp">#define BED_HYSTERESIS 2 // Only disable heating if T&gt;target+BED_HYSTERESIS and enable heating if T&gt;target-BED_HYSTERESIS
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>These sub-options can be used when the bed isn’t using PID heating. A “bang-bang” heating method will be used instead, simply checking against current temperature at regular intervals.</p> <h3 id="thermal-protection-settings">Thermal Protection Settings</h3> <h4 id="hotend-thermal-protection">Hotend Thermal Protection</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(THERMAL_PROTECTION_HOTENDS)
</span>  <span class="cp">#define THERMAL_PROTECTION_PERIOD 40        // Seconds
</span>  <span class="cp">#define THERMAL_PROTECTION_HYSTERESIS 4     // Degrees Celsius
</span>  <span class="cp">#define WATCH_TEMP_PERIOD 20                // Seconds
</span>  <span class="cp">#define WATCH_TEMP_INCREASE 2               // Degrees Celsius
#endif
</span></code></pre></div></div> <p>Hot end thermal protection can be tuned with these sub-options.</p> <p>The first two options deal with continuous thermal protection during an entire print job.</p> <p>The second set of options applies to changes in target temperature. Whenever an <a href="/docs/gcode/M104.html"><code class="language-plaintext highlighter-rouge">M104</code></a> or <a href="/docs/gcode/M109.html"><code class="language-plaintext highlighter-rouge">M109</code></a> increases the target temperature the firmware will wait for the <code class="language-plaintext highlighter-rouge">WATCH_TEMP_PERIOD</code> to expire, and if the temperature hasn’t increased by <code class="language-plaintext highlighter-rouge">WATCH_TEMP_INCREASE</code> degrees, the machine is halted, requiring a hard reset. This test restarts with any <a href="/docs/gcode/M104.html"><code class="language-plaintext highlighter-rouge">M104</code></a>/<a href="/docs/gcode/M109.html"><code class="language-plaintext highlighter-rouge">M109</code></a>, but only if the current temperature is far enough below the target for a reliable test.</p> <p>If you get false positives for “Heating failed” increase <code class="language-plaintext highlighter-rouge">WATCH_TEMP_PERIOD</code> and/or decrease <code class="language-plaintext highlighter-rouge">WATCH_TEMP_INCREASE</code>. (<code class="language-plaintext highlighter-rouge">WATCH_TEMP_INCREASE</code> should not be set below 2.)</p> <h4 id="bed-thermal-protection">Bed Thermal Protection</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(THERMAL_PROTECTION_BED)
</span>  <span class="cp">#define THERMAL_PROTECTION_BED_PERIOD 20    // Seconds
</span>  <span class="cp">#define THERMAL_PROTECTION_BED_HYSTERESIS 2 // Degrees Celsius
</span>  <span class="cp">#define WATCH_BED_TEMP_PERIOD 60            // Seconds
</span>  <span class="cp">#define WATCH_BED_TEMP_INCREASE 2           // Degrees Celsius
#endif
</span></code></pre></div></div> <p>Heated bed thermal protection can be tuned with these sub-options.</p> <p>The first two options deal with continuous thermal protection during an entire print job.</p> <p>The second set of options applies to changes in target temperature. Whenever an <a href="/docs/gcode/M140.html"><code class="language-plaintext highlighter-rouge">M140</code></a> or <a href="/docs/gcode/M190.html"><code class="language-plaintext highlighter-rouge">M190</code></a> increases the target temperature the firmware will wait for the <code class="language-plaintext highlighter-rouge">WATCH_BED_TEMP_PERIOD</code> to expire, and if the temperature hasn’t increased by <code class="language-plaintext highlighter-rouge">WATCH_BED_TEMP_INCREASE</code> degrees, the machine is halted, requiring a hard reset. This test restarts with any <a href="/docs/gcode/M140.html"><code class="language-plaintext highlighter-rouge">M140</code></a>/<a href="/docs/gcode/M190.html"><code class="language-plaintext highlighter-rouge">M190</code></a>, but only if the current temperature is far enough below the target for a reliable test.</p> <p>If you get too many “Heating failed” errors, increase <code class="language-plaintext highlighter-rouge">WATCH_BED_TEMP_PERIOD</code> and/or decrease <code class="language-plaintext highlighter-rouge">WATCH_BED_TEMP_INCREASE</code>. (<code class="language-plaintext highlighter-rouge">WATCH_BED_TEMP_INCREASE</code> should not be set below 2.)</p> <h4 id="heated-chamber-thermal-protection">Heated Chamber Thermal Protection</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(THERMAL_PROTECTION_CHAMBER)
</span>  <span class="cp">#define THERMAL_PROTECTION_CHAMBER_PERIOD 20    // Seconds
</span>  <span class="cp">#define THERMAL_PROTECTION_CHAMBER_HYSTERESIS 2 // Degrees Celsius
</span>  <span class="cp">#define WATCH_CHAMBER_TEMP_PERIOD 60            // Seconds
</span>  <span class="cp">#define WATCH_CHAMBER_TEMP_INCREASE 2           // Degrees Celsius
#endif
</span></code></pre></div></div> <p>Similar to the description for the Bed Thermal Protection above. Use <a href="/docs/gcode/M141.html"><code class="language-plaintext highlighter-rouge">M141</code></a>](/docs/gcode/M141.html) to set target chamber temperature and <a href="/docs/gcode/M191.html"><code class="language-plaintext highlighter-rouge">M191</code></a> to set and wait target chamber temperature.</p> <h3 id="pid-extrusion-scaling">PID Extrusion Scaling</h3> <div class="container-fluid"> <div class="row alert alert-warning custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-exclamation-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>Experimental feature</p> </div> </div> </div> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(PIDTEMP)
</span>  <span class="c1">//#define PID_EXTRUSION_SCALING</span>
  <span class="cp">#if ENABLED(PID_EXTRUSION_SCALING)
</span>    <span class="cp">#define DEFAULT_Kc (100) //heating power=Kc*(e_speed)
</span>    <span class="cp">#define LPQ_MAX_LEN 50
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>This option further improves hotend temperature control by accounting for the extra heat energy consumed by cold filament entering the hotend melt chamber. If material enters the hotend more quickly, then more heat will need to be added to maintain energy balance. This option adds a scaling factor that must be tuned for your setup and material.</p> <p>Extrusion scaling keeps a circular buffer of forward E movements done at each temperature measurement which acts to delay the applied factor and allow for heat dissipation. The size of this queue during printing is set by <code class="language-plaintext highlighter-rouge">M301 L</code>, limited by <code class="language-plaintext highlighter-rouge">LPQ_MAX_LEN</code>.</p> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>Your <a href="/docs/gcode/M301.html"><code class="language-plaintext highlighter-rouge">M301</code></a> <code class="language-plaintext highlighter-rouge">C</code> and <a href="/docs/gcode/M301.html"><code class="language-plaintext highlighter-rouge">M301</code></a> <code class="language-plaintext highlighter-rouge">L</code> values are saved to EEPROM when <code class="language-plaintext highlighter-rouge">EEPROM_SETTINGS</code> is enabled.</p> </div> </div> </div> <h3 id="pid-fan-scaling">PID Fan Scaling</h3> <div class="container-fluid"> <div class="row alert alert-warning custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-exclamation-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>Experimental feature</p> </div> </div> </div> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PID_FAN_SCALING</span>
  <span class="cp">#if ENABLED(PID_FAN_SCALING)
</span>    <span class="c1">//#define PID_FAN_SCALING_ALTERNATIVE_DEFINITION</span>
    <span class="cp">#if ENABLED(PID_FAN_SCALING_ALTERNATIVE_DEFINITION)
</span>      <span class="cp">#define PID_FAN_SCALING_AT_FULL_SPEED 13.0        //=PID_FAN_SCALING_LIN_FACTOR*255+DEFAULT_Kf
</span>      <span class="cp">#define PID_FAN_SCALING_AT_MIN_SPEED 6.0          //=PID_FAN_SCALING_LIN_FACTOR*PID_FAN_SCALING_MIN_SPEED+DEFAULT_Kf
</span>      <span class="cp">#define PID_FAN_SCALING_MIN_SPEED 10.0            // Minimum fan speed at which to enable PID_FAN_SCALING
</span>
      <span class="cp">#define DEFAULT_Kf (255.0*PID_FAN_SCALING_AT_MIN_SPEED-PID_FAN_SCALING_AT_FULL_SPEED*PID_FAN_SCALING_MIN_SPEED)/(255.0-PID_FAN_SCALING_MIN_SPEED)
</span>      <span class="cp">#define PID_FAN_SCALING_LIN_FACTOR (PID_FAN_SCALING_AT_FULL_SPEED-DEFAULT_Kf)/255.0
</span>
    <span class="cp">#else
</span>      <span class="cp">#define PID_FAN_SCALING_LIN_FACTOR (0)             // Power loss due to cooling = Kf * (fan_speed)
</span>      <span class="cp">#define DEFAULT_Kf 10                              // A constant value added to the PID-tuner
</span>      <span class="cp">#define PID_FAN_SCALING_MIN_SPEED 10               // Minimum fan speed at which to enable PID_FAN_SCALING
</span>    <span class="cp">#endif
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>Scales heater power proportional to the part/layer fan speed which in turn reduces hotend temperature drop range.</p> <h3 id="automatic-temperature">Automatic Temperature</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define AUTOTEMP
#if ENABLED(AUTOTEMP)
</span>  <span class="cp">#define AUTOTEMP_OLDWEIGHT 0.98
#endif
</span></code></pre></div></div> <p>With Automatic Temperature the hotend target temperature is calculated by all the buffered lines of G-code. The maximum buffered steps/sec of the extruder motor is called “<code class="language-plaintext highlighter-rouge">se</code>”. Start autotemp mode with <code class="language-plaintext highlighter-rouge">M109 F&lt;factor&gt; S&lt;mintemp&gt; B&lt;maxtemp&gt;</code>, giving a range of temperatures. The target temperature is set to <code class="language-plaintext highlighter-rouge">mintemp + factor * se[steps/sec]</code> and is limited by <code class="language-plaintext highlighter-rouge">mintemp</code> and <code class="language-plaintext highlighter-rouge">maxtemp</code>. Turn this off by executing <a href="/docs/gcode/M109.html"><code class="language-plaintext highlighter-rouge">M109</code></a> without <code class="language-plaintext highlighter-rouge">F</code>. If the temperature is set to a value below <code class="language-plaintext highlighter-rouge">mintemp</code> (<em>e.g.,</em> by <a href="/docs/gcode/M104.html"><code class="language-plaintext highlighter-rouge">M104</code></a>) autotemp will not be applied.</p> <p>Example: Try <a href="/docs/gcode/M109.html"><code class="language-plaintext highlighter-rouge">M109</code></a> <code class="language-plaintext highlighter-rouge">S215 B260 F1</code> in your <code class="language-plaintext highlighter-rouge">start.gcode</code> to set a minimum temperature of 215 when idle, which will boost up to 260 as extrusion increases in speed.</p> <h3 id="temperature-report-adc">Temperature Report ADC</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SHOW_TEMP_ADC_VALUES</span>
</code></pre></div></div> <p>Enable this option to have <a href="/docs/gcode/M105.html"><code class="language-plaintext highlighter-rouge">M105</code></a> and automatic temperature reports include raw ADC values from the temperature sensors.</p> <h3 id="high-temperature-thermistors">High Temperature Thermistors</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MAX_CONSECUTIVE_LOW_TEMPERATURE_ERROR_ALLOWED 0</span>
</code></pre></div></div> <p>High temperature thermistors may give aberrant readings. If this is an issue, use this option to set the maximum number of consecutive low temperature errors that can occur before Min Temp Error is triggered. If you require a value over 10, this could indicate a problem.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MILLISECONDS_PREHEAT_TIME 0</span>
</code></pre></div></div> <p>High Temperature Thermistors tend to give poor readings at ambient and lower temperatures. Until they reach a sufficient temperature, these sensors usually return the lowest raw value, and this will cause a Min Temp Error.</p> <p>To solve this issue, this option sets the number of milliseconds a hotend will preheat before Marlin starts to check the temperature. Set a delay sufficient to reach a temperature your sensor can reliably read. Lower values are better and safer. If you require a value over 30000, this could indicate a problem.</p> <h3 id="ad595--ad8495">AD595 / AD8495</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define TEMP_SENSOR_AD595_OFFSET  0.0
#define TEMP_SENSOR_AD595_GAIN    1.0
#define TEMP_SENSOR_AD8495_OFFSET 0.0
#define TEMP_SENSOR_AD8495_GAIN   1.0
</span></code></pre></div></div> <p>These defines help to calibrate the AD595 sensor in case you get wrong temperature measurements. The final reading is derived from <code class="language-plaintext highlighter-rouge">measuredTemp * TEMP_SENSOR_AD595_GAIN + TEMP_SENSOR_AD595_OFFSET</code>.</p> <h3 id="extruder-runout-prevention">Extruder Runout Prevention</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define EXTRUDER_RUNOUT_PREVENT</span>
<span class="cp">#if ENABLED(EXTRUDER_RUNOUT_PREVENT)
</span>  <span class="cp">#define EXTRUDER_RUNOUT_MINTEMP 190
</span>  <span class="cp">#define EXTRUDER_RUNOUT_SECONDS 30
</span>  <span class="cp">#define EXTRUDER_RUNOUT_SPEED 1500  // mm/m
</span>  <span class="cp">#define EXTRUDER_RUNOUT_EXTRUDE 5   // mm
#endif
</span></code></pre></div></div> <p>When the machine is idle and the temperature over a given value, Marlin can extrude a short length of filament every couple of seconds.</p> <h2 id="cooling-fans">Cooling Fans</h2> <p>Cooling fans are needed on 3D printers to keep components cool and prevent failure.</p> <h3 id="controller-fan">Controller Fan</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define USE_CONTROLLER_FAN</span>
<span class="cp">#if ENABLED(USE_CONTROLLER_FAN)
</span>  <span class="c1">//#define CONTROLLER_FAN_PIN -1        // Set a custom pin for the controller fan</span>
  <span class="c1">//#define CONTROLLER_FAN_USE_Z_ONLY    // With this option only the Z axis is considered</span>
  <span class="cp">#define CONTROLLERFAN_SPEED_MIN      0 // (0-255) Minimum speed. (If set below this value the fan is turned off.)
</span>  <span class="cp">#define CONTROLLERFAN_SPEED_ACTIVE 255 // (0-255) Active speed, used when any motor is enabled
</span>  <span class="cp">#define CONTROLLERFAN_SPEED_IDLE     0 // (0-255) Idle speed, used when motors are disabled
</span>  <span class="cp">#define CONTROLLERFAN_IDLE_TIME     60 // (seconds) Extra time to keep the fan running after disabling motors
</span>  <span class="c1">//#define CONTROLLER_FAN_EDITABLE      // Enable M710 configurable settings</span>
  <span class="cp">#if ENABLED(CONTROLLER_FAN_EDITABLE)
</span>    <span class="cp">#define CONTROLLER_FAN_MENU          // Enable the Controller Fan submenu
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>A controller fan is useful to cool down the stepper drivers and MOSFETs. When stepper drivers reach a certain temperature they’ll turn off, either stuttering or stopping. With this option enabled the fan will turn on automatically whenever any steppers are enabled and turn off after a set period when all steppers are turned off.</p> <h3 id="pwm-fans-kickstart">PWM Fans Kickstart</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define FAN_KICKSTART_TIME 100</span>
</code></pre></div></div> <p>When PWM fans are set to low speed, they may need a higher-energy kickstart first to get moving. Once up to speed the fan can drop back to the set speed. This option specifies the kickstart duration in milliseconds. <strong>This option doesn’t work with the software PWM fan on Sanguinololu.</strong></p> <h3 id="pwm-fans-non-zero-off-state">PWM Fans Non-Zero Off State</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define FAN_OFF_PWM  1</span>
</code></pre></div></div> <p>Some coolers may require a non-zero “off” state.</p> <h3 id="pwm-fans-minimum-and-maximum-speeds">PWM Fans Minimum and Maximum Speeds</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define FAN_MIN_PWM 50</span>
<span class="c1">//#define FAN_MAX_PWM 128</span>
</code></pre></div></div> <p>This option can be defined to set the minimum and maximum PWM speeds (1-255) required to keep the PWM fans moving. Fan speeds set by <a href="/docs/gcode/M106.html"><code class="language-plaintext highlighter-rouge">M106</code></a> will be scaled to the reduced range above this minimum.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(FAST_PWM_FAN)
</span>  <span class="c1">//#define FAST_PWM_FAN_FREQUENCY 31400</span>
  <span class="c1">//#define USE_OCR2A_AS_TOP</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>The default frequency for <code class="language-plaintext highlighter-rouge">FAST_PWM_FAN</code> is F = F_CPU/(2<em>255</em>1). See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for further information.</p> <h3 id="extruder-auto-cooling-fans">Extruder Auto-Cooling Fans</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define E0_AUTO_FAN_PIN -1
#define E1_AUTO_FAN_PIN -1
#define E2_AUTO_FAN_PIN -1
#define E3_AUTO_FAN_PIN -1
#define E4_AUTO_FAN_PIN -1
#define EXTRUDER_AUTO_FAN_TEMPERATURE 50
#define EXTRUDER_AUTO_FAN_SPEED 255   // 255 == full speed
#define CHAMBER_AUTO_FAN_TEMPERATURE 30
#define CHAMBER_AUTO_FAN_SPEED 255
</span></code></pre></div></div> <p>Extruder auto fans turn on whenever their extruder temperatures go above <code class="language-plaintext highlighter-rouge">EXTRUDER_AUTO_FAN_TEMPERATURE</code>. Your board’s pins file already specifies the recommended pins. Override those here or set to -1 to disable the fans completely.</p> <p>Multiple extruders can be assigned to the same pin in which case the fan will turn on when <em>any</em> selected extruder is above the threshold.</p> <h3 id="part-cooling-fan-multiplexer">Part-Cooling Fan Multiplexer</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define FANMUX0_PIN -1
#define FANMUX1_PIN -1
#define FANMUX2_PIN -1
</span></code></pre></div></div> <p>This feature allows you to digitally multiplex the fan output. The multiplexer is automatically switched at tool-change. To enable, just assign one or more <code class="language-plaintext highlighter-rouge">FANMUX[012]_PIN</code> values for up to 2, 4, or 8 multiplexed fans.</p> <h2 id="case-light">Case Light</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define CASE_LIGHT_ENABLE</span>
<span class="cp">#if ENABLED(CASE_LIGHT_ENABLE)
</span>  <span class="c1">//#define CASE_LIGHT_PIN 4                  // Override the default pin if needed</span>
  <span class="cp">#define INVERT_CASE_LIGHT false             // Set true if Case Light is ON when pin is LOW
</span>  <span class="cp">#define CASE_LIGHT_DEFAULT_ON true          // Set default power-up state on
</span>  <span class="cp">#define CASE_LIGHT_DEFAULT_BRIGHTNESS 105   // Set default power-up brightness (0-255, requires PWM pin)
</span>  <span class="c1">//#define CASE_LIGHT_MAX_PWM 128            // Limit pwm</span>
  <span class="c1">//#define CASE_LIGHT_MENU                   // Add Case Light options to the LCD menu</span>
  <span class="c1">//#define CASE_LIGHT_NO_BRIGHTNESS          // Disable brightness control. Enable for non-PWM lighting.</span>
  <span class="c1">//#define CASE_LIGHT_USE_NEOPIXEL           // Use NeoPixel LED as case light, requires NEOPIXEL_LED.</span>
  <span class="cp">#if ENABLED(CASE_LIGHT_USE_NEOPIXEL)
</span>    <span class="cp">#define CASE_LIGHT_NEOPIXEL_COLOR { 255, 255, 255, 255 } // { Red, Green, Blue, White }
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>Enable this option for a firmware-controlled digital or PWM case light. Use <a href="/docs/gcode/M355.html"><code class="language-plaintext highlighter-rouge">M355</code></a> to turn on/off and control the brightness.</p> <h2 id="endstops-always-on">Endstops Always On</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define ENDSTOPS_ALWAYS_ON_DEFAULT</span>
</code></pre></div></div> <p>Enable this option to keep the endstops on (by default) even when not homing. Override at any time with <a href="/docs/gcode/M120.html"><code class="language-plaintext highlighter-rouge">M120</code></a>, <a href="/docs/gcode/M121.html"><code class="language-plaintext highlighter-rouge">M121</code></a>.</p> <h2 id="z-late-enable">Z Late Enable</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define Z_LATE_ENABLE</span>
</code></pre></div></div> <p>With this option is active, the Z steppers will only turn on at the last moment before they move. This option may be needed if your Z driver tends to overheat. Not compatible with Core kinematics.</p> <h2 id="external-closed-loop-controller">External Closed Loop Controller</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define EXTERNAL_CLOSED_LOOP_CONTROLLER</span>
<span class="cp">#if ENABLED(EXTERNAL_CLOSED_LOOP_CONTROLLER)
</span>  <span class="c1">//#define CLOSED_LOOP_ENABLE_PIN        -1</span>
  <span class="c1">//#define CLOSED_LOOP_MOVE_COMPLETE_PIN -1</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Employ an external closed loop controller that can be activated or deactivated by the main controller. Using a single wire for the control signal and another for the return “move complete” signal to signify whether or not the move was able to be made successfully.</p> <p>Benefits</p> <h2 id="dual-steppers--dual-endstops">Dual Steppers / Dual Endstops</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define X_DUAL_STEPPER_DRIVERS</span>
<span class="cp">#if ENABLED(X_DUAL_STEPPER_DRIVERS)
</span>  <span class="cp">#define INVERT_X2_VS_X_DIR true   // Set 'true' if X motors should rotate in opposite directions
</span>  <span class="c1">//#define X_DUAL_ENDSTOPS</span>
  <span class="cp">#if ENABLED(X_DUAL_ENDSTOPS)
</span>    <span class="cp">#define X2_USE_ENDSTOP _XMAX_
</span>    <span class="cp">#define X_DUAL_ENDSTOPS_ADJUSTMENT  0
</span>  <span class="cp">#endif
#endif
</span>
<span class="c1">//#define Y_DUAL_STEPPER_DRIVERS</span>
<span class="cp">#if ENABLED(Y_DUAL_STEPPER_DRIVERS)
</span>  <span class="cp">#define INVERT_Y2_VS_Y_DIR true   // Set 'true' if Y motors should rotate in opposite directions
</span>  <span class="c1">//#define Y_DUAL_ENDSTOPS</span>
  <span class="cp">#if ENABLED(Y_DUAL_ENDSTOPS)
</span>    <span class="cp">#define Y2_USE_ENDSTOP _YMAX_
</span>    <span class="cp">#define Y_DUAL_ENDSTOPS_ADJUSTMENT  0
</span>  <span class="cp">#endif
#endif
</span>
<span class="cp">#define NUM_Z_STEPPER_DRIVERS 1   // (1-4) Z options change based on how many
</span>
<span class="cp">#if NUM_Z_STEPPER_DRIVERS &gt; 1
</span>  <span class="c1">//#define Z_MULTI_ENDSTOPS</span>
  <span class="cp">#if ENABLED(Z_MULTI_ENDSTOPS)
</span>    <span class="cp">#define Z2_USE_ENDSTOP          _XMAX_
</span>    <span class="cp">#define Z2_ENDSTOP_ADJUSTMENT   0
</span>    <span class="cp">#if NUM_Z_STEPPER_DRIVERS &gt;= 3
</span>      <span class="cp">#define Z3_USE_ENDSTOP        _YMAX_
</span>      <span class="cp">#define Z3_ENDSTOP_ADJUSTMENT 0
</span>    <span class="cp">#endif
</span>    <span class="cp">#if NUM_Z_STEPPER_DRIVERS &gt;= 4
</span>      <span class="cp">#define Z4_USE_ENDSTOP        _ZMAX_
</span>      <span class="cp">#define Z4_ENDSTOP_ADJUSTMENT 0
</span>    <span class="cp">#endif
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>These options allow you to use extra E drivers to drive a second motor for X, Y, and/or Z axes.</p> <p>Set <code class="language-plaintext highlighter-rouge">X_DUAL_STEPPER_DRIVERS</code> to use a second X motor. If the X motors need to spin in opposite directions set <code class="language-plaintext highlighter-rouge">INVERT_X2_VS_X_DIR</code> to <code class="language-plaintext highlighter-rouge">true</code>. If the second motor has its own endstop set <code class="language-plaintext highlighter-rouge">X_DUAL_ENDSTOPS</code>. (This can adjust for “racking.”) Use <code class="language-plaintext highlighter-rouge">X2_USE_ENDSTOP</code> to set the endstop plug that should be used for the second endstop. Extra endstops will appear in the output of <a href="/docs/gcode/M119.html">‘M119’</a>.</p> <p>If the two X axes aren’t perfectly aligned, use <code class="language-plaintext highlighter-rouge">X_DUAL_ENDSTOP_ADJUSTMENT</code> to adjust for the difference. This offset is applied to the X2 motor after homing with <a href="/docs/gcode/G028.html"><code class="language-plaintext highlighter-rouge">G28</code></a>. The dual endstop offsets can be set at runtime with <code class="language-plaintext highlighter-rouge">M666 X[offset] Y[offset] Z[offset]</code>.</p> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>Requires enabling the corresponding stepper driver (<em>e.g.,</em> <code class="language-plaintext highlighter-rouge">X2_DRIVER_TYPE</code> in <code class="language-plaintext highlighter-rouge">Configuration.h</code>). <em><strong>DO NOT</strong> enable <code class="language-plaintext highlighter-rouge">E2_DRIVER_TYPE</code> - this may produce undesirable results that can harm your machine.</em></p> </div> </div> </div> <h2 id="dual-x-carriage">Dual X Carriage</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define DUAL_X_CARRIAGE</span>
<span class="cp">#if ENABLED(DUAL_X_CARRIAGE)
</span>  <span class="cp">#define X1_MIN_POS X_MIN_POS
</span>  <span class="cp">#define X1_MAX_POS X_BED_SIZE
</span>  <span class="cp">#define X2_MIN_POS    80
</span>  <span class="cp">#define X2_MAX_POS   353
</span>  <span class="cp">#define X2_HOME_DIR    1
</span>  <span class="cp">#define X2_HOME_POS X2_MAX_POS
</span>
  <span class="c1">// This is the default power-up mode which can be later using M605.</span>
  <span class="cp">#define DEFAULT_DUAL_X_CARRIAGE_MODE DXC_AUTO_PARK_MODE
</span>
  <span class="c1">// Default x offset in duplication mode (typically set to half print bed width)</span>
  <span class="cp">#define DEFAULT_DUPLICATION_X_OFFSET 100
</span>
  <span class="c1">// Default action to execute following M605 mode change commands. Typically G28X to apply new mode.</span>
  <span class="c1">//#define EVENT_GCODE_IDEX_AFTER_MODECHANGE "G28X"</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Enable this option if you have an “IDEX” printer with Dual X-Carriages that move independently. The Dual X-Carriage design allows the inactive extruder to be parked to keep oozing filament away from the print, reduces the weight of each carriage, and enables faster printing speeds. With this option simply connect the X2 stepper to the first unused E plug.</p> <p>In a Dual X-Carriage setup the first X-carriage (<code class="language-plaintext highlighter-rouge">T0</code>) homes to the minimum endstop, while the second X-carriage (<code class="language-plaintext highlighter-rouge">T1</code>) homes to the maximum endstop.</p> <p>With Dual X-Carriage the <code class="language-plaintext highlighter-rouge">HOTEND_OFFSET_X</code> setting for <code class="language-plaintext highlighter-rouge">T1</code> overrides <code class="language-plaintext highlighter-rouge">X2_HOME_POS</code>. Use <code class="language-plaintext highlighter-rouge">M218 T1 X[homepos]</code> to set a custom X2 home position, and <a href="/docs/gcode/M218.html"><code class="language-plaintext highlighter-rouge">M218</code></a> <code class="language-plaintext highlighter-rouge">T1 X0</code> to use <code class="language-plaintext highlighter-rouge">X2_HOME_POS</code>. This offset can be saved to EEPROM with <a href="/docs/gcode/M500.html"><code class="language-plaintext highlighter-rouge">M500</code></a>.</p> <p><strong>In your slicer, be sure to set the second extruder X-offset to 0.</strong></p> <p>Dual X-Carriage has three different movement modes, set with <a href="/docs/gcode/M605.html"><code class="language-plaintext highlighter-rouge">M605</code></a> <code class="language-plaintext highlighter-rouge">S[mode]</code>:</p> <ul> <li>Mode 0: Full Control Mode. (<a href="/docs/gcode/M605.html"><code class="language-plaintext highlighter-rouge">M605</code></a> <code class="language-plaintext highlighter-rouge">S0</code>) Slicers that fully support dual X-carriages can use this mode for optimal travel results.</li> <li>Mode 1: Auto-park Mode. (<a href="/docs/gcode/M605.html"><code class="language-plaintext highlighter-rouge">M605</code></a> <code class="language-plaintext highlighter-rouge">S1</code>) The firmware automatically parks/unparks the carriages on tool-change. No slicer support is required. (<a href="/docs/gcode/M605.html"><code class="language-plaintext highlighter-rouge">M605</code></a> <code class="language-plaintext highlighter-rouge">S1</code>)</li> <li>Mode 2: Duplication Mode. (<code class="language-plaintext highlighter-rouge">[</code>M605<code class="language-plaintext highlighter-rouge">](/docs/gcode/M605.html) S2 X[offs] R[temp]</code>) The firmware will transparently make the second X-carriage and extruder copy all actions of the first X-carriage. This allows the printer to print 2 arbitrary items at once. (The 2nd extruder’s X and temp offsets are set using: <code class="language-plaintext highlighter-rouge">[</code>M605<code class="language-plaintext highlighter-rouge">](/docs/gcode/M605.html) S2 X[offs] R[offs]</code>.)</li> </ul> <h2 id="solenoid">Solenoid</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define EXT_SOLENOID</span>
</code></pre></div></div> <p>Adds control for any solenoid attached to an extruder. Activate the solenoid on the active extruder with <a href="/docs/gcode/M380.html"><code class="language-plaintext highlighter-rouge">M380</code></a>. Disable all with <a href="/docs/gcode/M381.html"><code class="language-plaintext highlighter-rouge">M381</code></a>.</p> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>Requires defining the corresponding pin ie SOL0_PIN, SOL1_PIN, etc.</p> </div> </div> </div> <h2 id="homing">Homing</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define X_HOME_BUMP_MM 5
#define Y_HOME_BUMP_MM 5
#define Z_HOME_BUMP_MM 2
#define HOMING_BUMP_DIVISOR { 2, 2, 4 }
</span><span class="c1">//#define QUICK_HOME</span>
<span class="c1">//#define HOMING_BACKOFF_MM { 2, 2, 2 }</span>
<span class="c1">//#define HOME_Y_BEFORE_X</span>
<span class="c1">//#define CODEPENDENT_XY_HOMING</span>
</code></pre></div></div> <p>After an endstop is triggered during homing, the printerhead backs off by the set <code class="language-plaintext highlighter-rouge">HOME_BUMP_MM</code> distance then homes again at a slower speed. The slower homing speed for each axis is set by <code class="language-plaintext highlighter-rouge">HOMING_BUMP_DIVISOR</code>.</p> <h2 id="bltouch-1">BLTouch</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(BLTOUCH)
</span><span class="c1">//#define BLTOUCH_DELAY 500</span>
<span class="c1">//#define BLTOUCH_FORCE_SW_MODE</span>
<span class="c1">//#define BLTOUCH_SET_5V_MODE</span>
<span class="c1">//#define BLTOUCH_FORCE_MODE_SET</span>
<span class="c1">//#define BLTOUCH_HS_MODE</span>
<span class="c1">//#define BLTOUCH_LCD_VOLTAGE_MENU</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>The default BLTouch settings can be overriden with these options. <code class="language-plaintext highlighter-rouge">BLTOUCH_DELAY</code> defaults to 500 if not defined. See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for more information.</p> <h2 id="calibration">Calibration</h2> <h3 id="z-steppers-auto-alignment">Z Steppers Auto-Alignment</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define Z_STEPPER_AUTO_ALIGN</span>
<span class="cp">#if ENABLED(Z_STEPPER_AUTO_ALIGN)
</span>  <span class="cp">#define Z_STEPPER_ALIGN_XY { {  10, 190 }, { 100,  10 }, { 190, 190 } }
</span>  <span class="cp">#ifndef Z_STEPPER_ALIGN_XY
</span>    <span class="c1">//#define Z_STEPPERS_ORIENTATION 0</span>
  <span class="cp">#endif
</span>  <span class="c1">//#define Z_STEPPER_ALIGN_KNOWN_STEPPER_POSITIONS</span>
  <span class="cp">#if ENABLED(Z_STEPPER_ALIGN_KNOWN_STEPPER_POSITIONS)
</span>    <span class="cp">#define Z_STEPPER_ALIGN_STEPPER_XY { { 210.7, 102.5 }, { 152.6, 220.0 }, { 94.5, 102.5 } }
</span>  <span class="cp">#else
</span>    <span class="cp">#define Z_STEPPER_ALIGN_AMP 1.0
</span>  <span class="cp">#endif
</span>
  <span class="cp">#define G34_MAX_GRADE              5    // (%) Maximum incline that G34 will handle
</span>  <span class="cp">#define Z_STEPPER_ALIGN_ITERATIONS 5    // Number of iterations to apply during alignment
</span>  <span class="cp">#define Z_STEPPER_ALIGN_ACC        0.02 // Stop iterating early if the accuracy is better than this
</span>  <span class="cp">#define RESTORE_LEVELING_AFTER_G34
</span>  <span class="cp">#define HOME_AFTER_G34
#endif
</span></code></pre></div></div> <p>Add the <a href="/docs/gcode/G034-zsaa.html"><code class="language-plaintext highlighter-rouge">G34</code></a> command to align multiple Z steppers using a bed probe. See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for more information.</p> <h3 id="assisted-tramming">Assisted Tramming</h3> <p>Add the <a href="/docs/gcode/G035.html"><code class="language-plaintext highlighter-rouge">G35</code></a> command to read bed corners to help adjust screws. Requires a bed probe.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define ASSISTED_TRAMMING</span>
<span class="cp">#if ENABLED(ASSISTED_TRAMMING)
</span>
  <span class="c1">// Define from 3 to 9 points to probe.</span>
  <span class="cp">#define TRAMMING_POINT_XY { {  20, 20 }, { 180,  20 }, { 180, 180 }, { 20, 180 } }
</span>
  <span class="c1">// Define position names for probe points.</span>
  <span class="cp">#define TRAMMING_POINT_NAME_1 "Front-Left"
</span>  <span class="cp">#define TRAMMING_POINT_NAME_2 "Front-Right"
</span>  <span class="cp">#define TRAMMING_POINT_NAME_3 "Back-Right"
</span>  <span class="cp">#define TRAMMING_POINT_NAME_4 "Back-Left"
</span>
  <span class="cp">#define RESTORE_LEVELING_AFTER_G35    // Enable to restore leveling setup after operation
</span>  <span class="c1">//#define REPORT_TRAMMING_MM          // Report Z deviation (mm) for each point relative to the first</span>

  <span class="c1">//#define ASSISTED_TRAMMING_WIZARD    // Add a Tramming Wizard to the LCD menu</span>

  <span class="c1">//#define ASSISTED_TRAMMING_WAIT_POSITION { X_CENTER, Y_CENTER, 30 } // Move the nozzle out of the way for adjustment</span>

  <span class="cm">/**
   * Screw thread:
   *   M3: 30 = Clockwise, 31 = Counter-Clockwise
   *   M4: 40 = Clockwise, 41 = Counter-Clockwise
   *   M5: 50 = Clockwise, 51 = Counter-Clockwise
   */</span>
  <span class="cp">#define TRAMMING_SCREW_THREAD 30
</span>
<span class="cp">#endif
</span></code></pre></div></div> <h2 id="motion-control">Motion Control</h2> <h3 id="fixed-time-motion-control">Fixed-Time Motion Control</h3> <p>Fixed-time-based Motion Control. Enable/disable and set parameters with G-code <a href="/docs/gcode/M493.html"><code class="language-plaintext highlighter-rouge">M493</code></a>.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define FT_MOTION
#if ENABLED(FT_MOTION)
</span>  <span class="cp">#define FTM_DEFAULT_MODE         ftMotionMode_ENABLED // Default mode of fixed time control. (Enums in ft_types.h)
</span>  <span class="cp">#define FTM_DEFAULT_DYNFREQ_MODE dynFreqMode_DISABLED // Default mode of dynamic frequency calculation. (Enums in ft_types.h)
</span>  <span class="cp">#define FTM_SHAPING_DEFAULT_X_FREQ 37.0f              // (Hz) Default peak frequency used by input shapers.
</span>  <span class="cp">#define FTM_SHAPING_DEFAULT_Y_FREQ 37.0f              // (Hz) Default peak frequency used by input shapers.
</span>  <span class="cp">#define FTM_LINEAR_ADV_DEFAULT_ENA false              // Default linear advance enable (true) or disable (false).
</span>  <span class="cp">#define FTM_LINEAR_ADV_DEFAULT_K    0.0f              // Default linear advance gain.
</span>  <span class="cp">#define FTM_SHAPING_ZETA            0.1f              // Zeta used by input shapers.
</span>  <span class="cp">#define FTM_SHAPING_V_TOL           0.05f             // Vibration tolerance used by EI input shapers.
</span>
  <span class="cm">/**
   * Advanced configuration
   */</span>
  <span class="cp">#define FTM_BATCH_SIZE 100                            // Batch size for trajectory generation;
</span>                                                        <span class="c1">// half the window size for Ulendo FBS.</span>
  <span class="cp">#define FTM_FS           1000                         // (Hz) Frequency for trajectory generation. (1 / FTM_TS)
</span>  <span class="cp">#define FTM_TS              0.001f                    // (s) Time step for trajectory generation. (1 / FTM_FS)
</span>  <span class="cp">#define FTM_STEPPER_FS  20000                         // (Hz) Frequency for stepper I/O update.
</span>  <span class="cp">#define FTM_MIN_TICKS ((STEPPER_TIMER_RATE) / (FTM_STEPPER_FS)) // Minimum stepper ticks between steps.
</span>  <span class="cp">#define FTM_MIN_SHAPE_FREQ 10                         // Minimum shaping frequency.
</span>  <span class="cp">#define FTM_ZMAX          100                         // Maximum delays for shaping functions (even numbers only!).
</span>                                                        <span class="c1">// Calculate as:</span>
                                                        <span class="c1">//    1/2 * (FTM_FS / FTM_MIN_SHAPE_FREQ) for ZV.</span>
                                                        <span class="c1">//    (FTM_FS / FTM_MIN_SHAPE_FREQ) for ZVD, MZV.</span>
                                                        <span class="c1">//    3/2 * (FTM_FS / FTM_MIN_SHAPE_FREQ) for 2HEI.</span>
                                                        <span class="c1">//    2 * (FTM_FS / FTM_MIN_SHAPE_FREQ) for 3HEI.</span>
  <span class="cp">#define FTM_STEPS_PER_UNIT_TIME 20                    // Interpolated stepper commands per unit time.
</span>                                                        <span class="c1">// Calculate as (FTM_STEPPER_FS / FTM_FS).</span>
  <span class="cp">#define FTM_CTS_COMPARE_VAL 10                        // Comparison value used in interpolation algorithm.
</span>                                                        <span class="c1">// Calculate as (FTM_STEPS_PER_UNIT_TIME / 2).</span>
  <span class="c1">// These values may be configured to adjust duration of loop().</span>
  <span class="cp">#define FTM_STEPS_PER_LOOP 60                         // Number of stepper commands to generate each loop().
</span>  <span class="cp">#define FTM_POINTS_PER_LOOP 100                       // Number of trajectory points to generate each loop().
</span>
  <span class="c1">// This value may be configured to adjust duration to consume the command buffer.</span>
  <span class="c1">// Try increasing this value if stepper motion is not smooth.</span>
  <span class="cp">#define FTM_STEPPERCMD_BUFF_SIZE 1000                 // Size of the stepper command buffers.
#endif
</span></code></pre></div></div> <h3 id="zv-input-shaping">ZV Input Shaping</h3> <p>Zero Vibration (ZV) Input Shaping for X and/or Y movements.</p> <p>This option uses a lot of SRAM for the step buffer. The buffer size is calculated automatically from <code class="language-plaintext highlighter-rouge">SHAPING_FREQ_[XY]</code>, <code class="language-plaintext highlighter-rouge">DEFAULT_AXIS_STEPS_PER_UNIT</code>, <code class="language-plaintext highlighter-rouge">DEFAULT_MAX_FEEDRATE</code> and <code class="language-plaintext highlighter-rouge">ADAPTIVE_STEP_SMOOTHING</code>. The default calculation can be overridden by setting <code class="language-plaintext highlighter-rouge">SHAPING_MIN_FREQ</code> and/or <code class="language-plaintext highlighter-rouge">SHAPING_MAX_FEEDRATE</code>. The higher the frequency and the lower the feedrate, the smaller the buffer. If the buffer is too small at runtime, input shaping will have reduced effectiveness during high speed movements.</p> <p>For configuration options see G-code <a href="/docs/gcode/M593.html"><code class="language-plaintext highlighter-rouge">M593</code></a>.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define INPUT_SHAPING_X</span>
<span class="c1">//#define INPUT_SHAPING_Y</span>
<span class="cp">#if EITHER(INPUT_SHAPING_X, INPUT_SHAPING_Y)
</span>  <span class="cp">#if ENABLED(INPUT_SHAPING_X)
</span>    <span class="cp">#define SHAPING_FREQ_X  40          // (Hz) The default dominant resonant frequency on the X axis.
</span>    <span class="cp">#define SHAPING_ZETA_X  0.15f       // Damping ratio of the X axis (range: 0.0 = no damping to 1.0 = critical damping).
</span>  <span class="cp">#endif
</span>  <span class="cp">#if ENABLED(INPUT_SHAPING_Y)
</span>    <span class="cp">#define SHAPING_FREQ_Y  40          // (Hz) The default dominant resonant frequency on the Y axis.
</span>    <span class="cp">#define SHAPING_ZETA_Y  0.15f       // Damping ratio of the Y axis (range: 0.0 = no damping to 1.0 = critical damping).
</span>  <span class="cp">#endif
</span>  <span class="c1">//#define SHAPING_MIN_FREQ  20        // By default the minimum of the shaping frequencies. Override to affect SRAM usage.</span>
  <span class="c1">//#define SHAPING_MAX_STEPRATE 10000  // By default the maximum total step rate of the shaped axes. Override to affect SRAM usage.</span>
  <span class="c1">//#define SHAPING_MENU                // Add a menu to the LCD to set shaping parameters.</span>
<span class="cp">#endif
</span></code></pre></div></div> <h2 id="motion">Motion</h2> <h3 id="axis-relativeabsolute-mode">Axis Relative/Absolute Mode</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define AXIS_RELATIVE_MODES { false, false, false, false }
</span></code></pre></div></div> <p>True for relative mode; false for absolute mode.</p> <h3 id="multi-nozzle-duplication">Multi Nozzle Duplication</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MULTI_NOZZLE_DUPLICATION</span>
</code></pre></div></div> <p>Adds a duplicate option for well-separated conjoined nozzles.</p> <h3 id="invert-stepper-drivers">Invert Stepper Drivers</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define INVERT_X_STEP_PIN false
#define INVERT_Y_STEP_PIN false
#define INVERT_Z_STEP_PIN false
#define INVERT_E_STEP_PIN false
</span></code></pre></div></div> <p>Set to true for active low signal.</p> <h3 id="default-stepper-deactive-time">Default Stepper Deactive Time</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define DEFAULT_STEPPER_DEACTIVE_TIME 120
#define DISABLE_INACTIVE_X true
#define DISABLE_INACTIVE_Y true
#define DISABLE_INACTIVE_Z true
#define DISABLE_INACTIVE_E true
</span></code></pre></div></div> <p>Disable stepper motors after set time. Set to 0 to deactive feature. Time can be set by <a href="/docs/gcode/M018.html"><code class="language-plaintext highlighter-rouge">M18 &amp; M84</code></a>.</p> <h3 id="default-minimum-feedrates">Default Minimum Feedrates</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define DEFAULT_MINIMUMFEEDRATE       0.0
#define DEFAULT_MINTRAVELFEEDRATE     0.0
</span></code></pre></div></div> <h3 id="rehome-after-steppers-deactive">Rehome After Steppers Deactive</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define HOME_AFTER_DEACTIVATE</span>
</code></pre></div></div> <h3 id="default-minimum-segment-time">Default Minimum Segment Time</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define DEFAULT_MINSEGMENTTIME        20000
</span></code></pre></div></div> <p>Minimum required time for segment when the buffer is emptied.</p> <h3 id="slowdown">Slowdown</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SLOWDOWN
#if ENABLED(SLOWDOWN)
</span>  <span class="cp">#define SLOWDOWN_DIVISOR 2
#endif
</span></code></pre></div></div> <p>Slows down the machine when the look ahead buffer is filled to the set <code class="language-plaintext highlighter-rouge">SLOWDOWN_DIVISOR</code> amount. Increase the slowdown divisor for larger buffer sizes.</p> <h3 id="frequency-limit">Frequency limit</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define XY_FREQUENCY_LIMIT  15</span>
</code></pre></div></div> <h3 id="minimum-planner-speed">Minimum Planner Speed</h3> <p>#define MINIMUM_PLANNER_SPEED 0.05</p> <h3 id="backlash-compensation">Backlash Compensation</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define BACKLASH_COMPENSATION
#if ENABLED(BACKLASH_COMPENSATION)
</span>  <span class="cp">#define BACKLASH_DISTANCE_MM { 0, 0, 0 } // (mm)
</span>  <span class="cp">#define BACKLASH_CORRECTION    0.0       // 0.0 = no correction; 1.0 = full correction
</span>  <span class="c1">//#define BACKLASH_SMOOTHING_MM 3 // (mm)</span>
  <span class="c1">//#define BACKLASH_GCODE</span>

  <span class="cp">#if ENABLED(BACKLASH_GCODE)
</span>    <span class="cp">#define MEASURE_BACKLASH_WHEN_PROBING
</span>
    <span class="cp">#if ENABLED(MEASURE_BACKLASH_WHEN_PROBING)
</span>      <span class="cp">#define BACKLASH_MEASUREMENT_LIMIT       0.5   // (mm)
</span>      <span class="cp">#define BACKLASH_MEASUREMENT_RESOLUTION  0.005 // (mm)
</span>      <span class="cp">#define BACKLASH_MEASUREMENT_FEEDRATE    Z_PROBE_SPEED_SLOW // (mm/m)
</span>    <span class="cp">#endif
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for further information.</p> <h3 id="automatic-backlash-calibration">Automatic Backlash Calibration</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define CALIBRATION_GCODE
#if ENABLED(CALIBRATION_GCODE)
</span>
  <span class="cp">#define CALIBRATION_MEASUREMENT_RESOLUTION     0.01 // mm
</span>
  <span class="cp">#define CALIBRATION_FEEDRATE_SLOW             60    // mm/m
</span>  <span class="cp">#define CALIBRATION_FEEDRATE_FAST           1200    // mm/m
</span>  <span class="cp">#define CALIBRATION_FEEDRATE_TRAVEL         3000    // mm/m
</span>
  <span class="cp">#define CALIBRATION_NOZZLE_TIP_HEIGHT          1.0  // mm
</span>  <span class="cp">#define CALIBRATION_NOZZLE_OUTER_DIAMETER      2.0  // mm
</span>
  <span class="c1">//#define CALIBRATION_REPORTING</span>

  <span class="cp">#define CALIBRATION_OBJECT_CENTER     { 264.0, -22.0,  -2.0 } // mm
</span>  <span class="cp">#define CALIBRATION_OBJECT_DIMENSIONS {  10.0,  10.0,  10.0 } // mm
</span>
  <span class="cp">#define CALIBRATION_MEASURE_RIGHT
</span>  <span class="cp">#define CALIBRATION_MEASURE_FRONT
</span>  <span class="cp">#define CALIBRATION_MEASURE_LEFT
</span>  <span class="cp">#define CALIBRATION_MEASURE_BACK
</span>
  <span class="c1">//#define CALIBRATION_MEASURE_AT_TOP_EDGES</span>

  <span class="cp">#ifndef CALIBRATION_PIN
</span>    <span class="c1">//#define CALIBRATION_PIN -1            // Define here to override the default pin</span>
    <span class="cp">#define CALIBRATION_PIN_INVERTING false // Set to true to invert the custom pin
</span>    <span class="c1">//#define CALIBRATION_PIN_PULLDOWN</span>
    <span class="cp">#define CALIBRATION_PIN_PULLUP
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>Adds <a href="/docs/gcode/G425.html"><code class="language-plaintext highlighter-rouge">G425</code></a> to run automatic calibration using an electrically-conductive cube, bolt, or washer mounted on the bed. See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for further information.</p> <h3 id="adaptive-step-smoothing">Adaptive Step Smoothing</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define ADAPTIVE_STEP_SMOOTHING
</span></code></pre></div></div> <p>Adaptive Step Smoothing increases the resolution of multi-axis moves, particularly at step frequencies below 1kHz (for AVR) or 10kHz (for ARM), where aliasing between axes in multi-axis moves causes audible vibration and surface artifacts. The algorithm adapts to provide the best possible step smoothing at the lowest stepping frequencies.</p> <h3 id="custom-microstepping">Custom Microstepping</h3> <p>If you have a board with pins named <code class="language-plaintext highlighter-rouge">X_MS1</code>, <code class="language-plaintext highlighter-rouge">X_MS2</code>, etc., then you can change the micro-stepping using G-code or the LCD menu.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MICROSTEP1 LOW,LOW,LOW</span>
<span class="c1">//#define MICROSTEP2 HIGH,LOW,LOW</span>
<span class="c1">//#define MICROSTEP4 LOW,HIGH,LOW</span>
<span class="c1">//#define MICROSTEP8 HIGH,HIGH,LOW</span>
<span class="c1">//#define MICROSTEP16 LOW,LOW,HIGH</span>
<span class="c1">//#define MICROSTEP32 HIGH,LOW,HIGH</span>

<span class="cp">#define MICROSTEP_MODES {16,16,16,16,16} // [1,2,4,8,16]
</span></code></pre></div></div> <h3 id="stepper-motor-current">Stepper Motor Current</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PWM_MOTOR_CURRENT { 1300, 1300, 1250 }</span>
<span class="c1">//#define DIGIPOT_MOTOR_CURRENT { 135,135,135,135,135 }</span>
<span class="c1">//#define DAC_MOTOR_CURRENT_DEFAULT { 70, 80, 90, 80 }</span>

<span class="c1">//#define DIGIPOT_I2C</span>
<span class="cp">#if ENABLED(DIGIPOT_I2C) &amp;&amp; !defined(DIGIPOT_I2C_ADDRESS_A)
</span>  <span class="cp">#define DIGIPOT_I2C_ADDRESS_A 0x2C
</span>  <span class="cp">#define DIGIPOT_I2C_ADDRESS_B 0x2D
#endif
</span>
<span class="c1">//#define DIGIPOT_MCP4018</span>
<span class="cp">#define DIGIPOT_I2C_NUM_CHANNELS 8
#define DIGIPOT_I2C_MOTOR_CURRENTS { 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0 }
</span></code></pre></div></div> <h2 id="lcd--controller">LCD / Controller</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if EITHER(ULTIPANEL, EXTENSIBLE_UI)
</span>  <span class="cp">#define MANUAL_FEEDRATE { 50*60, 50*60, 4*60, 60 } // Feedrates for manual moves along X, Y, Z, E from panel
</span>  <span class="cp">#define SHORT_MANUAL_Z_MOVE 0.025 // (mm) Smallest manual Z move (&lt; 0.1mm)
</span>  <span class="cp">#if ENABLED(ULTIPANEL)
</span>    <span class="cp">#define MANUAL_E_MOVES_RELATIVE // Display extruder move distance rather than "position"
</span>    <span class="cp">#define ULTIPANEL_FEEDMULTIPLY  // Encoder sets the feedrate multiplier on the Status Screen
</span>  <span class="cp">#endif
#endif
</span>
<span class="cp">#define ENCODER_RATE_MULTIPLIER
#if ENABLED(ENCODER_RATE_MULTIPLIER)
</span>  <span class="cp">#define ENCODER_10X_STEPS_PER_SEC   30  // (steps/s) Encoder rate for 10x speed
</span>  <span class="cp">#define ENCODER_100X_STEPS_PER_SEC  80  // (steps/s) Encoder rate for 100x speed
#endif
</span><span class="c1">//#define BEEP_ON_FEEDRATE_CHANGE</span>
<span class="cp">#if ENABLED(BEEP_ON_FEEDRATE_CHANGE)
</span>  <span class="cp">#define FEEDRATE_CHANGE_BEEP_DURATION   10
</span>  <span class="cp">#define FEEDRATE_CHANGE_BEEP_FREQUENCY 440
#endif
</span>
<span class="cp">#if HAS_LCD_MENU
</span>  <span class="c1">//#define LCD_INFO_MENU</span>
  <span class="cp">#if ENABLED(LCD_INFO_MENU)
</span>    <span class="c1">//#define LCD_PRINTER_INFO_IS_BOOTSCREEN // Show bootscreen(s) instead of Printer Info pages</span>
  <span class="cp">#endif
</span>  <span class="c1">//#define TURBO_BACK_MENU_ITEM</span>
  <span class="c1">//#define LED_CONTROL_MENU</span>
  <span class="cp">#if ENABLED(LED_CONTROL_MENU)
</span>    <span class="cp">#define LED_COLOR_PRESETS                 // Enable the Preset Color menu option
</span>    <span class="cp">#if ENABLED(LED_COLOR_PRESETS)
</span>      <span class="cp">#define LED_USER_PRESET_RED        255  // User defined RED value
</span>      <span class="cp">#define LED_USER_PRESET_GREEN      128  // User defined GREEN value
</span>      <span class="cp">#define LED_USER_PRESET_BLUE         0  // User defined BLUE value
</span>      <span class="cp">#define LED_USER_PRESET_WHITE      255  // User defined WHITE value
</span>      <span class="cp">#define LED_USER_PRESET_BRIGHTNESS 255  // User defined intensity
</span>      <span class="c1">//#define LED_USER_PRESET_STARTUP       // Have the printer display the user preset color on startup</span>
    <span class="cp">#endif
</span>  <span class="cp">#endif
</span>
<span class="cp">#endif // HAS_LCD_MENU
</span></code></pre></div></div> <h3 id="scroll-long-status-message">Scroll Long Status Message</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define STATUS_MESSAGE_SCROLLING</span>
</code></pre></div></div> <h3 id="display-xy-with-one-decimal">Display XY with One Decimal</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define LCD_DECIMAL_SMALL_XY</span>
</code></pre></div></div> <h3 id="screen-timeout">Screen Timeout</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define LCD_TIMEOUT_TO_STATUS 15000</span>
</code></pre></div></div> <h3 id="set-print-progress">Set Print Progress</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define LCD_SET_PROGRESS_MANUALLY</span>
</code></pre></div></div> <p>Add an <a href="/docs/gcode/M073.html"><code class="language-plaintext highlighter-rouge">M73</code></a> G-code to set the current percentage.</p> <h3 id="show-extruder-position">Show Extruder Position</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define LCD_SHOW_E_TOTAL</span>
</code></pre></div></div> <p>Show the total filament used amount during printing.</p> <h3 id="display-settings">Display Settings</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(SHOW_BOOTSCREEN)
</span>  <span class="cp">#define BOOTSCREEN_TIMEOUT 4000        // (ms) Total Duration to display the boot screen(s)
#endif
</span>
<span class="cp">#if HAS_GRAPHICAL_LCD &amp;&amp; EITHER(SDSUPPORT, LCD_SET_PROGRESS_MANUALLY)
</span>  <span class="c1">//#define PRINT_PROGRESS_SHOW_DECIMALS // Show progress with decimal digits</span>
  <span class="c1">//#define SHOW_REMAINING_TIME          // Display estimated time to completion</span>
  <span class="cp">#if ENABLED(SHOW_REMAINING_TIME)
</span>    <span class="c1">//#define USE_M73_REMAINING_TIME     // Use remaining time from M73 command instead of estimation</span>
    <span class="c1">//#define ROTATE_PROGRESS_DISPLAY    // Display (P)rogress, (E)lapsed, and (R)emaining time</span>
  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for further information.</p> <h3 id="progress-bar-character-lcd">Progress Bar (character LCD)</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define LCD_PROGRESS_BAR              // Show a progress bar on HD44780 LCDs for SD printing</span>
<span class="cp">#if ENABLED(LCD_PROGRESS_BAR)
</span>  <span class="cp">#define PROGRESS_BAR_BAR_TIME 2000    // (ms) Amount of time to show the bar
</span>  <span class="cp">#define PROGRESS_BAR_MSG_TIME 3000    // (ms) Amount of time to show the status message
</span>  <span class="cp">#define PROGRESS_MSG_EXPIRE   0       // (ms) Amount of time to retain the status message (0=forever)
</span>  <span class="c1">//#define PROGRESS_MSG_ONCE           // Show the message for MSG_TIME then clear it</span>
  <span class="c1">//#define LCD_PROGRESS_BAR_TEST       // Add a menu item to test the progress bar</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Show a progress bar on HD44780 LCDs for SD printing. Sub-options determine how long to show the progress bar and status message, how long to retain the status message, and whether to include a progress bar test in the Debug menu.</p> <h2 id="sd-card-support">SD Card Support</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SD_DETECT_STATE HIGH</span>
<span class="cp">#define SD_FINISHED_STEPPERRELEASE true
#define SD_FINISHED_RELEASECOMMAND "M84 X Y Z E"
#define SDCARD_RATHERRECENTFIRST
#define SD_MENU_CONFIRM_START
</span><span class="c1">//#define MENU_ADDAUTOSTART</span>
<span class="cp">#define EVENT_GCODE_SD_STOP "G28XY"
#if ENABLED(PRINTER_EVENT_LEDS)
</span>  <span class="cp">#define PE_LEDS_COMPLETED_TIME  (30*60)
#endif
</span></code></pre></div></div> <p>See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for more details.</p> <h3 id="power-loss-recovery">Power Loss Recovery</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define POWER_LOSS_RECOVERY</span>
<span class="cp">#if ENABLED(POWER_LOSS_RECOVERY)
</span>  <span class="cp">#define PLR_ENABLED_DEFAULT   false
</span>  <span class="c1">//#define BACKUP_POWER_SUPPLY</span>
  <span class="c1">//#define POWER_LOSS_ZRAISE       2</span>
  <span class="c1">//#define POWER_LOSS_PIN         44</span>
  <span class="c1">//#define POWER_LOSS_STATE     HIGH</span>
  <span class="c1">//#define POWER_LOSS_PULL</span>
  <span class="c1">//#define POWER_LOSS_PURGE_LEN   20</span>
  <span class="c1">//#define POWER_LOSS_RETRACT_LEN 10</span>
  <span class="cp">#define POWER_LOSS_MIN_Z_CHANGE 0.05
#endif
</span></code></pre></div></div> <p>See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for more details.</p> <h3 id="sd-card-sorting-options">SD Card Sorting Options</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SDCARD_SORT_ALPHA</span>
<span class="cp">#if ENABLED(SDCARD_SORT_ALPHA)
</span>  <span class="cp">#define SDSORT_LIMIT       40
</span>  <span class="cp">#define FOLDER_SORTING     -1
</span>  <span class="cp">#define SDSORT_GCODE       false
</span>  <span class="cp">#define SDSORT_USES_RAM    false
</span>  <span class="cp">#define SDSORT_USES_STACK  false
</span>  <span class="cp">#define SDSORT_CACHE_NAMES false
</span>  <span class="cp">#define SDSORT_DYNAMIC_RAM false
</span>  <span class="cp">#define SDSORT_CACHE_VFATS 2
#endif
</span></code></pre></div></div> <p>See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for more details.</p> <h3 id="long-filenames">Long Filenames</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define LONG_FILENAME_HOST_SUPPORT</span>
</code></pre></div></div> <p>This allows hosts to request long names for files and folders with <a href="/docs/gcode/M033.html"><code class="language-plaintext highlighter-rouge">M33</code></a></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SCROLL_LONG_FILENAMES</span>
</code></pre></div></div> <p>Enable this option to scroll long filenames in the SD card menu</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SD_ABORT_NO_COOLDOWN</span>
</code></pre></div></div> <p>Leave the heaters on after Stop Print (not recommended!)</p> <h3 id="abort-on-endstop-hit">Abort on Endstop Hit</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SD_ABORT_ON_ENDSTOP_HIT</span>
</code></pre></div></div> <p>Add an option for the firmware to abort SD printing if any endstop is triggered. Turn on with <a href="/docs/gcode/M540.html"><code class="language-plaintext highlighter-rouge">M540</code></a> <code class="language-plaintext highlighter-rouge">S1</code> (or from the LCD menu) and make sure endstops are enabled (<a href="/docs/gcode/M120.html"><code class="language-plaintext highlighter-rouge">M120</code></a>) during SD printing.</p> <h3 id="reprint-last-file">Reprint Last File</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SD_REPRINT_LAST_SELECTED_FILE</span>
</code></pre></div></div> <p>This option makes it easier to print the same SD Card file again. Whenever an SD print completes the LCD Menu will open with the same file selected. From there you can click to start a new print, or you can navigate elsewhere.</p> <h3 id="auto-report-sd-status">Auto Report SD Status</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define AUTO_REPORT_SD_STATUS</span>
</code></pre></div></div> <p>Auto-report SD card status with <a href="/docs/gcode/M027.html"><code class="language-plaintext highlighter-rouge">M27</code></a> S<seconds></seconds></p> <h3 id="usb-flash-drive-support">USB Flash Drive Support</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define USB_FLASH_DRIVE_SUPPORT</span>
<span class="cp">#if ENABLED(USB_FLASH_DRIVE_SUPPORT)
</span>  <span class="cp">#define USB_CS_PIN    SDSS
</span>  <span class="cp">#define USB_INTR_PIN  SD_DETECT_PIN
</span>  <span class="c1">//#define USE_UHS3_USB</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for more details.</p> <h3 id="firmware-update">Firmware Update</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SD_FIRMWARE_UPDATE</span>
<span class="cp">#if ENABLED(SD_FIRMWARE_UPDATE)
</span>  <span class="cp">#define SD_FIRMWARE_UPDATE_EEPROM_ADDR    0x1FF
</span>  <span class="cp">#define SD_FIRMWARE_UPDATE_ACTIVE_VALUE   0xF0
</span>  <span class="cp">#define SD_FIRMWARE_UPDATE_INACTIVE_VALUE 0xFF
#endif
</span></code></pre></div></div> <p>See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for more details.</p> <h3 id="binary-file-transfer">Binary File Transfer</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define BINARY_FILE_TRANSFER</span>
</code></pre></div></div> <p>See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for more details.</p> <h3 id="sd-card-connection">SD Card Connection</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SDCARD_CONNECTION LCD</span>
</code></pre></div></div> <p>Choose between <code class="language-plaintext highlighter-rouge">LCD</code>, <code class="language-plaintext highlighter-rouge">ONBOARD</code> or <code class="language-plaintext highlighter-rouge">CUSTOM_CABLE</code> or use the board’s default.</p> <h3 id="hide-sd-card-from-host">Hide SD Card from Host</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define NO_SD_HOST_DRIVE
</span></code></pre></div></div> <p>Disable SD Card access over USB (for security). This option hides the SD card from the host PC.</p> <h2 id="graphical-display-extras">Graphical Display Extras</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if HAS_GRAPHICAL_LCD
</span>  <span class="c1">//#define DOGM_SD_PERCENT</span>
  <span class="cp">#define XYZ_HOLLOW_FRAME
</span>  <span class="cp">#define MENU_HOLLOW_FRAME
</span>  <span class="c1">//#define USE_BIG_EDIT_FONT</span>
  <span class="c1">//#define USE_SMALL_INFOFONT</span>
  <span class="c1">//#define OVERLAY_GFX_REVERSE</span>

  <span class="cp">#if ENABLED(U8GLIB_ST7920)
</span>    <span class="c1">//#define DOGM_SPI_DELAY_US 5</span>
    <span class="c1">//#define LIGHTWEIGHT_UI</span>
    <span class="cp">#if ENABLED(LIGHTWEIGHT_UI)
</span>      <span class="cp">#define STATUS_EXPIRE_SECONDS 20
</span>    <span class="cp">#endif
</span>  <span class="cp">#endif
</span></code></pre></div></div> <p>Use the optimizations here to improve printing performance, which can be adversely affected by graphical display drawing, especially when doing several short moves, and when printing on DELTA and SCARA machines.</p> <p>Some of these options may result in the display lagging behind controller events, as there is a trade-off between reliable printing performance versus fast display updates.</p> <h3 id="status-info-screen-customizations">Status (Info) Screen Customizations</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define STATUS_COMBINE_HEATERS</span>
<span class="c1">//#define STATUS_HOTEND_NUMBERLESS</span>
<span class="cp">#define STATUS_HOTEND_INVERTED
#define STATUS_HOTEND_ANIM
#define STATUS_BED_ANIM
#define STATUS_CHAMBER_ANIM
</span><span class="c1">//#define STATUS_CUTTER_ANIM</span>
<span class="c1">//#define STATUS_ALT_BED_BITMAP</span>
<span class="c1">//#define STATUS_ALT_FAN_BITMAP</span>
<span class="c1">//#define STATUS_FAN_FRAMES 3</span>
<span class="c1">//#define STATUS_HEAT_PERCENT</span>
<span class="c1">//#define BOOT_MARLIN_LOGO_SMALL</span>
<span class="c1">//#define BOOT_MARLIN_LOGO_ANIMATED</span>
</code></pre></div></div> <h3 id="frivolous-game-options">Frivolous Game Options</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MARLIN_BRICKOUT</span>
<span class="c1">//#define MARLIN_INVADERS</span>
<span class="c1">//#define MARLIN_SNAKE</span>
<span class="c1">//#define GAMES_EASTER_EGG</span>
</code></pre></div></div> <h2 id="dgus--dwin-displays-options">DGUS / DWIN Displays Options</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if HAS_DGUS_LCD
</span>  <span class="cp">#define DGUS_SERIAL_PORT 3
</span>  <span class="cp">#define DGUS_BAUDRATE 115200
</span>
  <span class="cp">#define DGUS_RX_BUFFER_SIZE 128
</span>  <span class="cp">#define DGUS_TX_BUFFER_SIZE 48
</span>  <span class="c1">//#define DGUS_SERIAL_STATS_RX_BUFFER_OVERRUNS</span>
  <span class="cp">#define DGUS_UPDATE_INTERVAL_MS  500
</span>  <span class="cp">#if EITHER(DGUS_LCD_UI_FYSETC, DGUS_LCD_UI_HIPRECY)
</span>    <span class="cp">#define DGUS_PRINT_FILENAME
</span>    <span class="cp">#define DGUS_PREHEAT_UI
</span>    <span class="cp">#if ENABLED(DGUS_LCD_UI_FYSETC)
</span>      <span class="c1">//#define DGUS_UI_MOVE_DIS_OPTION</span>
    <span class="cp">#else
</span>      <span class="cp">#define DGUS_UI_MOVE_DIS_OPTION
</span>    <span class="cp">#endif
</span>    <span class="cp">#define DGUS_FILAMENT_LOADUNLOAD
</span>    <span class="cp">#if ENABLED(DGUS_FILAMENT_LOADUNLOAD)
</span>      <span class="cp">#define DGUS_FILAMENT_PURGE_LENGTH 10
</span>      <span class="cp">#define DGUS_FILAMENT_LOAD_LENGTH_PER_TIME 0.5
</span>    <span class="cp">#endif
</span>    <span class="cp">#define DGUS_UI_WAITING
</span>    <span class="cp">#if ENABLED(DGUS_UI_WAITING)
</span>      <span class="cp">#define DGUS_UI_WAITING_STATUS 10
</span>      <span class="cp">#define DGUS_UI_WAITING_STATUS_PERIOD 8
</span>    <span class="cp">#endif
</span>  <span class="cp">#endif
#endif // HAS_DGUS_LCD
</span></code></pre></div></div> <p>See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for more details.</p> <h2 id="ftdi-embedded-video-engine-eve-touch-ui">FTDI Embedded Video Engine (EVE) Touch UI</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(TOUCH_UI_FTDI_EVE)
</span>  <span class="c1">//#define LCD_FTDI_VM800B35A        // FTDI 3.5" with FT800 (320x240)</span>
  <span class="c1">//#define LCD_4DSYSTEMS_4DLCD_FT843 // 4D Systems 4.3" (480x272)</span>
  <span class="c1">//#define LCD_HAOYU_FT800CB         // Haoyu with 4.3" or 5" (480x272)</span>
  <span class="c1">//#define LCD_HAOYU_FT810CB         // Haoyu with 5" (800x480)</span>
  <span class="c1">//#define LCD_ALEPHOBJECTS_CLCD_UI  // Aleph Objects Color LCD UI</span>
  <span class="c1">//#define TOUCH_UI_320x240</span>
  <span class="c1">//#define TOUCH_UI_480x272</span>
  <span class="c1">//#define TOUCH_UI_800x480</span>
  <span class="c1">//#define AO_EXP1_PINMAP    // AlephObjects CLCD UI EXP1 mapping</span>
  <span class="c1">//#define AO_EXP2_PINMAP    // AlephObjects CLCD UI EXP2 mapping</span>
  <span class="c1">//#define CR10_TFT_PINMAP   // Rudolph Riedel's CR10 pin mapping</span>
  <span class="c1">//#define S6_TFT_PINMAP     // FYSETC S6 pin mapping</span>
  <span class="c1">//#define OTHER_PIN_LAYOUT  // Define pins manually below</span>
  <span class="cp">#if ENABLED(OTHER_PIN_LAYOUT)
</span>    <span class="c1">// Pins for CS and MOD_RESET (PD) must be chosen</span>
    <span class="cp">#define CLCD_MOD_RESET  9
</span>    <span class="cp">#define CLCD_SPI_CS    10
</span>    <span class="c1">//#define CLCD_USE_SOFT_SPI</span>
    <span class="cp">#if ENABLED(CLCD_USE_SOFT_SPI)
</span>      <span class="cp">#define CLCD_SOFT_SPI_MOSI 11
</span>      <span class="cp">#define CLCD_SOFT_SPI_MISO 12
</span>      <span class="cp">#define CLCD_SOFT_SPI_SCLK 13
</span>    <span class="cp">#endif
</span>  <span class="cp">#endif
</span>  <span class="c1">//#define TOUCH_UI_INVERTED</span>
  <span class="c1">//#define TOUCH_UI_PORTRAIT</span>
  <span class="c1">//#define TOUCH_UI_MIRRORED</span>
  <span class="c1">//#define TOUCH_UI_USE_UTF8</span>
  <span class="cp">#if ENABLED(TOUCH_UI_USE_UTF8)
</span>    <span class="cp">#define TOUCH_UI_UTF8_WESTERN_CHARSET
</span>    <span class="cp">#if ENABLED(TOUCH_UI_UTF8_WESTERN_CHARSET)
</span>      <span class="c1">//#define TOUCH_UI_UTF8_SUPERSCRIPTS  // ¹ ² ³</span>
      <span class="c1">//#define TOUCH_UI_UTF8_COPYRIGHT     // © ®</span>
      <span class="c1">//#define TOUCH_UI_UTF8_GERMANIC      // ß</span>
      <span class="c1">//#define TOUCH_UI_UTF8_SCANDINAVIAN  // Æ Ð Ø Þ æ ð ø þ</span>
      <span class="c1">//#define TOUCH_UI_UTF8_PUNCTUATION   // « » ¿ ¡</span>
      <span class="c1">//#define TOUCH_UI_UTF8_CURRENCY      // ¢ £ ¤ ¥</span>
      <span class="c1">//#define TOUCH_UI_UTF8_ORDINALS      // º ª</span>
      <span class="c1">//#define TOUCH_UI_UTF8_MATHEMATICS   // ± × ÷</span>
      <span class="c1">//#define TOUCH_UI_UTF8_FRACTIONS     // ¼ ½ ¾</span>
      <span class="c1">//#define TOUCH_UI_UTF8_SYMBOLS       // µ ¶ ¦ § ¬</span>
    <span class="cp">#endif
</span>  <span class="cp">#endif
</span>  <span class="cp">#define TOUCH_UI_FIT_TEXT
</span>  <span class="c1">//#define LCD_LANGUAGE_1 en</span>
  <span class="c1">//#define LCD_LANGUAGE_2 fr</span>
  <span class="c1">//#define LCD_LANGUAGE_3 de</span>
  <span class="c1">//#define LCD_LANGUAGE_4 es</span>
  <span class="c1">//#define LCD_LANGUAGE_5 it</span>
  <span class="c1">//#define TOUCH_UI_PASSCODE</span>
  <span class="c1">//#define TOUCH_UI_DEBUG</span>
  <span class="c1">//#define TOUCH_UI_DEVELOPER_MENU</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for more details.</p> <h2 id="fsmc-graphical-tft">FSMC Graphical TFT</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(FSMC_GRAPHICAL_TFT)
</span>  <span class="c1">//#define TFT_MARLINUI_COLOR 0xFFFF // White</span>
  <span class="c1">//#define TFT_MARLINBG_COLOR 0x0000 // Black</span>
  <span class="c1">//#define TFT_DISABLED_COLOR 0x0003 // Almost black</span>
  <span class="c1">//#define TFT_BTCANCEL_COLOR 0xF800 // Red</span>
  <span class="c1">//#define TFT_BTARROWS_COLOR 0xDEE6 // 11011 110111 00110 Yellow</span>
  <span class="c1">//#define TFT_BTOKMENU_COLOR 0x145F // 00010 100010 11111 Cyan</span>
<span class="cp">#endif
</span></code></pre></div></div> <h2 id="adc-button-debounce">ADC Button Debounce</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if HAS_ADC_BUTTONS
</span>  <span class="cp">#define ADC_BUTTON_DEBOUNCE_DELAY 16  // (ms) Increase if buttons bounce or repeat too fast
#endif
</span></code></pre></div></div> <h2 id="watchdog">Watchdog</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define USE_WATCHDOG
</span></code></pre></div></div> <p>The hardware watchdog should reset the micro-controller, disabling all outputs, in case the firmware gets stuck and doesn’t do temperature regulation.</p> <h3 id="watchdog-manual-reset">Watchdog Manual Reset</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(USE_WATCHDOG)
</span>  <span class="c1">//#define WATCHDOG_RESET_MANUAL</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>If you have a watchdog reboot in an ATmega2560 the device can hang forever, as a watchdog reset will leave the watchdog on. The <code class="language-plaintext highlighter-rouge">WATCHDOG_RESET_MANUAL</code> option works around this by eschewing the hardware reset. However, <strong>this feature is unsafe</strong> because it only works if interrupts are disabled, and the code could hang in an interrupt routine with interrupts disabled.</p> <h2 id="babystepping">Babystepping</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define BABYSTEPPING</span>
<span class="cp">#if ENABLED(BABYSTEPPING)
</span>  <span class="c1">//#define INTEGRATED_BABYSTEPPING         // EXPERIMENTAL integration of babystepping into the Stepper ISR</span>
  <span class="c1">//#define BABYSTEP_WITHOUT_HOMING</span>
  <span class="c1">//#define BABYSTEP_XY                     // Also enable X/Y Babystepping. Not supported on DELTA!</span>
  <span class="cp">#define BABYSTEP_INVERT_Z false           // Change if Z babysteps should go the other way
</span>  <span class="cp">#define BABYSTEP_MULTIPLICATOR_Z  1       // Babysteps are very small. Increase for faster motion.
</span>  <span class="cp">#define BABYSTEP_MULTIPLICATOR_XY 1
</span>  <span class="c1">//#define DOUBLECLICK_FOR_Z_BABYSTEPPING  // Double-click on the Status Screen for Z Babystepping.</span>
  <span class="cp">#if ENABLED(DOUBLECLICK_FOR_Z_BABYSTEPPING)
</span>    <span class="cp">#define DOUBLECLICK_MAX_INTERVAL 1250
</span>    <span class="c1">//#define BABYSTEP_ALWAYS_AVAILABLE</span>
    <span class="c1">//#define MOVE_Z_WHEN_IDLE</span>
    <span class="cp">#if ENABLED(MOVE_Z_WHEN_IDLE)
</span>      <span class="cp">#define MOVE_Z_IDLE_MULTIPLICATOR 1
</span>    <span class="cp">#endif
</span>  <span class="cp">#endif
</span>  <span class="c1">//#define BABYSTEP_DISPLAY_TOTAL</span>
  <span class="c1">//#define BABYSTEP_ZPROBE_OFFSET</span>
  <span class="cp">#if ENABLED(BABYSTEP_ZPROBE_OFFSET)
</span>    <span class="c1">//#define BABYSTEP_HOTEND_Z_OFFSET</span>
    <span class="c1">//#define BABYSTEP_ZPROBE_GFX_OVERLAY</span>
  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>Babystepping enables <a href="/docs/gcode/M290.html"><code class="language-plaintext highlighter-rouge">M290</code></a> and LCD menu items to move the axes by tiny increments without changing the current position values. This feature is used primarily to adjust the Z axis in the first layer of a print in real-time. <em>Warning: Does not respect endstops!</em></p> <h2 id="linear-advance">Linear Advance</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define LIN_ADVANCE</span>
<span class="cp">#if ENABLED(LIN_ADVANCE)
</span>  <span class="c1">//#define EXTRA_LIN_ADVANCE_K // Enable for second linear advance constants</span>
  <span class="cp">#define LIN_ADVANCE_K 0.22    // Unit: mm compression per 1mm/s extruder speed
</span>  <span class="c1">//#define LA_DEBUG            // If enabled, this will generate debug information output over USB.</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>This feature allows Marlin to use linear pressure control for print extrusion, to eliminate ooze, improve corners, etc. See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> and the <a href="/docs/features/lin_advance.html">Linear Advance page</a> for more complete documentation.</p> <h2 id="leveling">Leveling</h2> <h3 id="3-point-options">3-Point Options</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if EITHER(AUTO_BED_LEVELING_3POINT, AUTO_BED_LEVELING_UBL)
</span>  <span class="c1">//#define PROBE_PT_1_X 15</span>
  <span class="c1">//#define PROBE_PT_1_Y 180</span>
  <span class="c1">//#define PROBE_PT_2_X 15</span>
  <span class="c1">//#define PROBE_PT_2_Y 20</span>
  <span class="c1">//#define PROBE_PT_3_X 170</span>
  <span class="c1">//#define PROBE_PT_3_Y 20</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>These options specify the three points that will be probed during <a href="/docs/gcode/G029.html"><code class="language-plaintext highlighter-rouge">G29</code></a>. Use to override if the automatically selected points are inadequate.</p> <h3 id="custom-mininum-probe-edge">Custom Mininum Probe Edge</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if PROBE_SELECTED &amp;&amp; !IS_KINEMATIC
</span>  <span class="c1">//#define PROBING_MARGIN_LEFT PROBING_MARGIN</span>
  <span class="c1">//#define PROBING_MARGIN_RIGHT PROBING_MARGIN</span>
  <span class="c1">//#define PROBING_MARGIN_FRONT PROBING_MARGIN</span>
  <span class="c1">//#define PROBING_MARGIN_BACK PROBING_MARGIN</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for more details.</p> <h3 id="custom-mesh-area">Custom Mesh Area</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if EITHER(MESH_BED_LEVELING, AUTO_BED_LEVELING_UBL)
</span>  <span class="c1">//#define MESH_MIN_X MESH_INSET</span>
  <span class="c1">//#define MESH_MIN_Y MESH_INSET</span>
  <span class="c1">//#define MESH_MAX_X X_BED_SIZE - (MESH_INSET)</span>
  <span class="c1">//#define MESH_MAX_Y Y_BED_SIZE - (MESH_INSET)</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Override the mesh area if the automatic (max) area is too large.</p> <h3 id="g29-retry-and-recover">G29 Retry and Recover</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define G29_RETRY_AND_RECOVER</span>
<span class="cp">#if ENABLED(G29_RETRY_AND_RECOVER)
</span>  <span class="cp">#define G29_MAX_RETRIES 3
</span>  <span class="cp">#define G29_HALT_ON_FAILURE
</span>  <span class="cp">#define G29_SUCCESS_COMMANDS "M117 Bed leveling done."
</span>  <span class="cp">#define G29_RECOVER_COMMANDS "M117 Probe failed. Rewiping.\nG28\nG12 P0 S12 T0"
</span>  <span class="cp">#define G29_FAILURE_COMMANDS "M117 Bed leveling failed.\nG0 Z10\nM300 P25 S880\nM300 P50 S0\nM300 P25 S880\nM300 P50 S0\nM300 P25 S880\nM300 P50 S0\nG4 S1"
#endif
</span></code></pre></div></div> <p>Repeatedly attempt <a href="/docs/gcode/G029.html"><code class="language-plaintext highlighter-rouge">G29</code></a> leveling until it succeeds. Stop after <code class="language-plaintext highlighter-rouge">G29_MAX_RETRIES</code> attempts.</p> <h3 id="thermal-probe-compensation">Thermal Probe Compensation</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if HAS_BED_PROBE &amp;&amp; TEMP_SENSOR_PROBE &amp;&amp; TEMP_SENSOR_BED
</span>  <span class="cp">#define PROBE_TEMP_COMPENSATION
</span>  <span class="cp">#if ENABLED(PROBE_TEMP_COMPENSATION)
</span>    <span class="cp">#define PTC_PARK_POS   { 0, 0, 100 }
</span>    <span class="cp">#define PTC_PROBE_POS  { 90, 100 }
</span>    <span class="c1">//#define USE_TEMP_EXT_COMPENSATION</span>
  <span class="cp">#endif
</span></code></pre></div></div> <p>Probe measurements are adjusted to compensate for temperature distortion. Use <a href="/docs/gcode/G076.html"><code class="language-plaintext highlighter-rouge">G76</code></a> to calibrate this feature. Use <a href="/docs/gcode/M871.html"><code class="language-plaintext highlighter-rouge">M871</code></a> to set values manually. For a more detailed explanation of the process see <code class="language-plaintext highlighter-rouge">G76_M871.cpp</code> and <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code>.</p> <h2 id="enhanced-g-code">Enhanced G-code</h2> <h3 id="g60g61-position-save-and-return">G60/G61 Position Save and Return</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SAVED_POSITIONS 1         // Each saved position slot costs 12 bytes</span>
</code></pre></div></div> <p>Enables <a href="/docs/gcode/G060.html"><code class="language-plaintext highlighter-rouge">G60</code></a> &amp; <a href="/docs/gcode/G061.html"><code class="language-plaintext highlighter-rouge">G61</code></a> and specifies number of available slots.</p> <h3 id="g2g3-arc-support">G2/G3 Arc Support</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define ARC_SUPPORT               // Disable this feature to save ~3226 bytes
#if ENABLED(ARC_SUPPORT)
</span>  <span class="cp">#define MM_PER_ARC_SEGMENT  1   // Length of each arc segment
</span>  <span class="cp">#define N_ARC_CORRECTION   25   // Number of intertpolated segments between corrections
</span>  <span class="c1">//#define ARC_P_CIRCLES         // Enable the 'P' parameter to specify complete circles</span>
  <span class="c1">//#define CNC_WORKSPACE_PLANES  // Allow G2/G3 to operate in XY, ZX, or YZ planes</span>
<span class="cp">#endif
</span></code></pre></div></div> <p><a href="/docs/gcode/G002-G003.html"><code class="language-plaintext highlighter-rouge">G2/G3</code></a> Arc Support</p> <h3 id="g5-bezier-curve">G5 Bezier Curve</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define BEZIER_CURVE_SUPPORT</span>
</code></pre></div></div> <p>Support for <a href="/docs/gcode/G005.html"><code class="language-plaintext highlighter-rouge">G5</code></a> with XYZE destination and IJPQ offsets. Requires ~2666 bytes.</p> <h3 id="g382g383-probe-target">G38.2/G38.3 Probe Target</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define G38_PROBE_TARGET</span>
<span class="cp">#if ENABLED(G38_PROBE_TARGET)
</span>  <span class="cp">#define G38_MINIMUM_MOVE 0.0275 // (mm) Minimum distance that will produce a move
#endif
</span></code></pre></div></div> <p>Add commands <a href="/docs/gcode/G038.html"><code class="language-plaintext highlighter-rouge">G38.2</code></a> and <a href="/docs/gcode/G038.html"><code class="language-plaintext highlighter-rouge">G38.3</code></a> to probe towards target. Enable <code class="language-plaintext highlighter-rouge">PROBE_DOUBLE_TOUCH</code> if you want <a href="/docs/gcode/G038.html"><code class="language-plaintext highlighter-rouge">G38</code></a> to double touch.</p> <h2 id="stepper-driver-tuning">Stepper Driver Tuning</h2> <h3 id="minimum-steps-per-segment">Minimum Steps Per Segment</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define MIN_STEPS_PER_SEGMENT 6
</span></code></pre></div></div> <p>Moves (or segments) with fewer steps than this will be joined with the next move.</p> <h3 id="minimum-stepper-delay">Minimum Stepper Delay</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MINIMUM_STEPPER_POST_DIR_DELAY 650</span>
<span class="c1">//#define MINIMUM_STEPPER_PRE_DIR_DELAY 650</span>
</code></pre></div></div> <p>Minimum delay before and after setting the stepper DIR (in ns). See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for more details.</p> <h3 id="minimum-stepper-pulse">Minimum Stepper Pulse</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define MINIMUM_STEPPER_PULSE 2 // (µs) The smallest stepper pulse allowed
</span></code></pre></div></div> <p>The minimum pulse width (in µs) for stepping a stepper. Set this if you find stepping unreliable, or if using a very fast CPU.</p> <h3 id="maximum-stepper-rate">Maximum Stepper Rate</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MAXIMUM_STEPPER_RATE 250000</span>
</code></pre></div></div> <p>Maximum stepping rate (in Hz) the stepper driver allows. If undefined, defaults to 1MHz / (2 * MINIMUM_STEPPER_PULSE). See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for more details.</p> <h2 id="parallel-heaters">Parallel Heaters</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define HEATERS_PARALLEL</span>
</code></pre></div></div> <p>Control heater 0 and heater 1 in parallel.</p> <h2 id="buffer--hosts">Buffer / Hosts</h2> <h3 id="block-buffer">Block Buffer</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(SDSUPPORT)
</span>  <span class="cp">#define BLOCK_BUFFER_SIZE 16 // SD,LCD,Buttons take more memory, block buffer needs to be smaller
#else
</span>  <span class="cp">#define BLOCK_BUFFER_SIZE 16 // maximize block buffer
#endif
</span></code></pre></div></div> <p>The number of linear motions that can be in the plan at any give time. The <code class="language-plaintext highlighter-rouge">BLOCK_BUFFER_SIZE</code> must be a power of 2, (8, 16, 32, etc.) because shifts and ors are used to do the ring-buffering.</p> <h3 id="serial-command-buffer">Serial Command Buffer</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define MAX_CMD_SIZE 96
#define BUFSIZE 4
</span></code></pre></div></div> <p>The ASCII buffer for serial input. Individual command line length is set by <code class="language-plaintext highlighter-rouge">MAX_CMD_SIZE</code>, and should be long enough to hold a complete G-code line. Set the number of lines with <code class="language-plaintext highlighter-rouge">BUFSIZE</code>.</p> <h3 id="transmit-to-host-buffer">Transmit to Host Buffer</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define TX_BUFFER_SIZE 0
</span></code></pre></div></div> <p>Transmission to Host buffer size. To save 386 bytes of PROGMEM (and <code class="language-plaintext highlighter-rouge">TX_BUFFER_SIZE</code>+3 bytes of SRAM) set to 0. To buffer a simple “ok” you need 4 bytes. An <code class="language-plaintext highlighter-rouge">ADVANCED_OK</code> (<a href="/docs/gcode/M105.html"><code class="language-plaintext highlighter-rouge">M105</code></a>) needs 32 bytes. For debug-echo: 128 bytes for the optimal speed. Other output doesn’t need to be that speedy.</p> <h3 id="host-receive-buffer">Host Receive Buffer</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define RX_BUFFER_SIZE 1024</span>
<span class="cp">#if RX_BUFFER_SIZE &gt;= 1024
</span>  <span class="c1">//#define SERIAL_XON_XOFF</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Host Receive buffer size. Without XON/XOFF flow control (see <code class="language-plaintext highlighter-rouge">SERIAL_XON_XOFF</code> below) 32 bytes should be enough. To use flow control, set this buffer size to at least 1024 bytes.</p> <h3 id="sd-transfer-stats">SD Transfer Stats</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(SDSUPPORT)
</span>  <span class="c1">//#define SERIAL_STATS_MAX_RX_QUEUED</span>
  <span class="c1">//#define SERIAL_STATS_DROPPED_RX</span>
<span class="cp">#endif
</span></code></pre></div></div> <h3 id="emergency-parser">Emergency Parser</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define EMERGENCY_PARSER</span>
</code></pre></div></div> <p>Enable an emergency-command parser to intercept certain commands as they enter the serial receive buffer, so they cannot be blocked. Currently handles <a href="/docs/gcode/M108.html"><code class="language-plaintext highlighter-rouge">M108</code></a>, <a href="/docs/gcode/M112.html"><code class="language-plaintext highlighter-rouge">M112</code></a>, and <a href="/docs/gcode/M410.html"><code class="language-plaintext highlighter-rouge">M410</code></a>. Does not work on boards using AT90USB (USBCON) processors!</p> <h3 id="no-timeouts">No Timeouts</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define NO_TIMEOUTS 1000 // (ms)</span>
</code></pre></div></div> <p>Bad serial connections can miss a received command by sending an “ok”, and some hosts will abort after 30 seconds. Some hosts start sending commands while receiving a ‘wait’. This “wait” is only sent when the buffer is empty. 1 second is a good value here. The <code class="language-plaintext highlighter-rouge">HOST_KEEPALIVE</code> feature provides another way to keep the host alive.</p> <h3 id="advanced-ok">Advanced OK</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define ADVANCED_OK</span>
</code></pre></div></div> <p>Include extra information about the buffer in “ok” messages. Some hosts will have this feature soon. This could make the <code class="language-plaintext highlighter-rouge">NO_TIMEOUTS</code> unnecessary.</p> <h3 id="serial-overrun-protection">Serial Overrun Protection</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SERIAL_OVERRUN_PROTECTION
</span></code></pre></div></div> <p>Printrun may have trouble receiving long strings all at once. This option inserts short delays between lines of serial output.</p> <h3 id="serial-float-precision">Serial Float Precision</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SERIAL_FLOAT_PRECISION 4</span>
</code></pre></div></div> <p>For serial echo, the number of digits after the decimal point</p> <h3 id="proportional-font-ratio">Proportional Font Ratio</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define PROPORTIONAL_FONT_RATIO 1.0
</span></code></pre></div></div> <p>Some hosts use a proportional font in their output console. This makes it hard to read output from Marlin that relies on fixed-width for alignment. This option tells Marlin how many spaces are required to fill up a typical character space in the host font. For clients that use a fixed-width font (like OctoPrint), leave this set to 1.0. Otherwise, adjust according to your host.</p> <h2 id="extra-fan-speed">Extra Fan Speed</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define EXTRA_FAN_SPEED</span>
</code></pre></div></div> <p>Add a secondary fan speed for each print-cooling fan. <a href="/docs/gcode/M106.html"><code class="language-plaintext highlighter-rouge">M106</code></a></p> <ul> <li> <code class="language-plaintext highlighter-rouge">M106 P[fan] T3-255</code> sets a secondary speed for [fan].</li> <li> <code class="language-plaintext highlighter-rouge">M106 P[fan] T2</code> uses the set secondary speed.</li> <li> <code class="language-plaintext highlighter-rouge">M106 P[fan] T1</code> restores the previous fan speed</li> </ul> <h2 id="firmware-retraction">Firmware Retraction</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define FWRETRACT</span>
<span class="cp">#if ENABLED(FWRETRACT)
</span>  <span class="cp">#define FWRETRACT_AUTORETRACT           // Override slicer retractions
</span>  <span class="cp">#if ENABLED(FWRETRACT_AUTORETRACT)
</span>    <span class="cp">#define MIN_AUTORETRACT 0.1           // (mm) Don't convert E moves under this length
</span>    <span class="cp">#define MAX_AUTORETRACT 10.0          // (mm) Don't convert E moves over this length
</span>  <span class="cp">#endif
</span>  <span class="cp">#define RETRACT_LENGTH 3                // (mm) Default retract length (positive value)
</span>  <span class="cp">#define RETRACT_LENGTH_SWAP 13          // (mm) Default swap retract length (positive value)
</span>  <span class="cp">#define RETRACT_FEEDRATE 45             // (mm/s) Default feedrate for retracting
</span>  <span class="cp">#define RETRACT_ZRAISE 0                // (mm) Default retract Z-raise
</span>  <span class="cp">#define RETRACT_RECOVER_LENGTH 0        // (mm) Default additional recover length (added to retract length on recover)
</span>  <span class="cp">#define RETRACT_RECOVER_LENGTH_SWAP 0   // (mm) Default additional swap recover length (added to retract length on recover from toolchange)
</span>  <span class="cp">#define RETRACT_RECOVER_FEEDRATE 8      // (mm/s) Default feedrate for recovering from retraction
</span>  <span class="cp">#define RETRACT_RECOVER_FEEDRATE_SWAP 8 // (mm/s) Default feedrate for recovering from swap retraction
</span>  <span class="cp">#if ENABLED(MIXING_EXTRUDER)
</span>    <span class="c1">//#define RETRACT_SYNC_MIXING         // Retract and restore all mixing steppers simultaneously</span>
  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>This option adds <a href="/docs/gcode/G010.html"><code class="language-plaintext highlighter-rouge">G10</code></a>/<a href="/docs/gcode/G011.html"><code class="language-plaintext highlighter-rouge">G11</code></a> commands for automatic firmware-based retract/recover. Use <a href="/docs/gcode/M207.html"><code class="language-plaintext highlighter-rouge">M207</code></a> and <a href="/docs/gcode/G038.html"><code class="language-plaintext highlighter-rouge">M208</code></a> to set the parameters, and <a href="/docs/gcode/M209.html"><code class="language-plaintext highlighter-rouge">M209</code></a> to enable/disable. With auto-retract enabled, all <code class="language-plaintext highlighter-rouge">G1 E</code> moves within the set range will be converted to firmware-based retract/recover moves.</p> <p><strong>Be sure to turn off auto-retract during filament change!</strong> All <a href="/docs/gcode/M207.html"><code class="language-plaintext highlighter-rouge">M207</code></a>/<a href="/docs/gcode/M208.html"><code class="language-plaintext highlighter-rouge">M208</code></a>/<a href="/docs/gcode/M209.html"><code class="language-plaintext highlighter-rouge">M209</code></a> settings are saved to EEPROM.</p> <h3 id="universal-tool-change-settings">Universal Tool Change Settings</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if EXTRUDERS &gt; 1
</span>  <span class="cp">#define TOOLCHANGE_ZRAISE     2  // (mm)
</span>  <span class="c1">//#define TOOLCHANGE_NO_RETURN   // Never return to the previous position on tool-change</span>
  <span class="cp">#if ENABLED(TOOLCHANGE_NO_RETURN)
</span>    <span class="c1">//#define EVENT_GCODE_AFTER_TOOLCHANGE "G12X"   // G-code to run after tool-change is complete</span>
  <span class="cp">#endif
</span>  <span class="c1">//#define TOOLCHANGE_FILAMENT_SWAP</span>
  <span class="cp">#if ENABLED(TOOLCHANGE_FILAMENT_SWAP)
</span>    <span class="cp">#define TOOLCHANGE_FIL_SWAP_LENGTH          12  // (mm)
</span>    <span class="cp">#define TOOLCHANGE_FIL_EXTRA_PRIME           2  // (mm)
</span>    <span class="cp">#define TOOLCHANGE_FIL_SWAP_RETRACT_SPEED 3600  // (mm/m)
</span>    <span class="cp">#define TOOLCHANGE_FIL_SWAP_PRIME_SPEED   3600  // (mm/m)
</span>  <span class="cp">#endif
</span>  <span class="c1">//#define TOOLCHANGE_PARK</span>
  <span class="cp">#if ENABLED(TOOLCHANGE_PARK)
</span>    <span class="cp">#define TOOLCHANGE_PARK_XY    { X_MIN_POS + 10, Y_MIN_POS + 10 }
</span>    <span class="cp">#define TOOLCHANGE_PARK_XY_FEEDRATE 6000  // (mm/m)
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <h2 id="advanced-pause">Advanced Pause</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define ADVANCED_PAUSE_FEATURE</span>
<span class="cp">#if ENABLED(ADVANCED_PAUSE_FEATURE)
</span>  <span class="cp">#define PAUSE_PARK_RETRACT_FEEDRATE         60  // (mm/s) Initial retract feedrate.
</span>  <span class="cp">#define PAUSE_PARK_RETRACT_LENGTH            2  // (mm) Initial retract.
</span>                                                  <span class="c1">// This short retract is done immediately, before parking the nozzle.</span>
  <span class="cp">#define FILAMENT_CHANGE_UNLOAD_FEEDRATE     10  // (mm/s) Unload filament feedrate. This can be pretty fast.
</span>  <span class="cp">#define FILAMENT_CHANGE_UNLOAD_ACCEL        25  // (mm/s^2) Lower acceleration may allow a faster feedrate.
</span>  <span class="cp">#define FILAMENT_CHANGE_UNLOAD_LENGTH      100  // (mm) The length of filament for a complete unload.
</span>                                                  <span class="c1">//   For Bowden, the full length of the tube and nozzle.</span>
                                                  <span class="c1">//   For direct drive, the full length of the nozzle.</span>
                                                  <span class="c1">//   Set to 0 for manual unloading.</span>
  <span class="cp">#define FILAMENT_CHANGE_SLOW_LOAD_FEEDRATE   6  // (mm/s) Slow move when starting load.
</span>  <span class="cp">#define FILAMENT_CHANGE_SLOW_LOAD_LENGTH     0  // (mm) Slow length, to allow time to insert material.
</span>                                                  <span class="c1">// 0 to disable start loading and skip to fast load only</span>
  <span class="cp">#define FILAMENT_CHANGE_FAST_LOAD_FEEDRATE   6  // (mm/s) Load filament feedrate. This can be pretty fast.
</span>  <span class="cp">#define FILAMENT_CHANGE_FAST_LOAD_ACCEL     25  // (mm/s^2) Lower acceleration may allow a faster feedrate.
</span>  <span class="cp">#define FILAMENT_CHANGE_FAST_LOAD_LENGTH     0  // (mm) Load length of filament, from extruder gear to nozzle.
</span>                                                  <span class="c1">//   For Bowden, the full length of the tube and nozzle.</span>
                                                  <span class="c1">//   For direct drive, the full length of the nozzle.</span>
  <span class="c1">//#define ADVANCED_PAUSE_CONTINUOUS_PURGE       // Purge continuously up to the purge length until interrupted.</span>
  <span class="cp">#define ADVANCED_PAUSE_PURGE_FEEDRATE        3  // (mm/s) Extrude feedrate (after loading). Should be slower than load feedrate.
</span>  <span class="cp">#define ADVANCED_PAUSE_PURGE_LENGTH         50  // (mm) Length to extrude after loading.
</span>                                                  <span class="c1">//   Set to 0 for manual extrusion.</span>
                                                  <span class="c1">//   Filament can be extruded repeatedly from the Filament Change menu</span>
                                                  <span class="c1">//   until extrusion is consistent, and to purge old filament.</span>
  <span class="cp">#define ADVANCED_PAUSE_RESUME_PRIME          0  // (mm) Extra distance to prime nozzle after returning from park.
</span>  <span class="c1">//#define ADVANCED_PAUSE_FANS_PAUSE             // Turn off print-cooling fans while the machine is paused.</span>

                                                  <span class="c1">// Filament Unload does a Retract, Delay, and Purge first:</span>
  <span class="cp">#define FILAMENT_UNLOAD_PURGE_RETRACT       13  // (mm) Unload initial retract length.
</span>  <span class="cp">#define FILAMENT_UNLOAD_PURGE_DELAY       5000  // (ms) Delay for the filament to cool after retract.
</span>  <span class="cp">#define FILAMENT_UNLOAD_PURGE_LENGTH         8  // (mm) An unretract is done, then this length is purged.
</span>  <span class="cp">#define FILAMENT_UNLOAD_PURGE_FEEDRATE      25  // (mm/s) feedrate to purge before unload
</span>
  <span class="cp">#define PAUSE_PARK_NOZZLE_TIMEOUT           45  // (seconds) Time limit before the nozzle is turned off for safety.
</span>  <span class="cp">#define FILAMENT_CHANGE_ALERT_BEEPS         10  // Number of alert beeps to play when a response is needed.
</span>  <span class="cp">#define PAUSE_PARK_NO_STEPPER_TIMEOUT           // Enable for XYZ steppers to stay powered on during filament change.
</span>
  <span class="c1">//#define PARK_HEAD_ON_PAUSE                    // Park the nozzle during pause and filament change.</span>
  <span class="c1">//#define HOME_BEFORE_FILAMENT_CHANGE           // Ensure homing has been completed prior to parking for filament change</span>

  <span class="c1">//#define FILAMENT_LOAD_UNLOAD_GCODES           // Add M701/M702 Load/Unload G-codes, plus Load/Unload in the LCD Prepare menu.</span>
  <span class="c1">//#define FILAMENT_UNLOAD_ALL_EXTRUDERS         // Allow M702 to unload all extruders above a minimum target temp (as set by M302)</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Experimental feature for filament change support and parking the nozzle when paused. Adds the <a href="/docs/gcode/M600.html"><code class="language-plaintext highlighter-rouge">M600</code></a> command to perform a filament change. With <code class="language-plaintext highlighter-rouge">PARK_HEAD_ON_PAUSE</code> enabled also adds the <a href="/docs/gcode/M125.html"><code class="language-plaintext highlighter-rouge">M125</code></a> command to pause printing and park the nozzle. Requires an LCD display. Note that <a href="/docs/gcode/M600.html"><code class="language-plaintext highlighter-rouge">M600</code></a> is required for the default <code class="language-plaintext highlighter-rouge">FILAMENT_RUNOUT_SCRIPT</code>. Requires LCD display and <code class="language-plaintext highlighter-rouge">NOZZLE_PARK_FEATURE</code>.</p> <h2 id="stepper-drivers-2">Stepper Drivers</h2> <h3 id="trinamic-tmc26x">Trinamic TMC26X</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if HAS_DRIVER(TMC26X)
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_X(TMC26X)
</span>    <span class="cp">#define X_MAX_CURRENT     1000  // (mA)
</span>    <span class="cp">#define X_SENSE_RESISTOR    91  // (mOhms)
</span>    <span class="cp">#define X_MICROSTEPS        16  // Number of microsteps
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_X2(TMC26X)
</span>    <span class="cp">#define X2_MAX_CURRENT    1000
</span>    <span class="cp">#define X2_SENSE_RESISTOR   91
</span>    <span class="cp">#define X2_MICROSTEPS       16
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_Y(TMC26X)
</span>    <span class="cp">#define Y_MAX_CURRENT     1000
</span>    <span class="cp">#define Y_SENSE_RESISTOR    91
</span>    <span class="cp">#define Y_MICROSTEPS        16
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_Y2(TMC26X)
</span>    <span class="cp">#define Y2_MAX_CURRENT    1000
</span>    <span class="cp">#define Y2_SENSE_RESISTOR   91
</span>    <span class="cp">#define Y2_MICROSTEPS       16
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_Z(TMC26X)
</span>    <span class="cp">#define Z_MAX_CURRENT     1000
</span>    <span class="cp">#define Z_SENSE_RESISTOR    91
</span>    <span class="cp">#define Z_MICROSTEPS        16
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_Z2(TMC26X)
</span>    <span class="cp">#define Z2_MAX_CURRENT    1000
</span>    <span class="cp">#define Z2_SENSE_RESISTOR   91
</span>    <span class="cp">#define Z2_MICROSTEPS       16
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_Z3(TMC26X)
</span>    <span class="cp">#define Z3_MAX_CURRENT    1000
</span>    <span class="cp">#define Z3_SENSE_RESISTOR   91
</span>    <span class="cp">#define Z3_MICROSTEPS       16
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_Z4(TMC26X)
</span>    <span class="cp">#define Z4_MAX_CURRENT    1000
</span>    <span class="cp">#define Z4_SENSE_RESISTOR   91
</span>    <span class="cp">#define Z4_MICROSTEPS       16
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_E0(TMC26X)
</span>    <span class="cp">#define E0_MAX_CURRENT    1000
</span>    <span class="cp">#define E0_SENSE_RESISTOR   91
</span>    <span class="cp">#define E0_MICROSTEPS       16
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_E1(TMC26X)
</span>    <span class="cp">#define E1_MAX_CURRENT    1000
</span>    <span class="cp">#define E1_SENSE_RESISTOR   91
</span>    <span class="cp">#define E1_MICROSTEPS       16
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_E2(TMC26X)
</span>    <span class="cp">#define E2_MAX_CURRENT    1000
</span>    <span class="cp">#define E2_SENSE_RESISTOR   91
</span>    <span class="cp">#define E2_MICROSTEPS       16
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_E3(TMC26X)
</span>    <span class="cp">#define E3_MAX_CURRENT    1000
</span>    <span class="cp">#define E3_SENSE_RESISTOR   91
</span>    <span class="cp">#define E3_MICROSTEPS       16
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_E4(TMC26X)
</span>    <span class="cp">#define E4_MAX_CURRENT    1000
</span>    <span class="cp">#define E4_SENSE_RESISTOR   91
</span>    <span class="cp">#define E4_MICROSTEPS       16
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_E5(TMC26X)
</span>    <span class="cp">#define E5_MAX_CURRENT    1000
</span>    <span class="cp">#define E5_SENSE_RESISTOR   91
</span>    <span class="cp">#define E5_MICROSTEPS       16
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_E6(TMC26X)
</span>    <span class="cp">#define E6_MAX_CURRENT    1000
</span>    <span class="cp">#define E6_SENSE_RESISTOR   91
</span>    <span class="cp">#define E6_MICROSTEPS       16
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_DRIVER_TYPE_E7(TMC26X)
</span>    <span class="cp">#define E7_MAX_CURRENT    1000
</span>    <span class="cp">#define E7_SENSE_RESISTOR   91
</span>    <span class="cp">#define E7_MICROSTEPS       16
</span>  <span class="cp">#endif
</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>You’ll need to import the <a href="//github.com/trinamic/TMC26XStepper.git">TMC26XStepper</a> library into the Arduino IDE. See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for the full set of sub-options.</p> <h3 id="trinamic-configuration">Trinamic Configuration</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if HAS_TRINAMIC_CONFIG
</span>
  <span class="cp">#define HOLD_MULTIPLIER    0.5  // Scales down the holding current from run current
</span>  <span class="cp">#define INTERPOLATE       true  // Interpolate X/Y/Z_MICROSTEPS to 256
</span>
  <span class="cp">#if AXIS_IS_TMC(X)
</span>    <span class="cp">#define X_CURRENT       800        // (mA) RMS current. Multiply by 1.414 for peak current.
</span>    <span class="cp">#define X_CURRENT_HOME  X_CURRENT  // (mA) RMS current for sensorless homing
</span>    <span class="cp">#define X_MICROSTEPS     16    // 0..256
</span>    <span class="cp">#define X_RSENSE          0.11
</span>    <span class="cp">#define X_CHAIN_POS      -1    // &lt;=0 : Not chained. 1 : MCU MOSI connected. 2 : Next in chain, ...
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(X2)
</span>    <span class="cp">#define X2_CURRENT      800
</span>    <span class="cp">#define X2_CURRENT_HOME X2_CURRENT
</span>    <span class="cp">#define X2_MICROSTEPS    16
</span>    <span class="cp">#define X2_RSENSE         0.11
</span>    <span class="cp">#define X2_CHAIN_POS     -1
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(Y)
</span>    <span class="cp">#define Y_CURRENT       800
</span>    <span class="cp">#define Y_CURRENT_HOME  Y_CURRENT
</span>    <span class="cp">#define Y_MICROSTEPS     16
</span>    <span class="cp">#define Y_RSENSE          0.11
</span>    <span class="cp">#define Y_CHAIN_POS      -1
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(Y2)
</span>    <span class="cp">#define Y2_CURRENT      800
</span>    <span class="cp">#define Y2_CURRENT_HOME Y2_CURRENT
</span>    <span class="cp">#define Y2_MICROSTEPS    16
</span>    <span class="cp">#define Y2_RSENSE         0.11
</span>    <span class="cp">#define Y2_CHAIN_POS     -1
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(Z)
</span>    <span class="cp">#define Z_CURRENT       800
</span>    <span class="cp">#define Z_CURRENT_HOME  Z_CURRENT
</span>    <span class="cp">#define Z_MICROSTEPS     16
</span>    <span class="cp">#define Z_RSENSE          0.11
</span>    <span class="cp">#define Z_CHAIN_POS      -1
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(Z2)
</span>    <span class="cp">#define Z2_CURRENT      800
</span>    <span class="cp">#define Z2_CURRENT_HOME Z2_CURRENT
</span>    <span class="cp">#define Z2_MICROSTEPS    16
</span>    <span class="cp">#define Z2_RSENSE         0.11
</span>    <span class="cp">#define Z2_CHAIN_POS     -1
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(Z3)
</span>    <span class="cp">#define Z3_CURRENT      800
</span>    <span class="cp">#define Z3_CURRENT_HOME Z3_CURRENT
</span>    <span class="cp">#define Z3_MICROSTEPS    16
</span>    <span class="cp">#define Z3_RSENSE         0.11
</span>    <span class="cp">#define Z3_CHAIN_POS     -1
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(Z4)
</span>    <span class="cp">#define Z4_CURRENT      800
</span>    <span class="cp">#define Z4_CURRENT_HOME Z4_CURRENT
</span>    <span class="cp">#define Z4_MICROSTEPS    16
</span>    <span class="cp">#define Z4_RSENSE         0.11
</span>    <span class="cp">#define Z4_CHAIN_POS     -1
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(E0)
</span>    <span class="cp">#define E0_CURRENT      800
</span>    <span class="cp">#define E0_MICROSTEPS    16
</span>    <span class="cp">#define E0_RSENSE         0.11
</span>    <span class="cp">#define E0_CHAIN_POS     -1
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(E1)
</span>    <span class="cp">#define E1_CURRENT      800
</span>    <span class="cp">#define E1_MICROSTEPS    16
</span>    <span class="cp">#define E1_RSENSE         0.11
</span>    <span class="cp">#define E1_CHAIN_POS     -1
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(E2)
</span>    <span class="cp">#define E2_CURRENT      800
</span>    <span class="cp">#define E2_MICROSTEPS    16
</span>    <span class="cp">#define E2_RSENSE         0.11
</span>    <span class="cp">#define E2_CHAIN_POS     -1
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(E3)
</span>    <span class="cp">#define E3_CURRENT      800
</span>    <span class="cp">#define E3_MICROSTEPS    16
</span>    <span class="cp">#define E3_RSENSE         0.11
</span>    <span class="cp">#define E3_CHAIN_POS     -1
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(E4)
</span>    <span class="cp">#define E4_CURRENT      800
</span>    <span class="cp">#define E4_MICROSTEPS    16
</span>    <span class="cp">#define E4_RSENSE         0.11
</span>    <span class="cp">#define E4_CHAIN_POS     -1
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(E5)
</span>    <span class="cp">#define E5_CURRENT      800
</span>    <span class="cp">#define E5_MICROSTEPS    16
</span>    <span class="cp">#define E5_RSENSE         0.11
</span>    <span class="cp">#define E5_CHAIN_POS     -1
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(E6)
</span>    <span class="cp">#define E6_CURRENT      800
</span>    <span class="cp">#define E6_MICROSTEPS    16
</span>    <span class="cp">#define E6_RSENSE         0.11
</span>    <span class="cp">#define E6_CHAIN_POS     -1
</span>  <span class="cp">#endif
</span>
  <span class="cp">#if AXIS_IS_TMC(E7)
</span>    <span class="cp">#define E7_CURRENT      800
</span>    <span class="cp">#define E7_MICROSTEPS    16
</span>    <span class="cp">#define E7_RSENSE         0.11
</span>    <span class="cp">#define E7_CHAIN_POS     -1
</span>  <span class="cp">#endif
</span></code></pre></div></div> <p>You’ll need the <a href="//github.com/teemuatlut/TMC2130Stepper">TMC2130Stepper</a> Arduino library. See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for the full set of sub-options.</p> <p>To use TMC2130 stepper drivers in SPI mode connect your SPI2130 pins to the hardware SPI interface on your board and define the required CS pins in your <code class="language-plaintext highlighter-rouge">pins_MYBOARD.h</code> file. (<em>e.g.,</em> RAMPS 1.4 uses AUX3 pins <code class="language-plaintext highlighter-rouge">X_CS_PIN 53</code>, <code class="language-plaintext highlighter-rouge">Y_CS_PIN 49</code>, etc.).</p> <h3 id="l6470-drivers">L6470 Drivers</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if HAS_L64XX
</span>  <span class="c1">//#define L6470_CHITCHAT        // Display additional status info</span>
  <span class="cp">#if AXIS_IS_L64XX(X)
</span>    <span class="cp">#define X_MICROSTEPS       128  // Number of microsteps (VALID: 1, 2, 4, 8, 16, 32, 128) - L6474 max is 16
</span>    <span class="cp">#define X_OVERCURRENT     2000  // (mA) Current where the driver detects an over current
</span>                                    <span class="c1">//   L6470 &amp; L6474 - VALID: 375 x (1 - 16) - 6A max - rounds down</span>
                                    <span class="c1">//   POWERSTEP01: VALID: 1000 x (1 - 32) - 32A max - rounds down</span>
    <span class="cp">#define X_STALLCURRENT    1500  // (mA) Current where the driver detects a stall (VALID: 31.25 * (1-128) -  4A max - rounds down)
</span>                                    <span class="c1">//   L6470 &amp; L6474 - VALID: 31.25 * (1-128) -  4A max - rounds down</span>
                                    <span class="c1">//   POWERSTEP01: VALID: 200 x (1 - 32) - 6.4A max - rounds down</span>
                                    <span class="c1">//   L6474 - STALLCURRENT setting is used to set the nominal (TVAL) current</span>
    <span class="cp">#define X_MAX_VOLTAGE      127  // 0-255, Maximum effective voltage seen by stepper - not used by L6474
</span>    <span class="cp">#define X_CHAIN_POS         -1  // Position in SPI chain, 0=Not in chain, 1=Nearest MOSI
</span>    <span class="cp">#define X_SLEW_RATE          1  // 0-3, Slew 0 is slowest, 3 is fastest
</span>  <span class="cp">#endif
</span>  <span class="p">...</span>
</code></pre></div></div> <p>You’ll need to import the <a href="//github.com/ameyer/Arduino-L6470">L6470 library</a> into the Arduino IDE for this. See <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for the full set of sub-options. NOTE: Support for L6470 was removed from Marlin in version 2.1, but may be restored in a future version if there is some demand.</p> <h2 id="experimental-i2c-bus">Experimental i2c Bus</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define EXPERIMENTAL_I2CBUS</span>
<span class="cp">#define I2C_SLAVE_ADDRESS  0 // Set a value from 8 to 127 to act as a slave
</span></code></pre></div></div> <p>This feature can be used to talk to slave devices on the i2c bus, passing data back to the host. With additional work the <code class="language-plaintext highlighter-rouge">TWIBus</code> class can be used to build a full protocol and add remote control features to Marlin, distributing load over two or more boards.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>; Example #1
; This macro sends the string "Marlin" to the slave device with address 0x63 (99)
; It uses multiple [`M260`](/docs/gcode/M260.html) commands with one B[base 10] arg
[`M260`](/docs/gcode/M260.html) A99  ; Target slave address
M260 B77  ; M
M260 B97  ; a
M260 B114 ; r
M260 B108 ; l
M260 B105 ; i
M260 B110 ; n
M260 S1   ; Send the current buffer

; Example #2
; Request 6 bytes from slave device with address 0x63 (99)
[`M261`](/docs/gcode/M261.html) A99 B5

; Example #3
; Example serial output of a M261 request
echo:i2c-reply: from:99 bytes:5 data:hello
</code></pre></div></div> <h2 id="photo-g-code">Photo G-code</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PHOTO_GCODE</span>
<span class="cp">#if ENABLED(PHOTO_GCODE)
</span>  <span class="c1">//#define PHOTO_POSITION { X_MAX_POS - 5, Y_MAX_POS, 0 }  // { xpos, ypos, zraise } (M240 X Y Z)</span>
  <span class="c1">//#define PHOTO_DELAY_MS   100</span>
  <span class="c1">//#define PHOTO_RETRACT_MM   6.5</span>
  <span class="c1">//#define PHOTOGRAPH_PIN 23</span>
  <span class="c1">//#define CHDK_PIN        4</span>
  <span class="c1">//#define PHOTO_SWITCH_POSITION { X_MAX_POS, Y_MAX_POS }</span>
  <span class="c1">//#define PHOTO_SWITCH_MS   50 // (ms) (M240 D)</span>
  <span class="c1">//#define PHOTO_PULSES_US { 2000, 27850, 400, 1580, 400, 3580, 400 }  // (µs) Durations for each 48.4kHz oscillation</span>
  <span class="cp">#ifdef PHOTO_PULSES_US
</span>    <span class="cp">#define PHOTO_PULSE_DELAY_US 13 // (µs) Approximate duration of each HIGH and LOW pulse in the oscillation
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <p>Add the <a href="/docs/gcode/M240.html"><code class="language-plaintext highlighter-rouge">M240</code></a> to take a photo. The photo can be triggered by a digital pin or a physical movement.</p> <h2 id="spindle--laser">Spindle / Laser</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define SPINDLE_FEATURE</span>
<span class="c1">//#define LASER_FEATURE</span>
<span class="cp">#if EITHER(SPINDLE_FEATURE, LASER_FEATURE)
</span>  <span class="cp">#define SPINDLE_LASER_ACTIVE_STATE    LOW    // Set to "HIGH" if SPINDLE_LASER_ENA_PIN is active HIGH
</span>
  <span class="cp">#define SPINDLE_LASER_USE_PWM                // Enable if your controller supports setting the speed/power
</span>  <span class="cp">#if ENABLED(SPINDLE_LASER_USE_PWM)
</span>    <span class="cp">#define SPINDLE_LASER_PWM_INVERT    false  // Set to "true" if the speed/power goes up when you want it to go slower
</span>    <span class="cp">#define SPINDLE_LASER_FREQUENCY     2500   // (Hz) Spindle/laser frequency (only on supported HALs: AVR and LPC)
</span>  <span class="cp">#endif
</span>
  <span class="c1">//#define AIR_EVACUATION                     // Cutter Vacuum / Laser Blower motor control with G-codes M10-M11</span>
  <span class="cp">#if ENABLED(AIR_EVACUATION)
</span>    <span class="cp">#define AIR_EVACUATION_ACTIVE       LOW    // Set to "HIGH" if the on/off function is active HIGH
</span>    <span class="c1">//#define AIR_EVACUATION_PIN        42     // Override the default Cutter Vacuum or Laser Blower pin</span>
  <span class="cp">#endif
</span>
  <span class="c1">//#define AIR_ASSIST                         // Air Assist control with G-codes M8-M9</span>
  <span class="cp">#if ENABLED(AIR_ASSIST)
</span>    <span class="cp">#define AIR_ASSIST_ACTIVE           LOW    // Active state on air assist pin
</span>    <span class="c1">//#define AIR_ASSIST_PIN            44     // Override the default Air Assist pin</span>
  <span class="cp">#endif
</span>
  <span class="c1">//#define SPINDLE_SERVO                      // A servo converting an angle to spindle power</span>
  <span class="cp">#ifdef SPINDLE_SERVO
</span>    <span class="cp">#define SPINDLE_SERVO_NR   0               // Index of servo used for spindle control
</span>    <span class="cp">#define SPINDLE_SERVO_MIN 10               // Minimum angle for servo spindle
</span>  <span class="cp">#endif
</span>
  <span class="cm">/**
   * Speed / Power can be set ('M3 S') and displayed in terms of:
   *  - PWM255  (S0 - S255)
   *  - PERCENT (S0 - S100)
   *  - RPM     (S0 - S50000)  Best for use with a spindle
   *  - SERVO   (S0 - S180)
   */</span>
  <span class="cp">#define CUTTER_POWER_UNIT PWM255
</span>
  <span class="cm">/**
   * Relative Cutter Power
   * OCR power is relative to the range SPEED_POWER_MIN...SPEED_POWER_MAX.
   * so input powers of 0...255 correspond to SPEED_POWER_MIN...SPEED_POWER_MAX
   * instead of normal range (0 to SPEED_POWER_MAX).
   * Best used with (e.g.) SuperPID router controller: S0 = 5,000 RPM and S255 = 30,000 RPM
   */</span>
  <span class="c1">//#define CUTTER_POWER_RELATIVE              // Set speed proportional to [SPEED_POWER_MIN...SPEED_POWER_MAX]</span>

  <span class="cp">#if ENABLED(SPINDLE_FEATURE)
</span>    <span class="c1">//#define SPINDLE_CHANGE_DIR               // Enable if your spindle controller can change spindle direction</span>
    <span class="cp">#define SPINDLE_CHANGE_DIR_STOP            // Enable if the spindle should stop before changing spin direction
</span>    <span class="cp">#define SPINDLE_INVERT_DIR          false  // Set to "true" if the spin direction is reversed
</span>
    <span class="cp">#define SPINDLE_LASER_POWERUP_DELAY   5000 // (ms) Delay to allow the spindle/laser to come up to speed/power
</span>    <span class="cp">#define SPINDLE_LASER_POWERDOWN_DELAY 5000 // (ms) Delay to allow the spindle to stop
</span>
    <span class="cm">/**
     * M3/M4 Power Equation
     *
     * Each tool uses different value ranges for speed / power control.
     * These parameters are used to convert between tool power units and PWM.
     *
     * Speed/Power = (PWMDC / 255 * 100 - SPEED_POWER_INTERCEPT) / SPEED_POWER_SLOPE
     * PWMDC = (spdpwr - SPEED_POWER_MIN) / (SPEED_POWER_MAX - SPEED_POWER_MIN) / SPEED_POWER_SLOPE
     */</span>
    <span class="cp">#if ENABLED(SPINDLE_LASER_USE_PWM)
</span>      <span class="cp">#define SPEED_POWER_MIN          5000    // (RPM)
</span>      <span class="cp">#define SPEED_POWER_MAX         30000    // (RPM) SuperPID router controller 0 - 30,000 RPM
</span>      <span class="cp">#define SPEED_POWER_STARTUP     25000    // (RPM) M3/M4 speed/power default (with no arguments)
</span>    <span class="cp">#endif
</span>
  <span class="cp">#else
</span>
    <span class="cp">#if ENABLED(SPINDLE_LASER_USE_PWM)
</span>      <span class="cp">#define SPEED_POWER_MIN             0    // (%) 0-100
</span>      <span class="cp">#define SPEED_POWER_MAX           100    // (%) 0-100
</span>      <span class="cp">#define SPEED_POWER_STARTUP        80    // (%) M3/M4 speed/power default (with no arguments)
</span>    <span class="cp">#endif
</span>
    <span class="c1">// Define the minimum and maximum test pulse time values for a laser test fire function</span>
    <span class="cp">#define LASER_TEST_PULSE_MIN           1   // (ms) Used with Laser Control Menu
</span>    <span class="cp">#define LASER_TEST_PULSE_MAX         999   // (ms) Caution: Menu may not show more than 3 characters
</span>
    <span class="cp">#define SPINDLE_LASER_POWERUP_DELAY   50   // (ms) Delay to allow the spindle/laser to come up to speed/power
</span>    <span class="cp">#define SPINDLE_LASER_POWERDOWN_DELAY 50   // (ms) Delay to allow the spindle to stop
</span>
    <span class="cm">/**
     * Any M3 or G1/2/3/5 command with the 'I' parameter enables continuous inline power mode.
     *
     * e.g., 'M3 I' enables continuous inline power which is processed by the planner.
     * Power is stored in move blocks and applied when blocks are processed by the Stepper ISR.
     *
     * 'M4 I' sets dynamic mode which uses the current feedrate to calculate a laser power OCR value.
     *
     * Any move in dynamic mode will use the current feed rate to calculate the laser power.
     * Feed rates are set by the F parameter of a move command e.g. G1 X0 Y10 F6000
     * Laser power would be calculated by bit shifting off 8 LSB's. In binary this is div 256.
     * The calculation gives us ocr values from 0 to 255, values over F65535 will be set as 255 .
     * More refined power control such as compesation for accell/decell will be addressed in future releases.
     *
     * M5 I clears inline mode and set power to 0, M5 sets the power output to 0 but leaves inline mode on.
     */</span>


    <span class="cm">/**
     * Enable M3 commands for laser mode inline power planner syncing.
     * This feature enables any M3 S-value to be injected into the block buffers while in
     * CUTTER_MODE_CONTINUOUS. The option allows M3 laser power to be commited without waiting
     * for a planner syncronization
     */</span>
    <span class="c1">//#define LASER_POWER_SYNC</span>

    <span class="cm">/**
     * Scale the laser's power in proportion to the movement rate.
     *
     * - Sets the entry power proportional to the entry speed over the nominal speed.
     * - Ramps the power up every N steps to approximate the speed trapezoid.
     * - Due to the limited power resolution this is only approximate.
     */</span>
    <span class="c1">//#define LASER_POWER_TRAP</span>



    <span class="c1">//</span>
    <span class="c1">// Laser I2C Ammeter (High precision INA226 low/high side module)</span>
    <span class="c1">//</span>
    <span class="c1">//#define I2C_AMMETER</span>
    <span class="cp">#if ENABLED(I2C_AMMETER)
</span>      <span class="cp">#define I2C_AMMETER_IMAX            0.1    // (Amps) Calibration value for the expected current range
</span>      <span class="cp">#define I2C_AMMETER_SHUNT_RESISTOR  0.1    // (Ohms) Calibration shunt resistor value
</span>    <span class="cp">#endif
</span>
  <span class="cp">#endif
#endif // SPINDLE_FEATURE || LASER_FEATURE
</span>
<span class="cm">/**
 * Synchronous Laser Control with M106/M107
 *
 * Marlin normally applies M106/M107 fan speeds at a time "soon after" processing
 * a planner block. This is too inaccurate for a PWM/TTL laser attached to the fan
 * header (as with some add-on laser kits). Enable this option to set fan/laser
 * speeds with much more exact timing for improved print fidelity.
 *
 * NOTE: This option sacrifices some cooling fan speed options.
 */</span>
<span class="c1">//#define LASER_SYNCHRONOUS_M106_M107</span>

<span class="cm">/**
 * Coolant Control
 *
 * Add the M7, M8, and M9 commands to turn mist or flood coolant on and off.
 *
 * Note: COOLANT_MIST_PIN and/or COOLANT_FLOOD_PIN must also be defined.
 */</span>
<span class="c1">//#define COOLANT_CONTROL</span>
<span class="cp">#if ENABLED(COOLANT_CONTROL)
</span>  <span class="cp">#define COOLANT_MIST                // Enable if mist coolant is present
</span>  <span class="cp">#define COOLANT_FLOOD               // Enable if flood coolant is present
</span>  <span class="cp">#define COOLANT_MIST_INVERT  false  // Set "true" if the on/off function is reversed
</span>  <span class="cp">#define COOLANT_FLOOD_INVERT false  // Set "true" if the on/off function is reversed
#endif
</span></code></pre></div></div> <p>Enable for Spindle and Laser control. Adds the <a href="/docs/gcode/M003.html"><code class="language-plaintext highlighter-rouge">M3</code></a>, <a href="/docs/gcode/M004.html"><code class="language-plaintext highlighter-rouge">M4</code></a>, and <a href="/docs/gcode/M005.html"><code class="language-plaintext highlighter-rouge">M5</code></a> commands to turn the spindle/laser on and off, and to set spindle speed, spindle direction, and laser power.</p> <p>SuperPid is a router/spindle speed controller used in the CNC milling community. Marlin can be used to turn the spindle on and off. It can also be used to set the spindle speed from 5,000 to 30,000 RPM.</p> <p>You’ll need to select a pin for the ON/OFF function and optionally choose a 0-5V hardware PWM pin for the speed control and a pin for the rotation direction.</p> <p>See <a href="/docs/configuration/1.1/laser_spindle.html">Laser and Spindle (1.1.x)</a> or <a href="/docs/configuration/2.0.9/laser_spindle.html">Laser and Spindle (2.0.9.x)</a> and <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code> for more details.</p> <h2 id="filament-width-sensor">Filament Width Sensor</h2> <iframe style="float:right;margin:0 0 1em 1em;" title="Filament sensor video" width="240" height="195" src="//youtube.com/embed/W93dFxF425s?autoplay=0" frameborder="0" allowfullscreen=""></iframe> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define FILAMENT_WIDTH_SENSOR</span>
</code></pre></div></div> <p>Enable to add support for a filament width sensor such as <a href="//www.thingiverse.com/thing:454584">Filament Width Sensor Prototype Version 3</a>. With a filament sensor installed, Marlin can adjust the flow rate according to the measured filament width. Adjust the sub-options below according to your setup.</p> <p>Only a single extruder is supported at this time.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define FILAMENT_SENSOR_EXTRUDER_NUM 0
</span></code></pre></div></div> <p>Only one extruder can have a filament sensor. Specify here which extruder has it.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define MEASUREMENT_DELAY_CM        14
</span></code></pre></div></div> <p>Distance from the filament width sensor to the melt chamber.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define MEASURED_UPPER_LIMIT         3.30 // (mm) Upper limit used to validate sensor reading
#define MEASURED_LOWER_LIMIT         1.90 // (mm) Lower limit used to validate sensor reading
</span></code></pre></div></div> <p>The range of your filament width. Set these according to your filament preferences. The sample values here apply to 3mm. For 1.75mm you’ll use a range more like 1.60 to 1.90.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define MAX_MEASUREMENT_DELAY       20
</span></code></pre></div></div> <p>This defines the size of the buffer to allocate for use with <code class="language-plaintext highlighter-rouge">MEASUREMENT_DELAY_CM</code>. The value must be greater than or equal to <code class="language-plaintext highlighter-rouge">MEASUREMENT_DELAY_CM</code>. Keep this setting low to reduce RAM usage.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define FILAMENT_LCD_DISPLAY
</span></code></pre></div></div> <p>Periodically display a message on the LCD showing the measured filament diameter.</p> <h2 id="cnc-coordinate-systems">CNC Coordinate Systems</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define CNC_COORDINATE_SYSTEMS</span>
</code></pre></div></div> <p>Enables <a href="/docs/gcode/G053.html"><code class="language-plaintext highlighter-rouge">G53</code></a> and <a href="/docs/gcode/G054-G059.html"><code class="language-plaintext highlighter-rouge">G54</code>-<code class="language-plaintext highlighter-rouge">G59.3</code></a> commands to select coordinate systems, plus <a href="/docs/gcode/G010.html"><code class="language-plaintext highlighter-rouge">G92.1</code></a> to reset the current workspace to native machine space. Workspaces set with this feature are also saved to EEPROM.</p> <h2 id="auto-report">Auto-Report</h2> <h3 id="fans-auto-report">Fans Auto-Report</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define AUTO_REPORT_FANS</span>
</code></pre></div></div> <p>Auto-report fan speed with M123 S<seconds>. Requires fans with tachometer pins.</seconds></p> <h3 id="temperature-auto-report">Temperature Auto-Report</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define AUTO_REPORT_TEMPERATURES
</span></code></pre></div></div> <p>It is recommended to enable this feature (along with <code class="language-plaintext highlighter-rouge">EXTENDED_CAPABILITIES_REPORT</code>) to install the <a href="/docs/gcode/M115.html"><code class="language-plaintext highlighter-rouge">M155</code></a> Auto-Report Temperature command. <a href="/docs/gcode/M115.html"><code class="language-plaintext highlighter-rouge">M115</code></a> tells Marlin to send the current temperature to the host at regular intervals, instead of requiring the host software to send <a href="/docs/gcode/M105.html"><code class="language-plaintext highlighter-rouge">M105</code></a> repeatedly. This saves a space in the command buffer and reduces overhead.</p> <h3 id="position-auto-report">Position Auto-Report</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define AUTO_REPORT_POSITION</span>
</code></pre></div></div> <p>Auto-report position with <code class="language-plaintext highlighter-rouge">M154 S&lt;seconds&gt;</code>.</p> <h2 id="extended-capabilities-report">Extended Capabilities Report</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define EXTENDED_CAPABILITIES_REPORT
</span></code></pre></div></div> <p>This option adds a list of capabilities to the output of <a href="/docs/gcode/M115.html"><code class="language-plaintext highlighter-rouge">M115</code></a>, allowing savvy host software to take advantage of add-ons like <code class="language-plaintext highlighter-rouge">AUTO_REPORT_TEMPERATURES</code>.</p> <h2 id="volumetric-mode-default">Volumetric Mode Default</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define VOLUMETRIC_DEFAULT_ON</span>
</code></pre></div></div> <p>Activate this option to make volumetric extrusion the default method The last values loaded or set by <a href="/docs/gcode/M400.html"><code class="language-plaintext highlighter-rouge">M404 W</code></a> and <a href="/docs/gcode/M200.html"><code class="language-plaintext highlighter-rouge">M200 D</code></a> will be used as the Nominal and Actual filament diameters. With this option, <a href="/docs/gcode/M200.html"><code class="language-plaintext highlighter-rouge">M200 D0</code></a> must be used to disable volumetric mode when running length-based G-code.</p> <h2 id="no-workspace-offsets">No Workspace Offsets</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define NO_WORKSPACE_OFFSETS</span>
</code></pre></div></div> <p>Enable this option for a leaner build of Marlin that removes all workspace offsets. This simplifies all coordinate transformations, leveling, etc., and may allow for slightly faster printing. With this option, <a href="/docs/gcode/M206.html"><code class="language-plaintext highlighter-rouge">M206</code></a> and <a href="/docs/gcode/M428.html"><code class="language-plaintext highlighter-rouge">M428</code></a> are disabled, and <a href="/docs/gcode/G092.html"><code class="language-plaintext highlighter-rouge">G92</code></a> reverts to its old behavior, as it is in Marlin 1.0.</p> <h2 id="g-code-parser">G-code Parser</h2> <h3 id="faster-g-code-parser">Faster G-code Parser</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define FASTER_GCODE_PARSER
</span></code></pre></div></div> <p>This option uses a 28 byte SRAM buffer and an alternative method to get parameter values so the G-code parser can run a little faster. If possible, always leave this option enabled.</p> <h3 id="g-code-case-insensitive">G-code Case Insensitive</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define GCODE_CASE_INSENSITIVE</span>
</code></pre></div></div> <p>Accept G-code sent to the firmware in lowercase.</p> <h3 id="cnc-g-code-options">CNC G-code Options</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PAREN_COMMENTS      // Support for parentheses-delimited comments</span>
<span class="c1">//#define GCODE_MOTION_MODES  // Remember the motion mode (G0 G1 G2 G3 G5 G38.X) and apply for X Y Z E F, etc.</span>
</code></pre></div></div> <p>Support CNC-style G-code dialects used by laser cutters, drawing machine cams, etc.</p> <h3 id="default-g0-feedrate">Default G0 Feedrate</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define G0_FEEDRATE 3000 // (mm/m)</span>
<span class="cp">#ifdef G0_FEEDRATE
</span>  <span class="c1">//#define VARIABLE_G0_FEEDRATE // The G0 feedrate is set by F in G0 motion mode</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>Enable and set a (default) feedrate for all G0 moves.</p> <h3 id="startup-commands">Startup Commands</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define STARTUP_COMMANDS "M17 Z"</span>
</code></pre></div></div> <p>Execute specified G-code commands immediately after power-on.</p> <h3 id="g-code-macros">G-code Macros</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define GCODE_MACROS</span>
<span class="cp">#if ENABLED(GCODE_MACROS)
</span>  <span class="cp">#define GCODE_MACROS_SLOTS       5  // Up to 10 may be used
</span>  <span class="cp">#define GCODE_MACROS_SLOT_SIZE  50  // Maximum length of a single macro
#endif
</span></code></pre></div></div> <h2 id="custom-user-menu-items">Custom User Menu Items</h2> <p>User-defined menu items to run custom G-code. Up to 25 may be defined, but the actual number is LCD-dependent.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Custom Menu: Main Menu</span>
<span class="c1">//#define CUSTOM_MENU_MAIN</span>
<span class="cp">#if ENABLED(CUSTOM_MENU_MAIN)
</span>  <span class="c1">//#define CUSTOM_MENU_MAIN_TITLE "Custom Commands"</span>
  <span class="cp">#define CUSTOM_MENU_MAIN_SCRIPT_DONE "M117 User Script Done"
</span>  <span class="cp">#define CUSTOM_MENU_MAIN_SCRIPT_AUDIBLE_FEEDBACK
</span>  <span class="c1">//#define CUSTOM_MENU_MAIN_SCRIPT_RETURN   // Return to status screen after a script</span>
  <span class="cp">#define CUSTOM_MENU_MAIN_ONLY_IDLE         // Only show custom menu when the machine is idle
</span>
  <span class="cp">#define MAIN_MENU_ITEM_1_DESC "Home &amp; UBL Info"
</span>  <span class="cp">#define MAIN_MENU_ITEM_1_GCODE "G28\nG29 W"
</span>  <span class="c1">//#define MAIN_MENU_ITEM_1_CONFIRM          // Show a confirmation dialog before this action</span>

  <span class="c1">// . . .</span>
<span class="cp">#endif
</span>
<span class="c1">// Custom Menu: Configuration Menu</span>
<span class="c1">//#define CUSTOM_MENU_CONFIG</span>
<span class="cp">#if ENABLED(CUSTOM_MENU_CONFIG)
</span>  <span class="c1">//#define CUSTOM_MENU_CONFIG_TITLE "Custom Commands"</span>
  <span class="cp">#define CUSTOM_MENU_CONFIG_SCRIPT_DONE "M117 Wireless Script Done"
</span>  <span class="cp">#define CUSTOM_MENU_CONFIG_SCRIPT_AUDIBLE_FEEDBACK
</span>  <span class="c1">//#define CUSTOM_MENU_CONFIG_SCRIPT_RETURN  // Return to status screen after a script</span>
  <span class="cp">#define CUSTOM_MENU_CONFIG_ONLY_IDLE        // Only show custom menu when the machine is idle
</span>
  <span class="cp">#define CONFIG_MENU_ITEM_1_DESC "Wifi ON"
</span>  <span class="cp">#define CONFIG_MENU_ITEM_1_GCODE "M118 [ESP110] WIFI-STA pwd=12345678"
</span>  <span class="c1">//#define CONFIG_MENU_ITEM_1_CONFIRM        // Show a confirmation dialog before this action</span>

  <span class="c1">// . . .</span>
<span class="cp">#endif
</span></code></pre></div></div> <h2 id="custom-user-menu-buttons">Custom User Menu Buttons</h2> <p>User-defined buttons to run custom G-code. Up to 25 may be defined.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define CUSTOM_USER_BUTTONS</span>
<span class="cp">#if ENABLED(CUSTOM_USER_BUTTONS)
</span>  <span class="c1">//#define BUTTON1_PIN -1</span>
  <span class="cp">#if PIN_EXISTS(BUTTON1)
</span>    <span class="cp">#define BUTTON1_HIT_STATE     LOW       // State of the triggered button. NC=LOW. NO=HIGH.
</span>    <span class="cp">#define BUTTON1_WHEN_PRINTING false     // Button allowed to trigger during printing?
</span>    <span class="cp">#define BUTTON1_GCODE         "G28"
</span>    <span class="cp">#define BUTTON1_DESC          "Homing"  // Optional string to set the LCD status
</span>  <span class="cp">#endif
</span>
  <span class="c1">// . . .</span>
<span class="cp">#endif
</span></code></pre></div></div> <h2 id="host-action-commands">Host Action Commands</h2> <p>Define host streamer action commands in compliance with the standard. See <a href="//reprap.org/wiki/G-code#Action_commands" target="_blank">this article</a> for a description of the standard.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define HOST_ACTION_COMMANDS</span>
<span class="cp">#if ENABLED(HOST_ACTION_COMMANDS)
</span>  <span class="c1">//#define HOST_PAUSE_M76                // Tell the host to pause in response to M76</span>
  <span class="c1">//#define HOST_PROMPT_SUPPORT           // Initiate host prompts to get user feedback</span>
  <span class="cp">#if ENABLED(HOST_PROMPT_SUPPORT)
</span>    <span class="c1">//#define HOST_STATUS_NOTIFICATIONS   // Send some status messages to the host as notifications</span>
  <span class="cp">#endif
</span>  <span class="c1">//#define HOST_START_MENU_ITEM          // Add a menu item that tells the host to start</span>
  <span class="c1">//#define HOST_SHUTDOWN_MENU_ITEM       // Add a menu item that tells the host to shut down</span>
<span class="cp">#endif
</span></code></pre></div></div> <h2 id="cancel-objects">Cancel Objects</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define CANCEL_OBJECTS</span>
<span class="cp">#if ENABLED(CANCEL_OBJECTS)
</span>  <span class="cp">#define CANCEL_OBJECTS_REPORTING // Emit the current object as a status message
#endif
</span></code></pre></div></div> <p>Adds <a href="/docs/gcode/M486.html"><code class="language-plaintext highlighter-rouge">M486</code></a> to allow Marlin to skip objects. Based on a proposal by Paul Paukstelis.</p> <h2 id="i2c-position-encoders">I2C Position Encoders</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define I2C_POSITION_ENCODERS</span>
<span class="cp">#if ENABLED(I2C_POSITION_ENCODERS)
</span>  <span class="cp">#define I2CPE_ENCODER_CNT         1
</span>  <span class="cp">#define I2CPE_ENC_1_ADDR          I2CPE_PRESET_ADDR_X
</span>  <span class="cp">#define I2CPE_ENC_1_AXIS          X_AXIS
</span>  <span class="cp">#define I2CPE_ENC_1_TYPE          I2CPE_ENC_TYPE_LINEAR
</span>  <span class="cp">#define I2CPE_ENC_1_TICKS_UNIT    2048
</span>  <span class="c1">//#define I2CPE_ENC_1_TICKS_REV     (16 * 200)</span>
  <span class="c1">//#define I2CPE_ENC_1_INVERT</span>
  <span class="cp">#define I2CPE_ENC_1_EC_METHOD     I2CPE_ECM_MICROSTEP
</span>  <span class="cp">#define I2CPE_ENC_1_EC_THRESH     0.10
</span>  <span class="cp">#define I2CPE_ENC_2_ADDR          I2CPE_PRESET_ADDR_Y
</span>  <span class="cp">#define I2CPE_ENC_2_AXIS          Y_AXIS
</span>  <span class="cp">#define I2CPE_ENC_2_TYPE          I2CPE_ENC_TYPE_LINEAR
</span>  <span class="cp">#define I2CPE_ENC_2_TICKS_UNIT    2048
</span>  <span class="c1">//#define I2CPE_ENC_2_TICKS_REV   (16 * 200)</span>
  <span class="c1">//#define I2CPE_ENC_2_INVERT</span>
  <span class="cp">#define I2CPE_ENC_2_EC_METHOD     I2CPE_ECM_MICROSTEP
</span>  <span class="cp">#define I2CPE_ENC_2_EC_THRESH     0.10
</span>  <span class="cp">#define I2CPE_ENC_3_ADDR          I2CPE_PRESET_ADDR_Z
</span>  <span class="cp">#define I2CPE_ENC_3_AXIS          Z_AXIS
</span>  <span class="cp">#define I2CPE_ENC_4_ADDR          I2CPE_PRESET_ADDR_E
</span>  <span class="cp">#define I2CPE_ENC_4_AXIS          E_AXIS
</span>  <span class="cp">#define I2CPE_ENC_5_ADDR          34
</span>  <span class="cp">#define I2CPE_ENC_5_AXIS          E_AXIS
</span>  <span class="cp">#define I2CPE_DEF_TYPE            I2CPE_ENC_TYPE_LINEAR
</span>  <span class="cp">#define I2CPE_DEF_ENC_TICKS_UNIT  2048
</span>  <span class="cp">#define I2CPE_DEF_TICKS_REV       (16 * 200)
</span>  <span class="cp">#define I2CPE_DEF_EC_METHOD       I2CPE_ECM_NONE
</span>  <span class="cp">#define I2CPE_DEF_EC_THRESH       0.1
</span>  <span class="c1">//#define I2CPE_ERR_THRESH_ABORT  100.0</span>
  <span class="cp">#define I2CPE_TIME_TRUSTED        10000
</span>  <span class="cp">#define I2CPE_MIN_UPD_TIME_MS     4
</span>  <span class="cp">#define I2CPE_ERR_ROLLING_AVERAGE
#endif // I2C_POSITION_ENCODERS
</span></code></pre></div></div> <h2 id="analog-joystick">Analog Joystick</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define JOYSTICK</span>
<span class="cp">#if ENABLED(JOYSTICK)
</span>  <span class="cp">#define JOY_X_PIN    5  // RAMPS: Suggested pin A5  on AUX2
</span>  <span class="cp">#define JOY_Y_PIN   10  // RAMPS: Suggested pin A10 on AUX2
</span>  <span class="cp">#define JOY_Z_PIN   12  // RAMPS: Suggested pin A12 on AUX2
</span>  <span class="cp">#define JOY_EN_PIN  44  // RAMPS: Suggested pin D44 on AUX2
</span>  <span class="c1">//#define INVERT_JOY_X  // Enable if X direction is reversed</span>
  <span class="c1">//#define INVERT_JOY_Y  // Enable if Y direction is reversed</span>
  <span class="c1">//#define INVERT_JOY_Z  // Enable if Z direction is reversed</span>
  <span class="c1">// Use M119 with JOYSTICK_DEBUG to find reasonable values after connecting:</span>
  <span class="cp">#define JOY_X_LIMITS { 5600, 8190-100, 8190+100, 10800 } // min, deadzone start, deadzone end, max
</span>  <span class="cp">#define JOY_Y_LIMITS { 5600, 8250-100, 8250+100, 11000 }
</span>  <span class="cp">#define JOY_Z_LIMITS { 4800, 8080-100, 8080+100, 11550 }
#endif
</span></code></pre></div></div> <h2 id="max7219-debug-matrix">MAX7219 Debug Matrix</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MAX7219_DEBUG</span>
<span class="cp">#if ENABLED(MAX7219_DEBUG)
</span>  <span class="cp">#define MAX7219_CLK_PIN   64
</span>  <span class="cp">#define MAX7219_DIN_PIN   57
</span>  <span class="cp">#define MAX7219_LOAD_PIN  44
</span>  <span class="c1">//#define MAX7219_GCODE          // Add the M7219 G-code to control the LED matrix</span>
  <span class="cp">#define MAX7219_INIT_TEST    2   // Test pattern at startup: 0=none, 1=sweep, 2=spiral
</span>  <span class="cp">#define MAX7219_NUMBER_UNITS 1   // Number of Max7219 units in chain.
</span>  <span class="cp">#define MAX7219_ROTATE       0   // Rotate the display clockwise (in multiples of +/- 90°)
</span>                                   <span class="c1">// connector at:  right=0   bottom=-90  top=90  left=180</span>
  <span class="c1">//#define MAX7219_REVERSE_ORDER  // The individual LED matrix units may be in reversed order</span>
  <span class="c1">//#define MAX7219_SIDE_BY_SIDE   // Big chip+matrix boards can be chained side-by-side</span>
  <span class="cp">#define MAX7219_DEBUG_PRINTER_ALIVE    // Blink corner LED of 8x8 matrix to show that the firmware is functioning
</span>  <span class="cp">#define MAX7219_DEBUG_PLANNER_HEAD  3  // Show the planner queue head position on this and the next LED matrix row
</span>  <span class="cp">#define MAX7219_DEBUG_PLANNER_TAIL  5  // Show the planner queue tail position on this and the next LED matrix row
</span>  <span class="cp">#define MAX7219_DEBUG_PLANNER_QUEUE 0  // Show the current planner queue depth on this and the next LED matrix row
</span>                                         <span class="c1">// If you experience stuttering, reboots, etc. this option can reveal how</span>
                                         <span class="c1">// tweaks made to the configuration are affecting the printer in real-time.</span>
<span class="cp">#endif
</span></code></pre></div></div> <h2 id="nanodlp-sync-support">NanoDLP Sync Support</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define NANODLP_Z_SYNC</span>
<span class="cp">#if ENABLED(NANODLP_Z_SYNC)
</span>  <span class="c1">//#define NANODLP_ALL_AXIS  // Enables "Z_move_comp" output on any axis move.</span>
                              <span class="c1">// Default behavior is limited to Z axis only.</span>
<span class="cp">#endif
</span></code></pre></div></div> <h2 id="wifi-support-espressif-esp32-wifi">WiFi Support (Espressif ESP32 WiFi)</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define WIFISUPPORT         // Marlin embedded WiFi management</span>
<span class="c1">//#define ESP3D_WIFISUPPORT   // ESP3D Library WiFi management (https://github.com/luc-github/ESP3DLib)</span>
<span class="cp">#if EITHER(WIFISUPPORT, ESP3D_WIFISUPPORT)
</span>  <span class="c1">//#define WEBSUPPORT          // Start a web server (which may include auto-discovery)</span>
  <span class="c1">//#define OTASUPPORT          // Support over-the-air firmware updates</span>
  <span class="c1">//#define WIFI_CUSTOM_COMMAND // Accept feature config commands (e.g., WiFi ESP3D) from the host</span>
  <span class="c1">//#include "Configuration_Secure.h" // External file with WiFi SSID / Password</span>
<span class="cp">#endif
</span></code></pre></div></div> <h2 id="průša-mmu2-advanced-settings">Průša MMU2 advanced settings</h2> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(PRUSA_MMU2)
</span>  <span class="cp">#define INTERNAL_SERIAL_PORT 2
</span>  <span class="cp">#define MMU2_SERIAL internalSerial
</span>  <span class="c1">//#define MMU2_RST_PIN 23</span>
  <span class="c1">//#define MMU2_MODE_12V</span>
  <span class="p">...</span>
</code></pre></div></div> <ul> <li>A serial connection is required for communication between the printer board and the MMU2. The configuration differs between 8- and 32-bit boards.</li> <li>On a board with a ATmega2560/1280 micro-controller you have three potential serial ports to use for the MMU2: serial 1 (pins 18/19), serial 2 (pins 16/17), serial 3 (pins 14/15). Define the port your MMU2 is connected to - this activates an additional serial connection in Marlin named (in the example configuration) <code class="language-plaintext highlighter-rouge">internalSerial</code>.</li> <li>When using a 32-bit board you just have to define the name of the serial port which will be used for communication with the MMU2.</li> <li>The MMU2 provides two options how the printer board can trigger a reset: software and hardware reset. By default software reset is enabled. Hardware reset requires a digital output pin wired to the reset pin on the MMU2. To activate hardware reset you define the pin (<code class="language-plaintext highlighter-rouge">MMU2_RST_PIN</code>) to use on the printer board</li> <li>If your MMU2 is powered from 12V you can activate a special mode on the MMU2 (<code class="language-plaintext highlighter-rouge">MMU2_MODE_12V</code>). This should reduce the noise of the MMU2 but has no effect on the general operation.</li> </ul> <h3 id="filament-runout-handling">Filament runout handling</h3> <p>Here you define the G-code script which will be executed when the so-called FINDA sensor on the MMU2 detects a filament runout.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// G-code to execute when MMU2 F.I.N.D.A. probe detects filament runout</span>
<span class="cp">#define MMU2_FILAMENT_RUNOUT_SCRIPT "M600"
</span></code></pre></div></div> <p>The default is <a href="/docs/gcode/M600.html"><code class="language-plaintext highlighter-rouge">M600</code></a> which requires <a href="#advanced_pause">ADVANCED_PAUSE_FEATURE</a>.</p> <h3 id="lcd-menu">LCD Menu</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Add MMU2 controls to the LCD menu</span>
<span class="cp">#define MMU2_MENUS
</span></code></pre></div></div> <p>Enable this option to activate an additional menu to operate the MMU2 from the LCD.</p> <h3 id="filament-loadunload-settings">Filament load/unload settings</h3> <h4 id="load-to-nozzle">Load to nozzle</h4> <p>The MMU2 LCD menu allows you to load filament to the nozzle. The MMU2 will transport the filament all the way to the extruder gears. The required extruder steps to load it into the hotend have to be defined in Marlin.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// This is for Průša MK3-style extruders. Customize for your hardware.</span>
    <span class="cp">#define MMU2_LOAD_TO_NOZZLE_SEQUENCE \
      {  7.2,  562 }, \
      { 14.4,  871 }, \
      { 36.0, 1393 }, \
      { 14.4,  871 }, \
      { 50.0,  198 }
</span>
</code></pre></div></div> <p>The values are relative E distances and feed rates in mm/m. The defaults are based on the nozzle to extruder gear distance of a Průša MK3 extruder, so if required you have to modify those to your extruder/hotend setup accordingly.</p> <h4 id="unload-filament">Unload filament</h4> <p>To unload filament using the LCD menu a generic ramming sequence will be executed before the MMU2 will retract the filament. The steps to do so are defined using</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="cp">#define MMU2_RAMMING_SEQUENCE \
      {   1.0, 1000 }, \
      {   1.0, 1500 }, \
      {   2.0, 2000 }, \
      {   1.5, 3000 }, \
      {   2.5, 4000 }, \
      { -15.0, 5000 }, \
      { -14.0, 1200 }, \
      {  -6.0,  600 }, \
      {  10.0,  700 }, \
      { -10.0,  400 }, \
      { -50.0, 2000 }
</span></code></pre></div></div> <p>The values are relative E distances and feed rates in mm/m. The default values are based on a E3D V6 hotend and the nozzle to extruder gear distance of a Průša MK3 extruder, so if required you have to modify those to your extruder/hotend setup accordingly.</p> <h4 id="eject-filament">Eject filament</h4> <p>Eject filament will do a simple retraction of the filament out of the hotend without ramming. The feedrate to do so is defined using</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="cp">#define MMU2_FILAMENTCHANGE_EJECT_FEED 80.0
</span></code></pre></div></div> <h3 id="debug">Debug</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="cp">#define MMU2_DEBUG  // Write debug info to serial output
</span></code></pre></div></div> <p>Enable this option to get debug output related to the printer to MMU2 communication. This will consume some PROGMEM.</p> <h3 id="developer-section">Developer Section</h3> <h4 id="m100---free-memory-watcher">M100 - Free Memory Watcher</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define M100_FREE_MEMORY_WATCHER</span>
</code></pre></div></div> <p>See <a href="/docs/gcode/M100.html"><code class="language-plaintext highlighter-rouge">M100</code></a> for more details.</p> <h4 id="m43">M43</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define PINS_DEBUGGING</span>
</code></pre></div></div> <p>Display pin status, toggle pins, watch pins, watch endstops &amp; toggle LED, test servo probe with <a href="/docs/gcode/M043.html"><code class="language-plaintext highlighter-rouge">M43</code></a>.</p> <h4 id="enable-marlin-dev-mode">Enable Marlin Dev Mode</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//#define MARLIN_DEV_MODE</span>
</code></pre></div></div> <p>Enable Marlin dev mode which adds some special commands.</p> </div> </div> </div> </div> </div> <footer> <div class="container shift-footer "> <div class="row"> <div class="col-8"> <p>Brought to you with <i class="fa fa-heart text-danger" aria-hidden="true"></i> lack of <i class="fa fa-bed" aria-hidden="true"></i> and lots of <i class="fa fa-coffee" aria-hidden="true"></i>. <br> The contents of this website are © 2024 under the terms of the <a href="//www.gnu.org/licenses/gpl-3.0.txt">GPLv3</a> License.</p> </div> <div class="col-4"> <div class="pull-right back-to-top"> <a href="#top" data-proofer-ignore> Back to top <i class="fa fa-level-up" aria-hidden="true"></i></a> </div> </div> </div> </div> </footer> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-76230130-1', {
          'cookieDomain': 'marlinfw.org',
          'siteSpeedSampleRate': 80
      });

      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script> </body> </html>