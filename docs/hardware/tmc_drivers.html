<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"/> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> <meta name="viewport" content="width=device-width, initial-scale=1"/> <meta name="flattr:id" content="e7nqg5"/> <title>Trinamic drivers | Marlin Firmware</title> <meta name="generator" content="Jekyll v3.9.0"/> <meta property="og:title" content="Trinamic drivers"/> <meta name="author" content="teemuatlut"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="Using Trinamic TMC based stepper drivers."/> <meta property="og:description" content="Using Trinamic TMC based stepper drivers."/> <link rel="canonical" href="https://marlinfw.org/docs/hardware/tmc_drivers.html"/> <meta property="og:url" content="https://marlinfw.org/docs/hardware/tmc_drivers.html"/> <meta property="og:site_name" content="Marlin Firmware"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2024-01-13T02:30:54-06:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Trinamic drivers"/> <meta name="twitter:site" content="@MarlinFirmware"/> <meta name="twitter:creator" content="@teemuatlut"/> <script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"teemuatlut"},"dateModified":"2024-01-13T02:30:54-06:00","datePublished":"2024-01-13T02:30:54-06:00","description":"Using Trinamic TMC based stepper drivers.","headline":"Trinamic drivers","mainEntityOfPage":{"@type":"WebPage","@id":"https://marlinfw.org/docs/hardware/tmc_drivers.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://marlinfw.org/assets/images/logo/marlin/small.png"},"name":"teemuatlut"},"url":"https://marlinfw.org/docs/hardware/tmc_drivers.html"}</script> <link rel="icon" href="/assets/favicon_m.ico"/> <link rel="stylesheet" href="/assets/stylesheets/main.css"/> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--> <script src="/assets/javascript/head.min.js"></script> <script type="text/javascript">

      /**
       * As Github pages do not support https for custom domains
       * this is the current best workaround for #18.
       */
      var domains  = [ 'marlinfw.org', 'localhost', '127.0.0.1' ];
      var pathname = location.pathname.replace(/^\/MarlinDocumentation/, '')
      if (domains.indexOf(window.location.hostname) == -1)
        window.top.location.href = 'https://marlinfw.org' + pathname;

      /**
       * Another ugly workaround trying to improve UX reported by #35
       */
      if (location.protocol != 'https:' && window.location.hostname == 'marlinfw.org')
        location.href = 'https:' + window.location.href.substring(window.location.protocol.length);

      /**
       * Improves overall speed by loading javascript and css resources in parallel
       * with the main page.
       */
      head.load(
          "/assets/stylesheets/fontawesome.min.css",
          "/assets/stylesheets/solid.min.css",
          "/assets/stylesheets/brands.min.css",

          "/assets/javascript/jquery-2.2.1.min.js",
          "/assets/javascript/jquery-ui.min.js",
          "/assets/javascript/bootstrap.min.js",
          "/assets/javascript/tocify.min.js",
          "/assets/javascript/search.js",
          "/assets/javascript/custom.js",

          "/assets/javascript/sheetrock.min.js",
          "/assets/javascript/cookieconsent.min.js"
      );

      head.ready(function() {
        window.cookieconsent_options = {
          "message":"We use cookies to ensure you get the best experience on our website",
          "dismiss": "Got it!", "learnMore": "More info", "link":"", "theme": "dark-bottom"
        };
      });
    </script> </head> <body role="document"> <nav class="navbar navbar-default navbar-fixed-top custom-no-margin"> <div class="container"> <div class="navbar-header"> <img id="daynite" src="/assets/images/btn-night.svg" alt="Dark Mode" width="32" height="32"> <a href="/" class="navbar-brand"> <svg id="mflogo" height="95%" version="1.1" viewbox="0 0 828.26325 270.80054"> <g id="g981"> <path d="M 69.48788,0 C 31.1751,0 0,32.61059 0,72.74045 V 198.055 c 0,40.12987 31.17607,72.74553 69.48788,72.74553 H 758.7735 c 38.3127,0 69.4898,-32.61566 69.4898,-72.74553 V 5.84382 c -0.019,-3.60102 -2,-5.68155 -6.9765,-5.84159 H 220.29327 Z m 0,21.01625 H 682.6259 c 8.157,0.43104 14.4593,1.90061 18.9474,6.50681 7.8555,8.06197 84.9293,82.07514 102.73,100.35813 1.8839,1.93509 3.8964,6.37495 3.8964,11.50813 v 58.66132 c 0,28.84892 -21.8776,51.7242 -49.4209,51.7242 H 69.4932 c -27.54239,0 -49.42089,-22.87528 -49.42089,-51.7242 V 72.73609 c 0,-0.90162 0.0193,-1.79645 0.0619,-2.6858 1.30928,-27.57002 22.67685,-49.0386 49.35799,-49.0386 z" fill="#0000ff" id="path957" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 539.5917,36.40978 -0.068,135.74053 c 0,17.73633 5.7753,32.12681 17.3285,43.16739 11.7332,11.22111 26.2205,18.88542 44.6327,18.88542 1.6257,0 4.7893,-0.14503 4.7893,-0.14503 v -30.53858 c -1.4629,0.1785 -2.9571,-0.0101 -4.5172,-0.0101 -9.3867,0 -16.3858,-3.57688 -22.162,-9.36867 -5.7765,-5.79149 -8.6669,-13.38947 -8.6617,-22.80124 l 0.068,-134.92917 z" fill="#0000ff" id="path965" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 48.89544,88.53966 c 0,-15.02233 5.05444,-27.69172 15.1637,-38.00816 10.10849,-10.31644 22.56459,-15.47466 37.36638,-15.47466 6.85957,0 12.81609,0.99594 17.8713,2.98631 5.23501,1.6288 9.65764,3.80061 13.268,6.51552 3.24931,1.99088 6.40833,4.52476 9.47717,7.60143 l 5.957,5.70143 c 1.26361,-1.62891 2.34665,-2.89595 3.24921,-3.80092 1.08314,-1.086 2.07599,-1.99087 2.97855,-2.71481 1.62466,-1.6289 5.77653,-4.70578 12.45611,-9.23064 6.67909,-4.70548 15.8856,-7.05832 27.61884,-7.05832 14.44084,0 26.89694,5.15812 37.36638,15.47466 10.4704,10.31644 15.70464,22.98583 15.70464,38.00816 V 234.05708 H 212.17203 V 90.71005 c 0,-6.3347 -2.52722,-11.94525 -7.58166,-16.83268 -4.87396,-4.88662 -10.6504,-7.32972 -17.32939,-7.32972 -6.49862,0 -11.9142,2.26207 -16.24655,6.78662 -4.33235,4.34371 -6.49852,10.13551 -6.49852,17.37527 V 234.05657 H 129.58617 V 90.70954 c 0,-5.97283 -2.16617,-11.49291 -6.49862,-16.56087 -4.33235,-5.06765 -9.47707,-7.60143 -15.43369,-7.60143 -5.95661,0 -11.46325,2.53378 -16.5175,7.60143 -4.69339,5.06735 -7.04013,10.58825 -7.04013,16.56087 V 234.05657 H 56.2045 c -4.86419,0 -7.30897,-2.56065 -7.30897,-7.68216 z" fill="#0000ff" id="path971" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 325.92573,233.97594 c -14.76501,0.48682 -35.97484,-4.07232 -49.33284,-17.10347 -13.35799,-13.21198 -20.03699,-29.59131 -20.03699,-49.13799 0,-19.90874 6.85957,-36.74041 20.5789,-50.49499 13.71933,-13.75458 30.5074,-20.63288 50.36439,-20.63288 19.857,0 36.19355,6.87749 49.00963,20.63288 12.81706,13.75458 19.2251,31.67347 19.2251,53.75362 v 62.98384 h -31.68024 v -61.89764 c 0,-13.39352 -3.42988,-24.07203 -10.28944,-32.03452 -6.85967,-8.14463 -15.9756,-12.21705 -27.34789,-12.21705 -10.28945,0 -19.1351,3.80082 -26.536,11.40265 -7.40118,7.60153 -11.10134,16.55986 -11.10134,26.8763 0,11.04058 3.88112,20.36108 11.64325,27.96251 7.9427,7.60143 19.68959,9.79078 29.32391,9.40397 h 21.93269 v 30.53857 z" fill="#0000ff" id="path969" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 467.4988,98.58024 c -18.4123,0 -33.485,5.60873 -45.2182,16.82963 -11.5533,11.04059 -17.32847,25.43006 -17.32847,43.16639 v 75.47169 h 31.40927 v -74.65831 c 0,-9.41137 2.8852,-17.01117 8.6617,-22.80327 5.7765,-5.79179 13.3609,-8.68875 22.7475,-8.68875 9.0258,0 16.4265,2.98682 22.2036,8.95975 5.9571,5.97231 8.934,13.48176 8.934,22.53146 l -0.1529,1.81451 h 31.4092 l 0.1529,-2.62779 c 1.04,-17.88441 -5.8668,-32.39761 -17.6003,-43.43718 -11.7332,-11.04058 -26.806,-16.55884 -45.2182,-16.55884 z" fill="#0000ff" id="path967" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 656.9725,158.62088 c 0,-17.73633 5.7765,-32.1258 17.3294,-43.16537 11.7332,-11.22111 26.8069,-16.83166 45.2192,-16.83166 18.4122,0 33.4859,5.52009 45.2191,16.55986 11.7333,11.04058 17.6004,25.5193 17.6004,43.43717 v 67.58629 c -0.039,5.32475 -2.4795,7.8854 -7.4874,7.8854 h -23.9223 v -74.65729 c 0,-9.0493 -2.9785,-16.55986 -8.9355,-22.53248 -5.7766,-5.97262 -13.178,-8.95893 -22.2037,-8.95893 -9.3869,0 -16.9684,2.89564 -22.7446,8.68723 -5.7765,5.79179 -8.6648,13.39352 -8.6648,22.80428 v 74.65729 h -31.4092 z" fill="#0000ff" id="path959" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 616.136,92.69788 h 31.6802 l 10e-5,-15.49698 v -4.28763 c 0,-8.585 -6.4197,-15.49596 -14.3934,-15.49596 h -2.8932 c -7.9741,0 -14.3934,6.91137 -14.3934,15.49596 v 4.28763 z" color="#000000" color-rendering="auto" enable-background="accumulate" fill="#0000ff" fill-rule="evenodd" image-rendering="auto" shape-rendering="auto" solid-color="#000000" style="fill-opacity:1;stroke:none;stroke-width:0.999984" id="path961" class="logo"></path> <path d="m 616.136,100.71006 h 31.6802 V 234.00637 H 616.136 Z" color="#000000" color-rendering="auto" enable-background="accumulate" fill="#0000ff" fill-rule="evenodd" image-rendering="auto" shape-rendering="auto" solid-color="#000000" style="fill-opacity:1;stroke:none;stroke-width:0.999984" id="path963" class="logo"></path> </g> </svg> </a> <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> </div> <div class="navbar-collapse collapse" id="navbar-main"> <ul class="nav navbar-nav"> <li id="top-intro"><a href="/docs/basics/introduction.html">About Marlin</a></li> <li id="top-download"><a href="/meta/download/">Download</a></li> <li id="top-config"><a href="/docs/configuration/configuration.html">Configure</a></li> <li id="top-install"><a href="/docs/basics/install.html">Install</a></li> <li id="top-tools" class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-tools">Tools <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/tools/u8glib/converter.html">Bitmap Converter</a></li> <li><a href="/tools/rgb565/converter.html">RGB565 Converter</a></li> <li><a href="/tools/lin_advance/k-factor.html">Calibrate Linear Advance</a></li> <li><a href="/tools/input_shaping/freq-calibr.html">Calibrate Input Shaping</a></li> <li class="divider"> <li><a href="//github.com/MarlinFirmware/Marlin/issues">Bugtracker</a></li> <li><a href="/docs/basics/reporting_bugs.html">Reporting bugs</a></li> <li class="divider"> <li><a href="//github.com/MarlinFirmware/Marlin">Source Code Repository</a></li> </ul> </li> <li id="top-help" class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-documentation">Help <span class="caret"></span></a> <ul class="dropdown-menu"> <li class="dropdown-submenu configuration"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Configuration</a> <ul class="dropdown-menu"> <li><a href="/meta/configuration/">All documents</a></li> <li class="divider"> <li><a href="/docs/configuration/1.1/laser_spindle.html">Laser/Spindle Configuration (1.1.x)</a></li> <li><a href="/docs/configuration/2.0.9/laser_spindle.html">Laser/Spindle Configuration (2.0.9.x)</a></li> <li><a href="/docs/configuration/config-ini.html">Configuring with INI</a></li> <li><a href="/docs/configuration/configuration.html">Configuring Marlin</a></li> <li><a href="/docs/configuration/probes.html">Probe Configuration</a></li> </ul> </li> <li class="dropdown-submenu development"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Development</a> <ul class="dropdown-menu"> <li><a href="/meta/development/">All documents</a></li> <li class="divider"> <li><a href="/docs/development/boards.html">Boards</a></li> <li class="divider"> <li><a href="/docs/development/code_structure.html">Code Structure</a></li> <li><a href="/docs/development/coding_standards.html">Coding Standards</a></li> <li><a href="/docs/development/fastio.html">FastIO</a></li> <li><a href="/docs/development/hal.html">Hardware Abstraction Layer</a></li> <li class="divider"> <li><a href="/docs/development/contributing.html">Contributing to Marlin</a></li> <li class="divider"> <li><a href="/docs/development/feature_request.html">Feature requests</a></li> <li><a href="/docs/development/getting_started_pull_requests.html">Contributing Code with Pull Requests</a></li> <li><a href="/docs/development/git_scripts.html">Marlin Github Scripts</a></li> <li class="divider"> <li><a href="/docs/development/fonts.html">Adding new fonts</a></li> <li><a href="/docs/development/lcd_language.html">LCD Language System</a></li> </ul> </li> <li class="dropdown-submenu features"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Features</a> <ul class="dropdown-menu"> <li><a href="/meta/features/">All documents</a></li> <li class="divider"> <li><a href="/docs/features/auto_bed_leveling.html">Automatic Bed Leveling</a></li> <li><a href="/docs/features/unified_bed_leveling.html">Unified Bed Leveling</a></li> <li class="divider"> <li><a href="/docs/features/autostart.html">Autostart</a></li> <li class="divider"> <li><a href="/docs/features/eeprom.html">EEPROM</a></li> <li class="divider"> <li><a href="/docs/features/fwretract.html">Firmware Retract</a></li> <li><a href="/docs/features/input_shaping.html">Input Shaping</a></li> <li><a href="/docs/features/lin_advance.html">Linear Advance</a></li> <li><a href="/docs/features/model_predictive_control.html">Model Predictive Temperature Control</a></li> <li><a href="/docs/features/probe_temp_compensation.html">Probe Temperature Compensation</a></li> <li class="divider"> <li><a href="/docs/features/lcd_menu.html">LCD Menu Tree</a></li> </ul> </li> <li class="dropdown-submenu gcode"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">G-code</a> <ul class="dropdown-menu"> <li><a href="/meta/gcode/">All documents</a></li> <li class="divider"> <li><a href="/docs/gcode/G000-G001.html"><strong>G0-G1</strong>: Linear Move</a></li> <li><a href="/docs/gcode/G002-G003.html"><strong>G2-G3</strong>: Arc or Circle Move</a></li> <li><a href="/docs/gcode/G004.html"><strong>G4</strong>: Dwell</a></li> <li><a href="/docs/gcode/G005.html"><strong>G5</strong>: Bézier cubic spline</a></li> <li><a href="/docs/gcode/G006.html"><strong>G6</strong>: Direct Stepper Move</a></li> <li><a href="/docs/gcode/G010.html"><strong>G10</strong>: Retract</a></li> <li><a href="/docs/gcode/G011.html"><strong>G11</strong>: Recover</a></li> <li><a href="/docs/gcode/G012.html"><strong>G12</strong>: Clean the Nozzle</a></li> <li><a href="/docs/gcode/G017-G019.html"><strong>G17-G19</strong>: CNC Workspace Planes</a></li> <li><a href="/docs/gcode/G020.html"><strong>G20</strong>: Inch Units</a></li> <li><a href="/docs/gcode/G021.html"><strong>G21</strong>: Millimeter Units</a></li> <li><a href="/docs/gcode/G026.html"><strong>G26</strong>: Mesh Validation Pattern</a></li> <li><a href="/docs/gcode/G027.html"><strong>G27</strong>: Park toolhead</a></li> <li><a href="/docs/gcode/G028.html"><strong>G28</strong>: Auto Home</a></li> <li><a href="/docs/gcode/G029.html"><strong>G29</strong>: Bed Leveling</a></li> <li><a href="/docs/gcode/G029-abl-3point.html"><strong>G29</strong>: Bed Leveling (3-Point)</a></li> <li><a href="/docs/gcode/G029-abl-linear.html"><strong>G29</strong>: Bed Leveling (Linear)</a></li> <li><a href="/docs/gcode/G029-mbl.html"><strong>G29</strong>: Bed Leveling (Manual)</a></li> <li><a href="/docs/gcode/G029-abl-bilinear.html"><strong>G29</strong>: Bed Leveling (Bilinear)</a></li> <li><a href="/docs/gcode/G029-ubl.html"><strong>G29</strong>: Bed Leveling (Unified)</a></li> <li><a href="/docs/gcode/G030.html"><strong>G30</strong>: Single Z-Probe</a></li> <li><a href="/docs/gcode/G031.html"><strong>G31</strong>: Dock Sled</a></li> <li><a href="/docs/gcode/G032.html"><strong>G32</strong>: Undock Sled</a></li> <li><a href="/docs/gcode/G033.html"><strong>G33</strong>: Delta Auto Calibration</a></li> <li><a href="/docs/gcode/G034-zsaa.html"><strong>G34</strong>: Z Steppers Auto-Alignment</a></li> <li><a href="/docs/gcode/G034-mgc.html"><strong>G34</strong>: Mechanical Gantry Calibration</a></li> <li><a href="/docs/gcode/G035.html"><strong>G35</strong>: Tramming Assistant</a></li> <li><a href="/docs/gcode/G038.html"><strong>G38.2-G38.5</strong>: Probe target</a></li> <li><a href="/docs/gcode/G042.html"><strong>G42</strong>: Move to mesh coordinate</a></li> <li><a href="/docs/gcode/G053.html"><strong>G53</strong>: Move in Machine Coordinates</a></li> <li><a href="/docs/gcode/G054-G059.html"><strong>G54-G59.3</strong>: Workspace Coordinate System</a></li> <li><a href="/docs/gcode/G060.html"><strong>G60</strong>: Save Current Position</a></li> <li><a href="/docs/gcode/G061.html"><strong>G61</strong>: Return to Saved Position</a></li> <li><a href="/docs/gcode/G076.html"><strong>G76</strong>: Probe temperature calibration</a></li> <li><a href="/docs/gcode/G080.html"><strong>G80</strong>: Cancel Current Motion Mode</a></li> <li><a href="/docs/gcode/G090.html"><strong>G90</strong>: Absolute Positioning</a></li> <li><a href="/docs/gcode/G091.html"><strong>G91</strong>: Relative Positioning</a></li> <li><a href="/docs/gcode/G092.html"><strong>G92</strong>: Set Position</a></li> <li><a href="/docs/gcode/G425.html"><strong>G425</strong>: Backlash Calibration</a></li> <li><a href="/docs/gcode/M000-M001.html"><strong>M0-M1</strong>: Unconditional stop</a></li> <li><a href="/docs/gcode/M003.html"><strong>M3</strong>: Spindle CW / Laser On</a></li> <li><a href="/docs/gcode/M004.html"><strong>M4</strong>: Spindle CCW / Laser On</a></li> <li><a href="/docs/gcode/M005.html"><strong>M5</strong>: Spindle / Laser Off</a></li> <li><a href="/docs/gcode/M007-M009.html"><strong>M7-M9</strong>: Coolant Controls</a></li> <li><a href="/docs/gcode/M010-M011.html"><strong>M10-M11</strong>: Vacuum / Blower Control</a></li> <li><a href="/docs/gcode/M016.html"><strong>M16</strong>: Expected Printer Check</a></li> <li><a href="/docs/gcode/M017.html"><strong>M17</strong>: Enable Steppers</a></li> <li><a href="/docs/gcode/M018.html"><strong>M18, M84</strong>: Disable steppers</a></li> <li><a href="/docs/gcode/M020.html"><strong>M20</strong>: List SD Card</a></li> <li><a href="/docs/gcode/M021.html"><strong>M21</strong>: Init SD card</a></li> <li><a href="/docs/gcode/M022.html"><strong>M22</strong>: Release SD card</a></li> <li><a href="/docs/gcode/M023.html"><strong>M23</strong>: Select SD file</a></li> <li><a href="/docs/gcode/M024.html"><strong>M24</strong>: Start or Resume SD print</a></li> <li><a href="/docs/gcode/M025.html"><strong>M25</strong>: Pause SD print</a></li> <li><a href="/docs/gcode/M026.html"><strong>M26</strong>: Set SD position</a></li> <li><a href="/docs/gcode/M027.html"><strong>M27</strong>: Report SD print status</a></li> <li><a href="/docs/gcode/M028.html"><strong>M28</strong>: Start SD write</a></li> <li><a href="/docs/gcode/M029.html"><strong>M29</strong>: Stop SD write</a></li> <li><a href="/docs/gcode/M030.html"><strong>M30</strong>: Delete SD file</a></li> <li><a href="/docs/gcode/M031.html"><strong>M31</strong>: Print time</a></li> <li><a href="/docs/gcode/M032.html"><strong>M32</strong>: Select and Start</a></li> <li><a href="/docs/gcode/M033.html"><strong>M33</strong>: Get Long Path</a></li> <li><a href="/docs/gcode/M034.html"><strong>M34</strong>: SDCard Sorting</a></li> <li><a href="/docs/gcode/M042.html"><strong>M42</strong>: Set Pin State</a></li> <li><a href="/docs/gcode/M043.html"><strong>M43</strong>: Debug Pins</a></li> <li><a href="/docs/gcode/M043-T.html"><strong>M43 T</strong>: Toggle Pins</a></li> <li><a href="/docs/gcode/M048.html"><strong>M48</strong>: Probe Repeatability Test</a></li> <li><a href="/docs/gcode/M073.html"><strong>M73</strong>: Set Print Progress</a></li> <li><a href="/docs/gcode/M075.html"><strong>M75</strong>: Start Print Job Timer</a></li> <li><a href="/docs/gcode/M076.html"><strong>M76</strong>: Pause Print Job Timer</a></li> <li><a href="/docs/gcode/M077.html"><strong>M77</strong>: Stop Print Job Timer</a></li> <li><a href="/docs/gcode/M078.html"><strong>M78</strong>: Print Job Stats</a></li> <li><a href="/docs/gcode/M080.html"><strong>M80</strong>: Power On</a></li> <li><a href="/docs/gcode/M081.html"><strong>M81</strong>: Power Off</a></li> <li><a href="/docs/gcode/M082.html"><strong>M82</strong>: E Absolute</a></li> <li><a href="/docs/gcode/M083.html"><strong>M83</strong>: E Relative</a></li> <li><a href="/docs/gcode/M085.html"><strong>M85</strong>: Inactivity Shutdown</a></li> <li><a href="/docs/gcode/M086.html"><strong>M86</strong>: Hotend Idle Timeout</a></li> <li><a href="/docs/gcode/M087.html"><strong>M87</strong>: Disable Hotend Idle Timeout</a></li> <li><a href="/docs/gcode/M092.html"><strong>M92</strong>: Set Axis Steps-per-unit</a></li> <li><a href="/docs/gcode/M100.html"><strong>M100</strong>: Free Memory</a></li> <li><a href="/docs/gcode/M102.html"><strong>M102</strong>: Configure Bed Distance Sensor</a></li> <li><a href="/docs/gcode/M104.html"><strong>M104</strong>: Set Hotend Temperature</a></li> <li><a href="/docs/gcode/M105.html"><strong>M105</strong>: Report Temperatures</a></li> <li><a href="/docs/gcode/M106.html"><strong>M106</strong>: Set Fan Speed</a></li> <li><a href="/docs/gcode/M107.html"><strong>M107</strong>: Fan Off</a></li> <li><a href="/docs/gcode/M108.html"><strong>M108</strong>: Break and Continue</a></li> <li><a href="/docs/gcode/M109.html"><strong>M109</strong>: Wait for Hotend Temperature</a></li> <li><a href="/docs/gcode/M110.html"><strong>M110</strong>: Set Line Number</a></li> <li><a href="/docs/gcode/M111.html"><strong>M111</strong>: Debug Level</a></li> <li><a href="/docs/gcode/M112.html"><strong>M112</strong>: Full Shutdown</a></li> <li><a href="/docs/gcode/M113.html"><strong>M113</strong>: Host Keepalive</a></li> <li><a href="/docs/gcode/M114.html"><strong>M114</strong>: Get Current Position</a></li> <li><a href="/docs/gcode/M115.html"><strong>M115</strong>: Firmware Info</a></li> <li><a href="/docs/gcode/M117.html"><strong>M117</strong>: Set LCD Message</a></li> <li><a href="/docs/gcode/M118.html"><strong>M118</strong>: Serial print</a></li> <li><a href="/docs/gcode/M119.html"><strong>M119</strong>: Endstop States</a></li> <li><a href="/docs/gcode/M120.html"><strong>M120</strong>: Enable Endstops</a></li> <li><a href="/docs/gcode/M121.html"><strong>M121</strong>: Disable Endstops</a></li> <li><a href="/docs/gcode/M122.html"><strong>M122</strong>: TMC Debugging</a></li> <li><a href="/docs/gcode/M123.html"><strong>M123</strong>: Fan Tachometers</a></li> <li><a href="/docs/gcode/M125.html"><strong>M125</strong>: Park Head</a></li> <li><a href="/docs/gcode/M126.html"><strong>M126</strong>: Baricuda 1 Open</a></li> <li><a href="/docs/gcode/M127.html"><strong>M127</strong>: Baricuda 1 Close</a></li> <li><a href="/docs/gcode/M128.html"><strong>M128</strong>: Baricuda 2 Open</a></li> <li><a href="/docs/gcode/M129.html"><strong>M129</strong>: Baricuda 2 Close</a></li> <li><a href="/docs/gcode/M140.html"><strong>M140</strong>: Set Bed Temperature</a></li> <li><a href="/docs/gcode/M141.html"><strong>M141</strong>: Set Chamber Temperature</a></li> <li><a href="/docs/gcode/M143.html"><strong>M143</strong>: Set Laser Cooler Temperature</a></li> <li><a href="/docs/gcode/M145.html"><strong>M145</strong>: Set Material Preset</a></li> <li><a href="/docs/gcode/M149.html"><strong>M149</strong>: Set Temperature Units</a></li> <li><a href="/docs/gcode/M150.html"><strong>M150</strong>: Set RGB(W) Color</a></li> <li><a href="/docs/gcode/M154.html"><strong>M154</strong>: Position Auto-Report</a></li> <li><a href="/docs/gcode/M155.html"><strong>M155</strong>: Temperature Auto-Report</a></li> <li><a href="/docs/gcode/M163.html"><strong>M163</strong>: Set Mix Factor</a></li> <li><a href="/docs/gcode/M164.html"><strong>M164</strong>: Save Mix</a></li> <li><a href="/docs/gcode/M165.html"><strong>M165</strong>: Set Mix</a></li> <li><a href="/docs/gcode/M166.html"><strong>M166</strong>: Gradient Mix</a></li> <li><a href="/docs/gcode/M190.html"><strong>M190</strong>: Wait for Bed Temperature</a></li> <li><a href="/docs/gcode/M191.html"><strong>M191</strong>: Wait for Chamber Temperature</a></li> <li><a href="/docs/gcode/M192.html"><strong>M192</strong>: Wait for Probe temperature</a></li> <li><a href="/docs/gcode/M193.html"><strong>M193</strong>: Set Laser Cooler Temperature</a></li> <li><a href="/docs/gcode/M200.html"><strong>M200</strong>: Set Filament Diameter</a></li> <li><a href="/docs/gcode/M201.html"><strong>M201</strong>: Print / Travel Move Limits</a></li> <li><a href="/docs/gcode/M203.html"><strong>M203</strong>: Set Max Feedrate</a></li> <li><a href="/docs/gcode/M204.html"><strong>M204</strong>: Set Starting Acceleration</a></li> <li><a href="/docs/gcode/M205.html"><strong>M205</strong>: Set Advanced Settings</a></li> <li><a href="/docs/gcode/M206.html"><strong>M206</strong>: Set Home Offsets</a></li> <li><a href="/docs/gcode/M207.html"><strong>M207</strong>: Set Firmware Retraction</a></li> <li><a href="/docs/gcode/M208.html"><strong>M208</strong>: Firmware Recover</a></li> <li><a href="/docs/gcode/M209.html"><strong>M209</strong>: Set Auto Retract</a></li> <li><a href="/docs/gcode/M211.html"><strong>M211</strong>: Software Endstops</a></li> <li><a href="/docs/gcode/M217.html"><strong>M217</strong>: Filament swap parameters</a></li> <li><a href="/docs/gcode/M218.html"><strong>M218</strong>: Set Hotend Offset</a></li> <li><a href="/docs/gcode/M220.html"><strong>M220</strong>: Set Feedrate Percentage</a></li> <li><a href="/docs/gcode/M221.html"><strong>M221</strong>: Set Flow Percentage</a></li> <li><a href="/docs/gcode/M226.html"><strong>M226</strong>: Wait for Pin State</a></li> <li><a href="/docs/gcode/M240.html"><strong>M240</strong>: Trigger Camera</a></li> <li><a href="/docs/gcode/M250.html"><strong>M250</strong>: LCD Contrast</a></li> <li><a href="/docs/gcode/M255.html"><strong>M255</strong>: LCD Sleep/Backlight Timeout</a></li> <li><a href="/docs/gcode/M256.html"><strong>M256</strong>: LCD Brightness</a></li> <li><a href="/docs/gcode/M260.html"><strong>M260</strong>: I2C Send</a></li> <li><a href="/docs/gcode/M261.html"><strong>M261</strong>: I2C Request</a></li> <li><a href="/docs/gcode/M280.html"><strong>M280</strong>: Servo Position</a></li> <li><a href="/docs/gcode/M281.html"><strong>M281</strong>: Edit Servo Angles</a></li> <li><a href="/docs/gcode/M282.html"><strong>M282</strong>: Detach Servo</a></li> <li><a href="/docs/gcode/M290.html"><strong>M290</strong>: Babystep</a></li> <li><a href="/docs/gcode/M300.html"><strong>M300</strong>: Play Tone</a></li> <li><a href="/docs/gcode/M301.html"><strong>M301</strong>: Set Hotend PID</a></li> <li><a href="/docs/gcode/M302.html"><strong>M302</strong>: Cold Extrude</a></li> <li><a href="/docs/gcode/M303.html"><strong>M303</strong>: PID autotune</a></li> <li><a href="/docs/gcode/M304.html"><strong>M304</strong>: Set Bed PID</a></li> <li><a href="/docs/gcode/M305.html"><strong>M305</strong>: User Thermistor Parameters</a></li> <li><a href="/docs/gcode/M306.html"><strong>M306</strong>: Model Predictive Temp. Control</a></li> <li><a href="/docs/gcode/M350.html"><strong>M350</strong>: Set micro-stepping</a></li> <li><a href="/docs/gcode/M351.html"><strong>M351</strong>: Set Microstep Pins</a></li> <li><a href="/docs/gcode/M355.html"><strong>M355</strong>: Case Light Control</a></li> <li><a href="/docs/gcode/M360.html"><strong>M360</strong>: SCARA Theta A</a></li> <li><a href="/docs/gcode/M361.html"><strong>M361</strong>: SCARA Theta-B</a></li> <li><a href="/docs/gcode/M362.html"><strong>M362</strong>: SCARA Psi-A</a></li> <li><a href="/docs/gcode/M363.html"><strong>M363</strong>: SCARA Psi-B</a></li> <li><a href="/docs/gcode/M364.html"><strong>M364</strong>: SCARA Psi-C</a></li> <li><a href="/docs/gcode/M380.html"><strong>M380</strong>: Activate Solenoid</a></li> <li><a href="/docs/gcode/M381.html"><strong>M381</strong>: Deactivate Solenoids</a></li> <li><a href="/docs/gcode/M400.html"><strong>M400</strong>: Finish Moves</a></li> <li><a href="/docs/gcode/M401.html"><strong>M401</strong>: Deploy Probe</a></li> <li><a href="/docs/gcode/M402.html"><strong>M402</strong>: Stow Probe</a></li> <li><a href="/docs/gcode/M403.html"><strong>M403</strong>: MMU2 Filament Type</a></li> <li><a href="/docs/gcode/M404.html"><strong>M404</strong>: Set Filament Diameter</a></li> <li><a href="/docs/gcode/M405.html"><strong>M405</strong>: Filament Width Sensor On</a></li> <li><a href="/docs/gcode/M406.html"><strong>M406</strong>: Filament Width Sensor Off</a></li> <li><a href="/docs/gcode/M407.html"><strong>M407</strong>: Filament Width</a></li> <li><a href="/docs/gcode/M410.html"><strong>M410</strong>: Quickstop</a></li> <li><a href="/docs/gcode/M412.html"><strong>M412</strong>: Filament Runout</a></li> <li><a href="/docs/gcode/M413.html"><strong>M413</strong>: Power-loss Recovery</a></li> <li><a href="/docs/gcode/M420.html"><strong>M420</strong>: Bed Leveling State</a></li> <li><a href="/docs/gcode/M421.html"><strong>M421</strong>: Set Mesh Value</a></li> <li><a href="/docs/gcode/M422.html"><strong>M422</strong>: Set Z Motor XY</a></li> <li><a href="/docs/gcode/M423.html"><strong>M423</strong>: X Twist Compensation</a></li> <li><a href="/docs/gcode/M425.html"><strong>M425</strong>: Backlash compensation</a></li> <li><a href="/docs/gcode/M428.html"><strong>M428</strong>: Home Offsets Here</a></li> <li><a href="/docs/gcode/M430.html"><strong>M430</strong>: Power Monitor</a></li> <li><a href="/docs/gcode/M486.html"><strong>M486</strong>: Cancel Objects</a></li> <li><a href="/docs/gcode/M493.html"><strong>M493</strong>: Fixed-Time Motion</a></li> <li><a href="/docs/gcode/M500.html"><strong>M500</strong>: Save Settings</a></li> <li><a href="/docs/gcode/M501.html"><strong>M501</strong>: Restore Settings</a></li> <li><a href="/docs/gcode/M502.html"><strong>M502</strong>: Factory Reset</a></li> <li><a href="/docs/gcode/M503.html"><strong>M503</strong>: Report Settings</a></li> <li><a href="/docs/gcode/M504.html"><strong>M504</strong>: Validate EEPROM contents</a></li> <li><a href="/docs/gcode/M510.html"><strong>M510</strong>: Lock Machine</a></li> <li><a href="/docs/gcode/M511.html"><strong>M511</strong>: Unlock Machine</a></li> <li><a href="/docs/gcode/M512.html"><strong>M512</strong>: Set Passcode</a></li> <li><a href="/docs/gcode/M524.html"><strong>M524</strong>: Abort SD print</a></li> <li><a href="/docs/gcode/M540.html"><strong>M540</strong>: Endstops Abort SD</a></li> <li><a href="/docs/gcode/M569.html"><strong>M569</strong>: Set TMC stepping mode</a></li> <li><a href="/docs/gcode/M575.html"><strong>M575</strong>: Serial baud rate</a></li> <li><a href="/docs/gcode/M592.html"><strong>M592</strong>: Nonlinear Extrusion Control</a></li> <li><a href="/docs/gcode/M593.html"><strong>M593</strong>: ZV Input Shaping</a></li> <li><a href="/docs/gcode/M600.html"><strong>M600</strong>: Filament Change</a></li> <li><a href="/docs/gcode/M603.html"><strong>M603</strong>: Configure Filament Change</a></li> <li><a href="/docs/gcode/M605.html"><strong>M605</strong>: Multi Nozzle Mode</a></li> <li><a href="/docs/gcode/M665.html"><strong>M665</strong>: Delta Configuration</a></li> <li><a href="/docs/gcode/M665-scara.html"><strong>M665</strong>: SCARA Configuration</a></li> <li><a href="/docs/gcode/M666.html"><strong>M666</strong>: Set Delta endstop adjustments</a></li> <li><a href="/docs/gcode/M666-dual.html"><strong>M666</strong>: Set dual endstop offsets</a></li> <li><a href="/docs/gcode/M672.html"><strong>M672</strong>: Duet Smart Effector sensitivity</a></li> <li><a href="/docs/gcode/M701.html"><strong>M701</strong>: Load filament</a></li> <li><a href="/docs/gcode/M702.html"><strong>M702</strong>: Unload filament</a></li> <li><a href="/docs/gcode/M710.html"><strong>M710</strong>: Controller Fan settings</a></li> <li><a href="/docs/gcode/M808.html"><strong>M808</strong>: Repeat Marker</a></li> <li><a href="/docs/gcode/M810-M819.html"><strong>M810-M819</strong>: G-code macros</a></li> <li><a href="/docs/gcode/M851.html"><strong>M851</strong>: XYZ Probe Offset</a></li> <li><a href="/docs/gcode/M852.html"><strong>M852</strong>: Bed Skew Compensation</a></li> <li><a href="/docs/gcode/M860-M869.html"><strong>M860-M869</strong>: I2C Position Encoders</a></li> <li><a href="/docs/gcode/M871.html"><strong>M871</strong>: Probe temperature config</a></li> <li><a href="/docs/gcode/M876.html"><strong>M876</strong>: Handle Prompt Response</a></li> <li><a href="/docs/gcode/M900.html"><strong>M900</strong>: Linear Advance Factor</a></li> <li><a href="/docs/gcode/M906.html"><strong>M906</strong>: Stepper Motor Current</a></li> <li><a href="/docs/gcode/M907.html"><strong>M907</strong>: Set Motor Current</a></li> <li><a href="/docs/gcode/M908.html"><strong>M908</strong>: Set Trimpot Pins</a></li> <li><a href="/docs/gcode/M909.html"><strong>M909</strong>: DAC Print Values</a></li> <li><a href="/docs/gcode/M910.html"><strong>M910</strong>: Commit DAC to EEPROM</a></li> <li><a href="/docs/gcode/M911.html"><strong>M911</strong>: TMC OT Pre-Warn Condition</a></li> <li><a href="/docs/gcode/M912.html"><strong>M912</strong>: Clear TMC OT Pre-Warn</a></li> <li><a href="/docs/gcode/M913.html"><strong>M913</strong>: Set Hybrid Threshold Speed</a></li> <li><a href="/docs/gcode/M914.html"><strong>M914</strong>: TMC Bump Sensitivity</a></li> <li><a href="/docs/gcode/M915.html"><strong>M915</strong>: TMC Z axis calibration</a></li> <li><a href="/docs/gcode/M916.html"><strong>M916</strong>: L6474 Thermal Warning Test</a></li> <li><a href="/docs/gcode/M917.html"><strong>M917</strong>: L6474 Overcurrent Warning Test</a></li> <li><a href="/docs/gcode/M918.html"><strong>M918</strong>: L6474 Speed Warning Test</a></li> <li><a href="/docs/gcode/M919.html"><strong>M919</strong>: TMC Chopper Timing</a></li> <li><a href="/docs/gcode/M928.html"><strong>M928</strong>: Start SD Logging</a></li> <li><a href="/docs/gcode/M951.html"><strong>M951</strong>: Magnetic Parking Extruder</a></li> <li><a href="/docs/gcode/M993.html"><strong>M993-M994</strong>: SD / SPI Flash</a></li> <li><a href="/docs/gcode/M995.html"><strong>M995</strong>: Touch Screen Calibration</a></li> <li><a href="/docs/gcode/M997.html"><strong>M997</strong>: Firmware update</a></li> <li><a href="/docs/gcode/M999.html"><strong>M999</strong>: STOP Restart</a></li> <li><a href="/docs/gcode/M7219.html"><strong>M7219</strong>: MAX7219 Control</a></li> <li><a href="/docs/gcode/T.html"><strong>T0-T7</strong>: Select or Report Tool</a></li> <li><a href="/docs/gcode/T-mmu2.html"><strong>T?-Tx</strong>: MMU2 Special Commands</a></li> </ul> </li> <li class="dropdown-submenu hardware"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Hardware</a> <ul class="dropdown-menu"> <li><a href="/meta/hardware/">All documents</a></li> <li class="divider"> <li><a href="/docs/hardware/boards.html">Boards</a></li> <li><a href="/docs/hardware/controllers.html">Controllers and displays</a></li> <li class="divider"> <li><a href="/docs/hardware/endstops.html">Endstops</a></li> <li><a href="/docs/hardware/tmc_drivers.html">Trinamic drivers</a></li> </ul> </li> <li class="dropdown-submenu setting"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Settings</a> <ul class="dropdown-menu"> <li><a href="/meta/setting/">All documents</a></li> <li class="divider"> <li><a href="/docs/setting/config_info.html">Configuration Info</a></li> <li><a href="/docs/setting/extruder.html">Extruders</a></li> <li><a href="/docs/setting/hardware.html">Hardware</a></li> <li><a href="/docs/setting/machine_info.html">Machine Info</a></li> <li><a href="/docs/setting/stepper_drivers.html">Stepper Drivers</a></li> <li><a href="/docs/setting/temperature.html">Temperature</a></li> </ul> </li> <li><a href="/docs/basics/troubleshooting.html">Troubleshooting</a></li> <li class="divider"> <li><a href="/meta/in-review/">Documentation Needing Review</a></li> </ul> </li> <li id="top-donate"><a href="/docs/development/contributing.html#donate">❤️ Donate</a></li> <li id="searchbox"> <form action="/meta/search/"> <input type="search" name="q" placeholder="Search"> </form> </li> </ul> <ul class="nav navbar-right hidden-sm"> <li> <a href="https://github.com/MarlinFirmware/MarlinDocumentation/edit/master/_hardware/tmc_drivers.md" data-proofer-ignore><i class="fa fa-pen-to-square" aria-hidden="true"></i> <span>Edit Page</span></a> </li> </ul> </div> </div> </nav> <div class="custom-btn"> <div class="row hidden-md hidden-lg hidden-xl"> <a class="btn btn-edit e-btn btn-block btn-lg" href="https://github.com/MarlinFirmware/MarlinDocumentation/edit/master/_hardware/tmc_drivers.md" data-proofer-ignore role="button"><span class="e-btn-text"><em class="fa fa-pen-to-square" aria-hidden="true"></em>  Edit Page</span></a> </div> <div class="row"> <a class="btn btn-learn e-btn btn-block btn-lg" href="/docs/basics/introduction.html" role="button"> <span class="e-btn-text"><em class="fa fa-book" aria-hidden="true"></em>  Learn more</span></a> </div> <div class="row"> <a class="btn btn-contribute e-btn btn-block btn-lg" href="/docs/development/contributing.html" role="button"> <span class="e-btn-text"><em class="fa fa-users" aria-hidden="true"></em>  Contribute</span></a> </div> <div class="row"> <a class="btn btn-download e-btn btn-block btn-lg" href="/meta/download/" role="button"> <span class="e-btn-text"><em class="fa fa-download" aria-hidden="true"></em>  Download</span></a> </div> <div class="row"> <a class="btn btn-follow e-btn btn-block btn-lg" href="//fosstodon.org/@marlinfirmware" role="button"> <span class="e-btn-text"><em class="fa-brands fa-mastodon" aria-hidden="true"></em>  Follow @MarlinFirmware</span></a> </div> <div class="row"> <a class="btn btn-follow e-btn btn-block btn-lg" href="//twitter.com/marlinfirmware" role="button"> <span class="e-btn-text"><em class="fa-brands fa-x" aria-hidden="true"></em>  Follow @MarlinFirmware</span></a> </div> </div> <div class="container" role="main"> <div class="row"> <div class="col-lg-3 col-md-4 visible-lg-block visible-md-block custom-no-padding"> <div class="custom-fixed-sidebar"> <div id="toc"></div> </div> </div> <div class="col-lg-9 col-md-8"> <div class="row"> <div class="col-md-12 custom-article"> <p id="authors" class="text-right pull-right visible-lg-block hidden-print small custom-pt25"> <a href="//github.com/teemuatlut" data-toggle="tooltip" data-placement="bottom" title="Visit teemuatlut's profile on Github"><img class="avatar avatar-small" alt="teemuatlut" width="30" height="30" data-proofer-ignore="true" src="https://avatars0.githubusercontent.com/teemuatlut?v=3&amp;s=30" srcset="https://avatars0.githubusercontent.com/teemuatlut?v=3&amp;s=30 1x, https://avatars0.githubusercontent.com/teemuatlut?v=3&amp;s=60 2x, https://avatars0.githubusercontent.com/teemuatlut?v=3&amp;s=90 3x, https://avatars0.githubusercontent.com/teemuatlut?v=3&amp;s=120 4x"></a> <a href="//github.com/shitcreek" data-toggle="tooltip" data-placement="bottom" title="Visit shitcreek's profile on Github"><img class="avatar avatar-small" alt="shitcreek" width="30" height="30" data-proofer-ignore="true" src="https://avatars1.githubusercontent.com/shitcreek?v=3&amp;s=30" srcset="https://avatars1.githubusercontent.com/shitcreek?v=3&amp;s=30 1x, https://avatars1.githubusercontent.com/shitcreek?v=3&amp;s=60 2x, https://avatars1.githubusercontent.com/shitcreek?v=3&amp;s=90 3x, https://avatars1.githubusercontent.com/shitcreek?v=3&amp;s=120 4x"></a> </p> <h1 class="custom-article-header">Trinamic drivers</h1> <p>Stepper motors in a 3D printer are controlled by a variety of driver chips such as the common A4988 and DRV8825. These provide signals to the stepper motors to control the magnets and move them by micro-steps. Typically the motor is divided into 3200 steps per revolution, with 80 steps per millimeter of motion. At the movement rates of 3D printers, and due to the ringing produced by stepper motors, the vibrations from these steps can be very loud to the human ear.</p> <p>Trinamic stepper drivers control stepper motors with greater finesse and interpolate the micro-steps to produce extremely quiet motion. Through SPI or serial control, you can change how the drivers manage motor current as well as the manner of current delivery. These drivers can even detect when a motor hits an obstruction, so they can act as endstops for simplified wiring. You can also set the driver current with Marlin G-code commands, removing the need to adjust physical trimpots.</p> <h2 id="supported-tmc-drivers-and-features">Supported TMC drivers and features</h2> <table> <thead> <tr> <th style="text-align: center">Driver</th> <th style="text-align: center">Control</th> <th style="text-align: center">StealthChop</th> <th style="text-align: center">Sensorless<br>homing/probing</th> <th style="text-align: center">Driver monitoring</th> <th style="text-align: center">Hybrid threshold</th> <th style="text-align: left">Notes</th> </tr> </thead> <tbody> <tr> <td style="text-align: center">TMC2100</td> <td style="text-align: center">none</td> <td style="text-align: center">yes</td> <td style="text-align: center">no</td> <td style="text-align: center">no</td> <td style="text-align: center">no</td> <td style="text-align: left">Standalone mode only</td> </tr> <tr> <td style="text-align: center">TMC2130</td> <td style="text-align: center">SPI</td> <td style="text-align: center">yes</td> <td style="text-align: center">yes</td> <td style="text-align: center">yes</td> <td style="text-align: center">yes</td> <td style="text-align: left"> </td> </tr> <tr> <td style="text-align: center">TMC2160</td> <td style="text-align: center">SPI</td> <td style="text-align: center">???</td> <td style="text-align: center">???</td> <td style="text-align: center">???</td> <td style="text-align: center">???</td> <td style="text-align: left"> </td> </tr> <tr> <td style="text-align: center">TMC5130</td> <td style="text-align: center">SPI</td> <td style="text-align: center">???</td> <td style="text-align: center">???</td> <td style="text-align: center">???</td> <td style="text-align: center">???</td> <td style="text-align: left"> </td> </tr> <tr> <td style="text-align: center">TMC5160</td> <td style="text-align: center">SPI</td> <td style="text-align: center">yes</td> <td style="text-align: center">yes</td> <td style="text-align: center">yes</td> <td style="text-align: center">yes</td> <td style="text-align: left"> </td> </tr> <tr> <td style="text-align: center">TMC2208<br>TMC2225</td> <td style="text-align: center">UART</td> <td style="text-align: center">yes</td> <td style="text-align: center">no</td> <td style="text-align: center">yes</td> <td style="text-align: center">yes</td> <td style="text-align: left">UART RX line requires an interrupt capable pin.<br>Software UART not support on all platforms, such as DUE based boards.</td> </tr> <tr> <td style="text-align: center">TMC2209<br>TMC2226</td> <td style="text-align: center">UART</td> <td style="text-align: center">yes</td> <td style="text-align: center">yes</td> <td style="text-align: center">yes</td> <td style="text-align: center">yes</td> <td style="text-align: left"> </td> </tr> <tr> <td style="text-align: center">TMC2660</td> <td style="text-align: center">SPI</td> <td style="text-align: center">no</td> <td style="text-align: center">not implemented</td> <td style="text-align: center">yes</td> <td style="text-align: center">no</td> <td style="text-align: left"> </td> </tr> </tbody> </table> <p>All configurable Trinamic stepper drivers can also be operated in standalone mode if they are pre-configured in hardware, either by hard connections or jumpers.</p> <h2 id="installing-the-library">Installing the library</h2> <p>The TMC stepper drivers require an external library that allows Marlin to communicate with each driver.</p> <h3 id="for-platformio">For PlatformIO</h3> <p>PlatformIO will automatically download all libraries it requires, so skip directly to <strong>Wiring</strong> below.</p> <h3 id="installing-from-arduino-ide-library-manager">Installing from Arduino IDE library manager</h3> <ul> <li>Open up the Arduino IDE</li> <li>Go to Sketch -&gt; Include Library -&gt; Manage Libraries…</li> <li>Marlin 1.1.9 and up: <ul> <li>Search for <strong>TMCStepper</strong> </li> </ul> </li> <li>Older versions of Marlin <ul> <li>Search for <strong>TMC2130Stepper</strong> or <strong>TMC2208Stepper</strong> </li> </ul> </li> <li>Click <code class="language-plaintext highlighter-rouge">Install</code> </li> </ul> <h3 id="installing-from-a-zip-file">Installing from a zip file</h3> <ul> <li>Marlin 1.1.9 and up: <ul> <li>Go to <a href="//github.com/teemuatlut/TMCStepper">TMC library homepage</a> </li> </ul> </li> <li>Older versions of Marlin <ul> <li>Go to the <a href="//github.com/teemuatlut/TMC2130Stepper">TMC2130 library page</a> </li> <li>Go to the <a href="//github.com/teemuatlut/TMC2208Stepper">TMC2208 library page</a> </li> </ul> </li> <li>Click <strong>Clone or download</strong> -&gt; <strong>Download ZIP</strong> </li> <li>In Arduino IDE and go to <strong>Sketch</strong> -&gt; <strong>Include Library</strong> -&gt; <strong>Add .ZIP Library</strong>…</li> <li>Navigate to the downloaded file and click the <strong>Open</strong> button.</li> </ul> <h2 id="wiring">Wiring</h2> <p>TMC drivers (except in standalone mode) require some extra wiring (Serial or SPI) to communicate with and configure the drivers. Boards like the SKR from BigTreeTech actually integrate this wiring directly into the motherboard.</p> <h3 id="spi-control">SPI Control</h3> <p>The SPI bus requires 4 wires for communication. The <code class="language-plaintext highlighter-rouge">SCK</code>, <code class="language-plaintext highlighter-rouge">MOSI</code>, and <code class="language-plaintext highlighter-rouge">MISO</code> wires can be shared across all the drivers, while <code class="language-plaintext highlighter-rouge">CK</code> must be wired to a separate pin for each driver. These pins are labeled differently on the motherboard versus the driver:</p> <table> <thead> <tr> <th style="text-align: right">Motherboard</th> <th style="text-align: left">Driver</th> </tr> </thead> <tbody> <tr> <td style="text-align: right">SCK</td> <td style="text-align: left">SCK</td> </tr> <tr> <td style="text-align: right">MOSI</td> <td style="text-align: left">SDI</td> </tr> <tr> <td style="text-align: right">MISO</td> <td style="text-align: left">SDO</td> </tr> <tr> <td style="text-align: right">CS</td> <td style="text-align: left">CS</td> </tr> </tbody> </table> <h4 id="software-spi">Software SPI</h4> <p>You can use pins other than the HW SPI pins by enabling <code class="language-plaintext highlighter-rouge">TMC_USE_SW_SPI</code> and defining the required pins:</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">TMC_SW_MOSI</span>
<span class="n">TMC_SW_MISO</span>
<span class="n">TMC_SW_SCK</span>
</code></pre></div></div> <h3 id="uart-serial-control">UART (Serial) CONTROL</h3> <p>A 1K resistor is required between <code class="language-plaintext highlighter-rouge">TX</code> and <code class="language-plaintext highlighter-rouge">PD_UART</code>.</p> <table> <thead> <tr> <th style="text-align: right">Motherboard</th> <th> </th> <th style="text-align: left">Driver</th> </tr> </thead> <tbody> <tr> <td style="text-align: right">RX</td> <td> </td> <td style="text-align: left">PD_UART</td> </tr> <tr> <td style="text-align: right">TX</td> <td>(1kohm)</td> <td style="text-align: left">PD_UART</td> </tr> </tbody> </table> <p>The serial port on master is selected in the pins file for your board. Alternatively you can use the slower software serial by not selecting any of the hardware serial ports. Typically one port per one driver is needed.</p> <h3 id="software-uart">Software UART</h3> <p>You can use free pins for UART by disabling all of the hardware serial options in your board’s pins file and by defining the <code class="language-plaintext highlighter-rouge">_SERIAL_TX_PIN</code> and <code class="language-plaintext highlighter-rouge">_SERIAL_RX_PIN</code> pins.</p> <p><strong>Note:</strong> The receive (RX) pins must be interrupt-capable pins. Transmit (TX) pins don’t have this limitation.</p> <h2 id="fysetc-drivers">FYSETC drivers</h2> <p>As of this writing, we recommend getting the original Watterott drivers or the revised FYSETC v1.1 drivers to avoid additional headaches.</p> <p>The FYSETC v1.0 drivers come pre-configured in standalone mode. So the drivers should work for moving the axes but you won’t be able to configure them or take advantage of their extra features. For full-featured drivers you’ll need to modify three solder bridges on the driver PCB.</p> <p><img src="/assets/images/features/FYSETC_tmc2130._SPI.jpg" alt="FYSETC_TMC2130"></p> <p>Some versions of the FYSETC v1.0 drivers come with a solder bridge left of the chip, some come with a bridging resistor. This connection needs to be opened for SPI connection to work. The two smaller bridges need to be configured as shown.</p> <h2 id="features-and-configuration-options">Features and configuration options</h2> <p>Several Trinamic-specific technologies are supported by Marlin.</p> <ul> <li> <a href="//www.trinamic.com/technology/adv-technologies/stealthchop/">stealthChop</a> is a technology that drives the motors using PWM voltage instead of current. The result is nearly inaudible stepping at low velocities. StealthChop has a lower stepping speed limit and if you need to move faster, for example travel moves, you may want to use spreadCycle or configure Hybrid Mode.</li> <li> <a href="//www.trinamic.com/technology/adv-technologies/spreadcycle/">spreadCycle</a> is an alternative stepping mode. The driver will use four stages to drive the desired current into the stepper motor. SpreadCycle provides greater torque which might be useful if you’re experiencing skipped steps. The downside is slightly higher noise levels.</li> <li> <a href="//www.trinamic.com/technology/adv-technologies/stallguard/">stallGuard</a> measures the load that is applied to the motor. If the load is sufficiently high, Marlin can react to the event. Such an event can be when we drive an axis to its physical limit and the signal provided by the driver can be detected just like an endstop. That way you can use the driver itself as an axis sensor negating the need to an additional endstop and the wiring needed. StallGuard is only active when the driver is in spreadCycle mode.</li> <li>Hybrid Mode: Marlin can configure the driver to automatically change between stepping modes using a user configured switching velocity. If the velocity is lower than the threshold the stepper is in quiet stealthChop mode. When the axis velocity increases the driver will automatically switch to spreadCycle.</li> </ul> <table> <thead> <tr> <th style="text-align: right">Option</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: right">R_SENSE</td> <td style="text-align: left">The current sense resistor used in your product.<br>* Watterott SilentStepSticks typically use 0.11ohm values.<br>* Ultimachine Archim2 board has 0.22ohms.<br>* Panucatt TMC2660 BigFoot drivers use 0.1ohms.</td> </tr> <tr> <td style="text-align: right">HOLD_MULTIPLIER</td> <td style="text-align: left">After the stepper hasn’t been moving for a short while, the driver can decrease the current and let the driver cool down. The multiplier is expressed as a decimal value in the range of 0.0 to 1.0.</td> </tr> <tr> <td style="text-align: right">INTERPOLATE</td> <td style="text-align: left">TMC drivers can take lower microstepping inputs, like the typical 16 and interpolate that to 256 microsteps which provides smoother movement.</td> </tr> <tr> <td style="text-align: right">CURRENT</td> <td style="text-align: left">Driver current expressed in milliamps. Higher current values will need active cooling and a heatsink. Low current values may warrant lower acceleration values to prevent skipping steps.</td> </tr> <tr> <td style="text-align: right">MICROSTEPS</td> <td style="text-align: left">Configures the driver to divide a full step into smaller microsteps which provide smoother movement.</td> </tr> <tr> <td style="text-align: right">SOFTWARE_DRIVER_ENABLE</td> <td style="text-align: left">Some drivers do not have a dedicated enable (EN) line and require the same function to be handled through software commands.</td> </tr> <tr> <td style="text-align: right">STEALTHCHOP</td> <td style="text-align: left">Default state for stepping mode on supporting TMC drivers.</td> </tr> <tr> <td style="text-align: right">CHOPPER_TIMING</td> <td style="text-align: left">Fine tune the <em>spreadCycle</em> chopper timings to optimize noise performance.<br>A set of presets has been provided according to used driver voltage level, but a customized set can be used by specifying<br><code class="language-plaintext highlighter-rouge">{ &lt;off_time[1..15]&gt;, &lt;hysteresis_end[-3..12]&gt;, hysteresis_start[1..8] }</code> </td> </tr> <tr> <td style="text-align: right">MONITOR_DRIVER_STATUS</td> <td style="text-align: left">Periodically poll the drivers to determine their status. Marlin can automatically reduce the driver current if the driver report overtemperature prewarn condition. The firmware can also react to error states like short to ground or open load conditions.</td> </tr> <tr> <td style="text-align: right">CURRENT_STEP</td> <td style="text-align: left">Reduce current value when Marlin sees OTPW error.</td> </tr> <tr> <td style="text-align: right">REPORT_CURRENT_CHANGE</td> <td style="text-align: left">Report to the user when automatically changing current setting.</td> </tr> <tr> <td style="text-align: right">STOP_ON_ERROR</td> <td style="text-align: left">If Marlin detects an error where the driver has shut down to protect itself, it can stop the print to save both time and material.</td> </tr> <tr> <td style="text-align: right">HYBRID_THRESHOLD</td> <td style="text-align: left">Configure the axis speed when the driver should switch between stealthChop and spreadCycle modes.</td> </tr> <tr> <td style="text-align: right">SENSORLESS_HOMING</td> <td style="text-align: left">Use the TMC drivers that support this feature to act as endstops by using stallGuard to detect a physical limit.</td> </tr> <tr> <td style="text-align: right">SENSORLESS_PROBING</td> <td style="text-align: left">Use stallGuard on supporting TMC drivers to replace a bed probe.<br>Recommended to be used on delta printers only.</td> </tr> <tr> <td style="text-align: right">HOMING_SENSITIVITY</td> <td style="text-align: left">The Sensorless Homing sensitivity can be tuned to suit the specific machine.<br>A <strong>higher</strong> value will make homing <strong>less</strong> sensitive.<br>A <strong>lower</strong> value will make homing <strong>more</strong> sensitive.</td> </tr> <tr> <td style="text-align: right">TMC_DEBUG</td> <td style="text-align: left">Extend the information <a href="/docs/gcode/M122.html"><code class="language-plaintext highlighter-rouge">M122</code></a> reports. This will give you <em>a lot</em> of additional information about the status of your TMC drivers.</td> </tr> <tr> <td style="text-align: right">TMC_ADV</td> <td style="text-align: left">You can use this to add your own configuration settings. The requirement is that the command used must be part of the respective TMC stepper library. Remember to add a backslash () after each command!</td> </tr> <tr> <td style="text-align: right">AUTOMATIC_CURRENT_CONTROL</td> <td style="text-align: left">Replaced by <code class="language-plaintext highlighter-rouge">MONITOR_DRIVER_STATUS</code>.<br>Marlin will poll the driver twice a second to see if the driver is in an error state. Such an error can be overtemperature pre-warn condition (OTPW) or short to ground or open load. Marlin can react to the temperature warning and automatically reduce the driver current. Short to ground error will disable the driver and Marlin can terminate the print to save time and material.</td> </tr> </tbody> </table> <h2 id="g-codes">G-codes</h2> <table> <thead> <tr> <th style="text-align: right">Command</th> <th style="text-align: center">Configuration<br>required</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: right"><a href="/docs/gcode/M122.html"><code class="language-plaintext highlighter-rouge">M122</code></a></td> <td style="text-align: center">none</td> <td style="text-align: left">Test driver communication line and get debugging information of your drivers. <code class="language-plaintext highlighter-rouge">TMC_DEBUG</code> adds more reported information.</td> </tr> <tr> <td style="text-align: right"><a href="/docs/gcode/M569.html"><code class="language-plaintext highlighter-rouge">M569</code></a></td> <td style="text-align: center"> <code class="language-plaintext highlighter-rouge">TMC2130</code> or <code class="language-plaintext highlighter-rouge">TMC2208</code> </td> <td style="text-align: left">Toggle between stealthChop and spreadCycle on supporting drivers.</td> </tr> <tr> <td style="text-align: right"><a href="/docs/gcode/M906.html"><code class="language-plaintext highlighter-rouge">M906</code></a></td> <td style="text-align: center">none</td> <td style="text-align: left">Set the driver current using axis letters X/Y/Z/E.</td> </tr> <tr> <td style="text-align: right"><a href="/docs/gcode/M911.html"><code class="language-plaintext highlighter-rouge">M911</code></a></td> <td style="text-align: center"><code class="language-plaintext highlighter-rouge">MONITOR_DRIVER_STATUS</code></td> <td style="text-align: left">Report TMC prewarn triggered flags held by the library.</td> </tr> <tr> <td style="text-align: right"><a href="/docs/gcode/M912.html"><code class="language-plaintext highlighter-rouge">M912</code></a></td> <td style="text-align: center"><code class="language-plaintext highlighter-rouge">MONITOR_DRIVER_STATUS</code></td> <td style="text-align: left">Clear TMC prewarn triggered flags.</td> </tr> <tr> <td style="text-align: right"><a href="/docs/gcode/M913.html"><code class="language-plaintext highlighter-rouge">M913</code></a></td> <td style="text-align: center"><code class="language-plaintext highlighter-rouge">HYBRID_THRESHOLD</code></td> <td style="text-align: left">Set HYBRID_THRESHOLD speed.</td> </tr> <tr> <td style="text-align: right"><a href="/docs/gcode/M914.html"><code class="language-plaintext highlighter-rouge">M914</code></a></td> <td style="text-align: center"><code class="language-plaintext highlighter-rouge">SENSORLESS_HOMING</code></td> <td style="text-align: left">Set SENSORLESS_HOMING sensitivity.</td> </tr> <tr> <td style="text-align: right"><a href="/docs/gcode/M915.html"><code class="language-plaintext highlighter-rouge">M915</code></a></td> <td style="text-align: center"><code class="language-plaintext highlighter-rouge">TMC_Z_CALIBRATION</code></td> <td style="text-align: left">(Deprecated in Marlin 2.0.)<br>Level your X axis by trying to move the Z axis past its physical limit. The movement is done at a reduced motor current to prevent breaking parts and promote skipped steps. Marlin will then rehome Z axis and restore normal current setting.</td> </tr> </tbody> </table> <h2 id="troubleshooting">Troubleshooting</h2> <ul> <li>Some SilentStepSticks with variable 3-5V logic voltage (VIO) <a href="//github.com/MarlinFirmware/Marlin/issues/10162#issuecomment-397844847">might get damaged</a> if only powered over USB.</li> <li>Test driver communication status with <a href="/docs/gcode/M122.html"><code class="language-plaintext highlighter-rouge">M122</code></a>.</li> <li>Test Marlin’s <strong>bugfix</strong> branch (on GitHub) to see if your issue is fixed.</li> <li>Test the latest TMCStepper library to see if your issue is fixed.</li> <li>Check all wiring and wire crimps. <ul> <li> <strong>SPI</strong>: Use a multimeter to check connectivity all the way down the chain on all the communication lines.</li> <li> <strong>SPI</strong> conflict with the <strong>SD card</strong>? Solutions vary.</li> <li> <strong>UART</strong>: <ul> <li>Make sure your receive (RX) pin is interrupt capable</li> <li>Check the resistance value between receive (RX) and transmit (TX) lines. You should see 1kOhm.</li> <li>Check connectivity from RX to the TMC chip</li> </ul> </li> </ul> </li> <li>Check <strong>12V</strong> (<strong>24V</strong>) power in the <strong>Vm</strong> pin and <strong>5V</strong> (<strong>3.3V</strong>) in the <strong>Vio</strong> pin.</li> <li>Check that configured pins match your firmware configuration.</li> <li>Enable <code class="language-plaintext highlighter-rouge">TMC_DEBUG</code> and send <a href="/docs/gcode/M122.html"><code class="language-plaintext highlighter-rouge">M122</code></a> to see further debugging output. <ul> <li>Reported register values of either <code class="language-plaintext highlighter-rouge">0x00000000</code> or <code class="language-plaintext highlighter-rouge">0xFFFFFFFF</code> are bad responses.</li> </ul> </li> <li>Try the examples provided by the respective library. Please detach any belts beforehand however, as the examples will not respect any endstop signals or physical limits. You may need to change the pin definitions.</li> <li>If you’re experiencing skipped steps there are a few things you can try <ul> <li>First check for mechanical obstructions and that the parts move freely and do not bind</li> <li>Check that your nozzle doesn’t bump into your print if it starts curling upwards (cooling issue)</li> <li>Lower acceleration and jerk values</li> <li>Increase driver cooling</li> <li>Increase motor current</li> <li>Disable <code class="language-plaintext highlighter-rouge">INTERPOLATE</code> </li> </ul> </li> </ul> <h2 id="external-resources">External resources</h2> <ul> <li> <a href="//github.com/teemuatlut/TMCStepper">Arduino library for TMC drivers</a> (Replaces the following two)</li> <li> <p>For older Marlin you may need <a href="//github.com/teemuatlut/TMC2130Stepper">TMC2130 Arduino library</a> or <a href="//github.com/teemuatlut/TMC2208Stepper">TMC2208 Arduino library</a></p> </li> <li><a href="//github.com/watterott/SilentStepStick/blob/master/hardware/%0ASlentStepStick-TMC2130_v11.pdf">SilentStepStick TMC2130 schematic and pinout</a></li> <li> <p><a href="//github.com/watterott/SilentStepStick/blob/master/hardware/SlentStepStick-TMC2208_v12.pdf">SilentStepStick TMC2208 schematic and pinout</a></p> </li> <li><a href="//www.trinamic.com">Trinamic</a></li> <li><a href="//learn.watterott.com/silentstepstick/">Watterott documentation</a></li> <li><a href="//www.trinamic.com/technology/adv-technologies/stallguard/">stallGuard</a></li> <li><a href="//www.trinamic.com/technology/adv-technologies/stealthchop/">stealthChop</a></li> <li><a href="//www.trinamic.com/technology/adv-technologies/spreadcycle/">spreadCycle</a></li> <li> <p>Datasheets for <a href="//www.trinamic.com/fileadmin/assets/Products/ICs_Documents/TMC2130_datasheet.pdf">TMC2130</a> and <a href="//www.trinamic.com/fileadmin/assets/Products/ICs_Documents/TC220x_TMC2224_Datasheet_Rev1.10.pdf">TMC2208</a></p> </li> <li> <p><a href="//hackaday.com/2016/09/30/3-printering-trinamic-tmc2130-stepper-motor-drivers-shifting-the-gears/">TMC2130 Hackaday article by Moritz Walter</a></p> </li> <li><a href="//youtu.be/sPvTB3irCxQ">Video guide by Thomas Sanladerer</a></li> <li><a href="//youtu.be/GVs2d-TOims">TMC2208 Torque testing by Alex Kenis</a></li> </ul> </div> </div> </div> </div> </div> <footer> <div class="container shift-footer "> <div class="row"> <div class="col-8"> <p>Brought to you with <i class="fa fa-heart text-danger" aria-hidden="true"></i> lack of <i class="fa fa-bed" aria-hidden="true"></i> and lots of <i class="fa fa-coffee" aria-hidden="true"></i>. <br> The contents of this website are © 2024 under the terms of the <a href="//www.gnu.org/licenses/gpl-3.0.txt">GPLv3</a> License.</p> </div> <div class="col-4"> <div class="pull-right back-to-top"> <a href="#top" data-proofer-ignore> Back to top <i class="fa fa-level-up" aria-hidden="true"></i></a> </div> </div> </div> </div> </footer> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-76230130-1', {
          'cookieDomain': 'marlinfw.org',
          'siteSpeedSampleRate': 80
      });

      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script> </body> </html>