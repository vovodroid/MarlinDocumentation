<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"/> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> <meta name="viewport" content="width=device-width, initial-scale=1"/> <meta name="flattr:id" content="e7nqg5"/> <title>Laser/Spindle Configuration (2.0.9.x) | Marlin Firmware</title> <meta name="generator" content="Jekyll v3.9.0"/> <meta property="og:title" content="Laser/Spindle Configuration (2.0.9.x)"/> <meta name="author" content="descipher"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="Configuring a laser or spindle in Marlin."/> <meta property="og:description" content="Configuring a laser or spindle in Marlin."/> <link rel="canonical" href="https://marlinfw.org/docs/configuration/2.0.9/laser_spindle.html"/> <meta property="og:url" content="https://marlinfw.org/docs/configuration/2.0.9/laser_spindle.html"/> <meta property="og:site_name" content="Marlin Firmware"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2024-01-13T02:30:54-06:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Laser/Spindle Configuration (2.0.9.x)"/> <meta name="twitter:site" content="@MarlinFirmware"/> <meta name="twitter:creator" content="@descipher"/> <script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"descipher"},"dateModified":"2024-01-13T02:30:54-06:00","datePublished":"2024-01-13T02:30:54-06:00","description":"Configuring a laser or spindle in Marlin.","headline":"Laser/Spindle Configuration (2.0.9.x)","mainEntityOfPage":{"@type":"WebPage","@id":"https://marlinfw.org/docs/configuration/2.0.9/laser_spindle.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://marlinfw.org/assets/images/logo/marlin/small.png"},"name":"descipher"},"url":"https://marlinfw.org/docs/configuration/2.0.9/laser_spindle.html"}</script> <link rel="icon" href="/assets/favicon_m.ico"/> <link rel="stylesheet" href="/assets/stylesheets/main.css"/> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--> <script src="/assets/javascript/head.min.js"></script> <script type="text/javascript">

      /**
       * As Github pages do not support https for custom domains
       * this is the current best workaround for #18.
       */
      var domains  = [ 'marlinfw.org', 'localhost', '127.0.0.1' ];
      var pathname = location.pathname.replace(/^\/MarlinDocumentation/, '')
      if (domains.indexOf(window.location.hostname) == -1)
        window.top.location.href = 'https://marlinfw.org' + pathname;

      /**
       * Another ugly workaround trying to improve UX reported by #35
       */
      if (location.protocol != 'https:' && window.location.hostname == 'marlinfw.org')
        location.href = 'https:' + window.location.href.substring(window.location.protocol.length);

      /**
       * Improves overall speed by loading javascript and css resources in parallel
       * with the main page.
       */
      head.load(
          "/assets/stylesheets/fontawesome.min.css",
          "/assets/stylesheets/solid.min.css",
          "/assets/stylesheets/brands.min.css",

          "/assets/javascript/jquery-2.2.1.min.js",
          "/assets/javascript/jquery-ui.min.js",
          "/assets/javascript/bootstrap.min.js",
          "/assets/javascript/tocify.min.js",
          "/assets/javascript/search.js",
          "/assets/javascript/custom.js",

          "/assets/javascript/sheetrock.min.js",
          "/assets/javascript/cookieconsent.min.js"
      );

      head.ready(function() {
        window.cookieconsent_options = {
          "message":"We use cookies to ensure you get the best experience on our website",
          "dismiss": "Got it!", "learnMore": "More info", "link":"", "theme": "dark-bottom"
        };
      });
    </script> </head> <body role="document"> <nav class="navbar navbar-default navbar-fixed-top custom-no-margin"> <div class="container"> <div class="navbar-header"> <img id="daynite" src="/assets/images/btn-night.svg" alt="Dark Mode" width="32" height="32"> <a href="/" class="navbar-brand"> <svg id="mflogo" height="95%" version="1.1" viewbox="0 0 828.26325 270.80054"> <g id="g981"> <path d="M 69.48788,0 C 31.1751,0 0,32.61059 0,72.74045 V 198.055 c 0,40.12987 31.17607,72.74553 69.48788,72.74553 H 758.7735 c 38.3127,0 69.4898,-32.61566 69.4898,-72.74553 V 5.84382 c -0.019,-3.60102 -2,-5.68155 -6.9765,-5.84159 H 220.29327 Z m 0,21.01625 H 682.6259 c 8.157,0.43104 14.4593,1.90061 18.9474,6.50681 7.8555,8.06197 84.9293,82.07514 102.73,100.35813 1.8839,1.93509 3.8964,6.37495 3.8964,11.50813 v 58.66132 c 0,28.84892 -21.8776,51.7242 -49.4209,51.7242 H 69.4932 c -27.54239,0 -49.42089,-22.87528 -49.42089,-51.7242 V 72.73609 c 0,-0.90162 0.0193,-1.79645 0.0619,-2.6858 1.30928,-27.57002 22.67685,-49.0386 49.35799,-49.0386 z" fill="#0000ff" id="path957" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 539.5917,36.40978 -0.068,135.74053 c 0,17.73633 5.7753,32.12681 17.3285,43.16739 11.7332,11.22111 26.2205,18.88542 44.6327,18.88542 1.6257,0 4.7893,-0.14503 4.7893,-0.14503 v -30.53858 c -1.4629,0.1785 -2.9571,-0.0101 -4.5172,-0.0101 -9.3867,0 -16.3858,-3.57688 -22.162,-9.36867 -5.7765,-5.79149 -8.6669,-13.38947 -8.6617,-22.80124 l 0.068,-134.92917 z" fill="#0000ff" id="path965" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 48.89544,88.53966 c 0,-15.02233 5.05444,-27.69172 15.1637,-38.00816 10.10849,-10.31644 22.56459,-15.47466 37.36638,-15.47466 6.85957,0 12.81609,0.99594 17.8713,2.98631 5.23501,1.6288 9.65764,3.80061 13.268,6.51552 3.24931,1.99088 6.40833,4.52476 9.47717,7.60143 l 5.957,5.70143 c 1.26361,-1.62891 2.34665,-2.89595 3.24921,-3.80092 1.08314,-1.086 2.07599,-1.99087 2.97855,-2.71481 1.62466,-1.6289 5.77653,-4.70578 12.45611,-9.23064 6.67909,-4.70548 15.8856,-7.05832 27.61884,-7.05832 14.44084,0 26.89694,5.15812 37.36638,15.47466 10.4704,10.31644 15.70464,22.98583 15.70464,38.00816 V 234.05708 H 212.17203 V 90.71005 c 0,-6.3347 -2.52722,-11.94525 -7.58166,-16.83268 -4.87396,-4.88662 -10.6504,-7.32972 -17.32939,-7.32972 -6.49862,0 -11.9142,2.26207 -16.24655,6.78662 -4.33235,4.34371 -6.49852,10.13551 -6.49852,17.37527 V 234.05657 H 129.58617 V 90.70954 c 0,-5.97283 -2.16617,-11.49291 -6.49862,-16.56087 -4.33235,-5.06765 -9.47707,-7.60143 -15.43369,-7.60143 -5.95661,0 -11.46325,2.53378 -16.5175,7.60143 -4.69339,5.06735 -7.04013,10.58825 -7.04013,16.56087 V 234.05657 H 56.2045 c -4.86419,0 -7.30897,-2.56065 -7.30897,-7.68216 z" fill="#0000ff" id="path971" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 325.92573,233.97594 c -14.76501,0.48682 -35.97484,-4.07232 -49.33284,-17.10347 -13.35799,-13.21198 -20.03699,-29.59131 -20.03699,-49.13799 0,-19.90874 6.85957,-36.74041 20.5789,-50.49499 13.71933,-13.75458 30.5074,-20.63288 50.36439,-20.63288 19.857,0 36.19355,6.87749 49.00963,20.63288 12.81706,13.75458 19.2251,31.67347 19.2251,53.75362 v 62.98384 h -31.68024 v -61.89764 c 0,-13.39352 -3.42988,-24.07203 -10.28944,-32.03452 -6.85967,-8.14463 -15.9756,-12.21705 -27.34789,-12.21705 -10.28945,0 -19.1351,3.80082 -26.536,11.40265 -7.40118,7.60153 -11.10134,16.55986 -11.10134,26.8763 0,11.04058 3.88112,20.36108 11.64325,27.96251 7.9427,7.60143 19.68959,9.79078 29.32391,9.40397 h 21.93269 v 30.53857 z" fill="#0000ff" id="path969" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 467.4988,98.58024 c -18.4123,0 -33.485,5.60873 -45.2182,16.82963 -11.5533,11.04059 -17.32847,25.43006 -17.32847,43.16639 v 75.47169 h 31.40927 v -74.65831 c 0,-9.41137 2.8852,-17.01117 8.6617,-22.80327 5.7765,-5.79179 13.3609,-8.68875 22.7475,-8.68875 9.0258,0 16.4265,2.98682 22.2036,8.95975 5.9571,5.97231 8.934,13.48176 8.934,22.53146 l -0.1529,1.81451 h 31.4092 l 0.1529,-2.62779 c 1.04,-17.88441 -5.8668,-32.39761 -17.6003,-43.43718 -11.7332,-11.04058 -26.806,-16.55884 -45.2182,-16.55884 z" fill="#0000ff" id="path967" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 656.9725,158.62088 c 0,-17.73633 5.7765,-32.1258 17.3294,-43.16537 11.7332,-11.22111 26.8069,-16.83166 45.2192,-16.83166 18.4122,0 33.4859,5.52009 45.2191,16.55986 11.7333,11.04058 17.6004,25.5193 17.6004,43.43717 v 67.58629 c -0.039,5.32475 -2.4795,7.8854 -7.4874,7.8854 h -23.9223 v -74.65729 c 0,-9.0493 -2.9785,-16.55986 -8.9355,-22.53248 -5.7766,-5.97262 -13.178,-8.95893 -22.2037,-8.95893 -9.3869,0 -16.9684,2.89564 -22.7446,8.68723 -5.7765,5.79179 -8.6648,13.39352 -8.6648,22.80428 v 74.65729 h -31.4092 z" fill="#0000ff" id="path959" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 616.136,92.69788 h 31.6802 l 10e-5,-15.49698 v -4.28763 c 0,-8.585 -6.4197,-15.49596 -14.3934,-15.49596 h -2.8932 c -7.9741,0 -14.3934,6.91137 -14.3934,15.49596 v 4.28763 z" color="#000000" color-rendering="auto" enable-background="accumulate" fill="#0000ff" fill-rule="evenodd" image-rendering="auto" shape-rendering="auto" solid-color="#000000" style="fill-opacity:1;stroke:none;stroke-width:0.999984" id="path961" class="logo"></path> <path d="m 616.136,100.71006 h 31.6802 V 234.00637 H 616.136 Z" color="#000000" color-rendering="auto" enable-background="accumulate" fill="#0000ff" fill-rule="evenodd" image-rendering="auto" shape-rendering="auto" solid-color="#000000" style="fill-opacity:1;stroke:none;stroke-width:0.999984" id="path963" class="logo"></path> </g> </svg> </a> <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> </div> <div class="navbar-collapse collapse" id="navbar-main"> <ul class="nav navbar-nav"> <li id="top-intro"><a href="/docs/basics/introduction.html">About Marlin</a></li> <li id="top-download"><a href="/meta/download/">Download</a></li> <li id="top-config"><a href="/docs/configuration/configuration.html">Configure</a></li> <li id="top-install"><a href="/docs/basics/install.html">Install</a></li> <li id="top-tools" class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-tools">Tools <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/tools/u8glib/converter.html">Bitmap Converter</a></li> <li><a href="/tools/rgb565/converter.html">RGB565 Converter</a></li> <li><a href="/tools/lin_advance/k-factor.html">Calibrate Linear Advance</a></li> <li><a href="/tools/input_shaping/freq-calibr.html">Calibrate Input Shaping</a></li> <li class="divider"> <li><a href="//github.com/MarlinFirmware/Marlin/issues">Bugtracker</a></li> <li><a href="/docs/basics/reporting_bugs.html">Reporting bugs</a></li> <li class="divider"> <li><a href="//github.com/MarlinFirmware/Marlin">Source Code Repository</a></li> </ul> </li> <li id="top-help" class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-documentation">Help <span class="caret"></span></a> <ul class="dropdown-menu"> <li class="dropdown-submenu configuration"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Configuration</a> <ul class="dropdown-menu"> <li><a href="/meta/configuration/">All documents</a></li> <li class="divider"> <li><a href="/docs/configuration/1.1/laser_spindle.html">Laser/Spindle Configuration (1.1.x)</a></li> <li><a href="/docs/configuration/2.0.9/laser_spindle.html">Laser/Spindle Configuration (2.0.9.x)</a></li> <li><a href="/docs/configuration/config-ini.html">Configuring with INI</a></li> <li><a href="/docs/configuration/configuration.html">Configuring Marlin</a></li> <li><a href="/docs/configuration/probes.html">Probe Configuration</a></li> </ul> </li> <li class="dropdown-submenu development"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Development</a> <ul class="dropdown-menu"> <li><a href="/meta/development/">All documents</a></li> <li class="divider"> <li><a href="/docs/development/boards.html">Boards</a></li> <li class="divider"> <li><a href="/docs/development/code_structure.html">Code Structure</a></li> <li><a href="/docs/development/coding_standards.html">Coding Standards</a></li> <li><a href="/docs/development/fastio.html">FastIO</a></li> <li><a href="/docs/development/hal.html">Hardware Abstraction Layer</a></li> <li class="divider"> <li><a href="/docs/development/contributing.html">Contributing to Marlin</a></li> <li class="divider"> <li><a href="/docs/development/feature_request.html">Feature requests</a></li> <li><a href="/docs/development/getting_started_pull_requests.html">Contributing Code with Pull Requests</a></li> <li><a href="/docs/development/git_scripts.html">Marlin Github Scripts</a></li> <li class="divider"> <li><a href="/docs/development/fonts.html">Adding new fonts</a></li> <li><a href="/docs/development/lcd_language.html">LCD Language System</a></li> </ul> </li> <li class="dropdown-submenu features"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Features</a> <ul class="dropdown-menu"> <li><a href="/meta/features/">All documents</a></li> <li class="divider"> <li><a href="/docs/features/auto_bed_leveling.html">Automatic Bed Leveling</a></li> <li><a href="/docs/features/unified_bed_leveling.html">Unified Bed Leveling</a></li> <li class="divider"> <li><a href="/docs/features/autostart.html">Autostart</a></li> <li class="divider"> <li><a href="/docs/features/eeprom.html">EEPROM</a></li> <li class="divider"> <li><a href="/docs/features/fwretract.html">Firmware Retract</a></li> <li><a href="/docs/features/input_shaping.html">Input Shaping</a></li> <li><a href="/docs/features/lin_advance.html">Linear Advance</a></li> <li><a href="/docs/features/model_predictive_control.html">Model Predictive Temperature Control</a></li> <li><a href="/docs/features/probe_temp_compensation.html">Probe Temperature Compensation</a></li> <li class="divider"> <li><a href="/docs/features/lcd_menu.html">LCD Menu Tree</a></li> </ul> </li> <li class="dropdown-submenu gcode"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">G-code</a> <ul class="dropdown-menu"> <li><a href="/meta/gcode/">All documents</a></li> <li class="divider"> <li><a href="/docs/gcode/G000-G001.html"><strong>G0-G1</strong>: Linear Move</a></li> <li><a href="/docs/gcode/G002-G003.html"><strong>G2-G3</strong>: Arc or Circle Move</a></li> <li><a href="/docs/gcode/G004.html"><strong>G4</strong>: Dwell</a></li> <li><a href="/docs/gcode/G005.html"><strong>G5</strong>: Bézier cubic spline</a></li> <li><a href="/docs/gcode/G006.html"><strong>G6</strong>: Direct Stepper Move</a></li> <li><a href="/docs/gcode/G010.html"><strong>G10</strong>: Retract</a></li> <li><a href="/docs/gcode/G011.html"><strong>G11</strong>: Recover</a></li> <li><a href="/docs/gcode/G012.html"><strong>G12</strong>: Clean the Nozzle</a></li> <li><a href="/docs/gcode/G017-G019.html"><strong>G17-G19</strong>: CNC Workspace Planes</a></li> <li><a href="/docs/gcode/G020.html"><strong>G20</strong>: Inch Units</a></li> <li><a href="/docs/gcode/G021.html"><strong>G21</strong>: Millimeter Units</a></li> <li><a href="/docs/gcode/G026.html"><strong>G26</strong>: Mesh Validation Pattern</a></li> <li><a href="/docs/gcode/G027.html"><strong>G27</strong>: Park toolhead</a></li> <li><a href="/docs/gcode/G028.html"><strong>G28</strong>: Auto Home</a></li> <li><a href="/docs/gcode/G029.html"><strong>G29</strong>: Bed Leveling</a></li> <li><a href="/docs/gcode/G029-abl-3point.html"><strong>G29</strong>: Bed Leveling (3-Point)</a></li> <li><a href="/docs/gcode/G029-abl-linear.html"><strong>G29</strong>: Bed Leveling (Linear)</a></li> <li><a href="/docs/gcode/G029-mbl.html"><strong>G29</strong>: Bed Leveling (Manual)</a></li> <li><a href="/docs/gcode/G029-abl-bilinear.html"><strong>G29</strong>: Bed Leveling (Bilinear)</a></li> <li><a href="/docs/gcode/G029-ubl.html"><strong>G29</strong>: Bed Leveling (Unified)</a></li> <li><a href="/docs/gcode/G030.html"><strong>G30</strong>: Single Z-Probe</a></li> <li><a href="/docs/gcode/G031.html"><strong>G31</strong>: Dock Sled</a></li> <li><a href="/docs/gcode/G032.html"><strong>G32</strong>: Undock Sled</a></li> <li><a href="/docs/gcode/G033.html"><strong>G33</strong>: Delta Auto Calibration</a></li> <li><a href="/docs/gcode/G034-zsaa.html"><strong>G34</strong>: Z Steppers Auto-Alignment</a></li> <li><a href="/docs/gcode/G034-mgc.html"><strong>G34</strong>: Mechanical Gantry Calibration</a></li> <li><a href="/docs/gcode/G035.html"><strong>G35</strong>: Tramming Assistant</a></li> <li><a href="/docs/gcode/G038.html"><strong>G38.2-G38.5</strong>: Probe target</a></li> <li><a href="/docs/gcode/G042.html"><strong>G42</strong>: Move to mesh coordinate</a></li> <li><a href="/docs/gcode/G053.html"><strong>G53</strong>: Move in Machine Coordinates</a></li> <li><a href="/docs/gcode/G054-G059.html"><strong>G54-G59.3</strong>: Workspace Coordinate System</a></li> <li><a href="/docs/gcode/G060.html"><strong>G60</strong>: Save Current Position</a></li> <li><a href="/docs/gcode/G061.html"><strong>G61</strong>: Return to Saved Position</a></li> <li><a href="/docs/gcode/G076.html"><strong>G76</strong>: Probe temperature calibration</a></li> <li><a href="/docs/gcode/G080.html"><strong>G80</strong>: Cancel Current Motion Mode</a></li> <li><a href="/docs/gcode/G090.html"><strong>G90</strong>: Absolute Positioning</a></li> <li><a href="/docs/gcode/G091.html"><strong>G91</strong>: Relative Positioning</a></li> <li><a href="/docs/gcode/G092.html"><strong>G92</strong>: Set Position</a></li> <li><a href="/docs/gcode/G425.html"><strong>G425</strong>: Backlash Calibration</a></li> <li><a href="/docs/gcode/M000-M001.html"><strong>M0-M1</strong>: Unconditional stop</a></li> <li><a href="/docs/gcode/M003.html"><strong>M3</strong>: Spindle CW / Laser On</a></li> <li><a href="/docs/gcode/M004.html"><strong>M4</strong>: Spindle CCW / Laser On</a></li> <li><a href="/docs/gcode/M005.html"><strong>M5</strong>: Spindle / Laser Off</a></li> <li><a href="/docs/gcode/M007-M009.html"><strong>M7-M9</strong>: Coolant Controls</a></li> <li><a href="/docs/gcode/M010-M011.html"><strong>M10-M11</strong>: Vacuum / Blower Control</a></li> <li><a href="/docs/gcode/M016.html"><strong>M16</strong>: Expected Printer Check</a></li> <li><a href="/docs/gcode/M017.html"><strong>M17</strong>: Enable Steppers</a></li> <li><a href="/docs/gcode/M018.html"><strong>M18, M84</strong>: Disable steppers</a></li> <li><a href="/docs/gcode/M020.html"><strong>M20</strong>: List SD Card</a></li> <li><a href="/docs/gcode/M021.html"><strong>M21</strong>: Init SD card</a></li> <li><a href="/docs/gcode/M022.html"><strong>M22</strong>: Release SD card</a></li> <li><a href="/docs/gcode/M023.html"><strong>M23</strong>: Select SD file</a></li> <li><a href="/docs/gcode/M024.html"><strong>M24</strong>: Start or Resume SD print</a></li> <li><a href="/docs/gcode/M025.html"><strong>M25</strong>: Pause SD print</a></li> <li><a href="/docs/gcode/M026.html"><strong>M26</strong>: Set SD position</a></li> <li><a href="/docs/gcode/M027.html"><strong>M27</strong>: Report SD print status</a></li> <li><a href="/docs/gcode/M028.html"><strong>M28</strong>: Start SD write</a></li> <li><a href="/docs/gcode/M029.html"><strong>M29</strong>: Stop SD write</a></li> <li><a href="/docs/gcode/M030.html"><strong>M30</strong>: Delete SD file</a></li> <li><a href="/docs/gcode/M031.html"><strong>M31</strong>: Print time</a></li> <li><a href="/docs/gcode/M032.html"><strong>M32</strong>: Select and Start</a></li> <li><a href="/docs/gcode/M033.html"><strong>M33</strong>: Get Long Path</a></li> <li><a href="/docs/gcode/M034.html"><strong>M34</strong>: SDCard Sorting</a></li> <li><a href="/docs/gcode/M042.html"><strong>M42</strong>: Set Pin State</a></li> <li><a href="/docs/gcode/M043.html"><strong>M43</strong>: Debug Pins</a></li> <li><a href="/docs/gcode/M043-T.html"><strong>M43 T</strong>: Toggle Pins</a></li> <li><a href="/docs/gcode/M048.html"><strong>M48</strong>: Probe Repeatability Test</a></li> <li><a href="/docs/gcode/M073.html"><strong>M73</strong>: Set Print Progress</a></li> <li><a href="/docs/gcode/M075.html"><strong>M75</strong>: Start Print Job Timer</a></li> <li><a href="/docs/gcode/M076.html"><strong>M76</strong>: Pause Print Job Timer</a></li> <li><a href="/docs/gcode/M077.html"><strong>M77</strong>: Stop Print Job Timer</a></li> <li><a href="/docs/gcode/M078.html"><strong>M78</strong>: Print Job Stats</a></li> <li><a href="/docs/gcode/M080.html"><strong>M80</strong>: Power On</a></li> <li><a href="/docs/gcode/M081.html"><strong>M81</strong>: Power Off</a></li> <li><a href="/docs/gcode/M082.html"><strong>M82</strong>: E Absolute</a></li> <li><a href="/docs/gcode/M083.html"><strong>M83</strong>: E Relative</a></li> <li><a href="/docs/gcode/M085.html"><strong>M85</strong>: Inactivity Shutdown</a></li> <li><a href="/docs/gcode/M086.html"><strong>M86</strong>: Hotend Idle Timeout</a></li> <li><a href="/docs/gcode/M087.html"><strong>M87</strong>: Disable Hotend Idle Timeout</a></li> <li><a href="/docs/gcode/M092.html"><strong>M92</strong>: Set Axis Steps-per-unit</a></li> <li><a href="/docs/gcode/M100.html"><strong>M100</strong>: Free Memory</a></li> <li><a href="/docs/gcode/M102.html"><strong>M102</strong>: Configure Bed Distance Sensor</a></li> <li><a href="/docs/gcode/M104.html"><strong>M104</strong>: Set Hotend Temperature</a></li> <li><a href="/docs/gcode/M105.html"><strong>M105</strong>: Report Temperatures</a></li> <li><a href="/docs/gcode/M106.html"><strong>M106</strong>: Set Fan Speed</a></li> <li><a href="/docs/gcode/M107.html"><strong>M107</strong>: Fan Off</a></li> <li><a href="/docs/gcode/M108.html"><strong>M108</strong>: Break and Continue</a></li> <li><a href="/docs/gcode/M109.html"><strong>M109</strong>: Wait for Hotend Temperature</a></li> <li><a href="/docs/gcode/M110.html"><strong>M110</strong>: Set Line Number</a></li> <li><a href="/docs/gcode/M111.html"><strong>M111</strong>: Debug Level</a></li> <li><a href="/docs/gcode/M112.html"><strong>M112</strong>: Full Shutdown</a></li> <li><a href="/docs/gcode/M113.html"><strong>M113</strong>: Host Keepalive</a></li> <li><a href="/docs/gcode/M114.html"><strong>M114</strong>: Get Current Position</a></li> <li><a href="/docs/gcode/M115.html"><strong>M115</strong>: Firmware Info</a></li> <li><a href="/docs/gcode/M117.html"><strong>M117</strong>: Set LCD Message</a></li> <li><a href="/docs/gcode/M118.html"><strong>M118</strong>: Serial print</a></li> <li><a href="/docs/gcode/M119.html"><strong>M119</strong>: Endstop States</a></li> <li><a href="/docs/gcode/M120.html"><strong>M120</strong>: Enable Endstops</a></li> <li><a href="/docs/gcode/M121.html"><strong>M121</strong>: Disable Endstops</a></li> <li><a href="/docs/gcode/M122.html"><strong>M122</strong>: TMC Debugging</a></li> <li><a href="/docs/gcode/M123.html"><strong>M123</strong>: Fan Tachometers</a></li> <li><a href="/docs/gcode/M125.html"><strong>M125</strong>: Park Head</a></li> <li><a href="/docs/gcode/M126.html"><strong>M126</strong>: Baricuda 1 Open</a></li> <li><a href="/docs/gcode/M127.html"><strong>M127</strong>: Baricuda 1 Close</a></li> <li><a href="/docs/gcode/M128.html"><strong>M128</strong>: Baricuda 2 Open</a></li> <li><a href="/docs/gcode/M129.html"><strong>M129</strong>: Baricuda 2 Close</a></li> <li><a href="/docs/gcode/M140.html"><strong>M140</strong>: Set Bed Temperature</a></li> <li><a href="/docs/gcode/M141.html"><strong>M141</strong>: Set Chamber Temperature</a></li> <li><a href="/docs/gcode/M143.html"><strong>M143</strong>: Set Laser Cooler Temperature</a></li> <li><a href="/docs/gcode/M145.html"><strong>M145</strong>: Set Material Preset</a></li> <li><a href="/docs/gcode/M149.html"><strong>M149</strong>: Set Temperature Units</a></li> <li><a href="/docs/gcode/M150.html"><strong>M150</strong>: Set RGB(W) Color</a></li> <li><a href="/docs/gcode/M154.html"><strong>M154</strong>: Position Auto-Report</a></li> <li><a href="/docs/gcode/M155.html"><strong>M155</strong>: Temperature Auto-Report</a></li> <li><a href="/docs/gcode/M163.html"><strong>M163</strong>: Set Mix Factor</a></li> <li><a href="/docs/gcode/M164.html"><strong>M164</strong>: Save Mix</a></li> <li><a href="/docs/gcode/M165.html"><strong>M165</strong>: Set Mix</a></li> <li><a href="/docs/gcode/M166.html"><strong>M166</strong>: Gradient Mix</a></li> <li><a href="/docs/gcode/M190.html"><strong>M190</strong>: Wait for Bed Temperature</a></li> <li><a href="/docs/gcode/M191.html"><strong>M191</strong>: Wait for Chamber Temperature</a></li> <li><a href="/docs/gcode/M192.html"><strong>M192</strong>: Wait for Probe temperature</a></li> <li><a href="/docs/gcode/M193.html"><strong>M193</strong>: Set Laser Cooler Temperature</a></li> <li><a href="/docs/gcode/M200.html"><strong>M200</strong>: Set Filament Diameter</a></li> <li><a href="/docs/gcode/M201.html"><strong>M201</strong>: Print / Travel Move Limits</a></li> <li><a href="/docs/gcode/M203.html"><strong>M203</strong>: Set Max Feedrate</a></li> <li><a href="/docs/gcode/M204.html"><strong>M204</strong>: Set Starting Acceleration</a></li> <li><a href="/docs/gcode/M205.html"><strong>M205</strong>: Set Advanced Settings</a></li> <li><a href="/docs/gcode/M206.html"><strong>M206</strong>: Set Home Offsets</a></li> <li><a href="/docs/gcode/M207.html"><strong>M207</strong>: Set Firmware Retraction</a></li> <li><a href="/docs/gcode/M208.html"><strong>M208</strong>: Firmware Recover</a></li> <li><a href="/docs/gcode/M209.html"><strong>M209</strong>: Set Auto Retract</a></li> <li><a href="/docs/gcode/M211.html"><strong>M211</strong>: Software Endstops</a></li> <li><a href="/docs/gcode/M217.html"><strong>M217</strong>: Filament swap parameters</a></li> <li><a href="/docs/gcode/M218.html"><strong>M218</strong>: Set Hotend Offset</a></li> <li><a href="/docs/gcode/M220.html"><strong>M220</strong>: Set Feedrate Percentage</a></li> <li><a href="/docs/gcode/M221.html"><strong>M221</strong>: Set Flow Percentage</a></li> <li><a href="/docs/gcode/M226.html"><strong>M226</strong>: Wait for Pin State</a></li> <li><a href="/docs/gcode/M240.html"><strong>M240</strong>: Trigger Camera</a></li> <li><a href="/docs/gcode/M250.html"><strong>M250</strong>: LCD Contrast</a></li> <li><a href="/docs/gcode/M255.html"><strong>M255</strong>: LCD Sleep/Backlight Timeout</a></li> <li><a href="/docs/gcode/M256.html"><strong>M256</strong>: LCD Brightness</a></li> <li><a href="/docs/gcode/M260.html"><strong>M260</strong>: I2C Send</a></li> <li><a href="/docs/gcode/M261.html"><strong>M261</strong>: I2C Request</a></li> <li><a href="/docs/gcode/M280.html"><strong>M280</strong>: Servo Position</a></li> <li><a href="/docs/gcode/M281.html"><strong>M281</strong>: Edit Servo Angles</a></li> <li><a href="/docs/gcode/M282.html"><strong>M282</strong>: Detach Servo</a></li> <li><a href="/docs/gcode/M290.html"><strong>M290</strong>: Babystep</a></li> <li><a href="/docs/gcode/M300.html"><strong>M300</strong>: Play Tone</a></li> <li><a href="/docs/gcode/M301.html"><strong>M301</strong>: Set Hotend PID</a></li> <li><a href="/docs/gcode/M302.html"><strong>M302</strong>: Cold Extrude</a></li> <li><a href="/docs/gcode/M303.html"><strong>M303</strong>: PID autotune</a></li> <li><a href="/docs/gcode/M304.html"><strong>M304</strong>: Set Bed PID</a></li> <li><a href="/docs/gcode/M305.html"><strong>M305</strong>: User Thermistor Parameters</a></li> <li><a href="/docs/gcode/M306.html"><strong>M306</strong>: Model Predictive Temp. Control</a></li> <li><a href="/docs/gcode/M350.html"><strong>M350</strong>: Set micro-stepping</a></li> <li><a href="/docs/gcode/M351.html"><strong>M351</strong>: Set Microstep Pins</a></li> <li><a href="/docs/gcode/M355.html"><strong>M355</strong>: Case Light Control</a></li> <li><a href="/docs/gcode/M360.html"><strong>M360</strong>: SCARA Theta A</a></li> <li><a href="/docs/gcode/M361.html"><strong>M361</strong>: SCARA Theta-B</a></li> <li><a href="/docs/gcode/M362.html"><strong>M362</strong>: SCARA Psi-A</a></li> <li><a href="/docs/gcode/M363.html"><strong>M363</strong>: SCARA Psi-B</a></li> <li><a href="/docs/gcode/M364.html"><strong>M364</strong>: SCARA Psi-C</a></li> <li><a href="/docs/gcode/M380.html"><strong>M380</strong>: Activate Solenoid</a></li> <li><a href="/docs/gcode/M381.html"><strong>M381</strong>: Deactivate Solenoids</a></li> <li><a href="/docs/gcode/M400.html"><strong>M400</strong>: Finish Moves</a></li> <li><a href="/docs/gcode/M401.html"><strong>M401</strong>: Deploy Probe</a></li> <li><a href="/docs/gcode/M402.html"><strong>M402</strong>: Stow Probe</a></li> <li><a href="/docs/gcode/M403.html"><strong>M403</strong>: MMU2 Filament Type</a></li> <li><a href="/docs/gcode/M404.html"><strong>M404</strong>: Set Filament Diameter</a></li> <li><a href="/docs/gcode/M405.html"><strong>M405</strong>: Filament Width Sensor On</a></li> <li><a href="/docs/gcode/M406.html"><strong>M406</strong>: Filament Width Sensor Off</a></li> <li><a href="/docs/gcode/M407.html"><strong>M407</strong>: Filament Width</a></li> <li><a href="/docs/gcode/M410.html"><strong>M410</strong>: Quickstop</a></li> <li><a href="/docs/gcode/M412.html"><strong>M412</strong>: Filament Runout</a></li> <li><a href="/docs/gcode/M413.html"><strong>M413</strong>: Power-loss Recovery</a></li> <li><a href="/docs/gcode/M420.html"><strong>M420</strong>: Bed Leveling State</a></li> <li><a href="/docs/gcode/M421.html"><strong>M421</strong>: Set Mesh Value</a></li> <li><a href="/docs/gcode/M422.html"><strong>M422</strong>: Set Z Motor XY</a></li> <li><a href="/docs/gcode/M423.html"><strong>M423</strong>: X Twist Compensation</a></li> <li><a href="/docs/gcode/M425.html"><strong>M425</strong>: Backlash compensation</a></li> <li><a href="/docs/gcode/M428.html"><strong>M428</strong>: Home Offsets Here</a></li> <li><a href="/docs/gcode/M430.html"><strong>M430</strong>: Power Monitor</a></li> <li><a href="/docs/gcode/M486.html"><strong>M486</strong>: Cancel Objects</a></li> <li><a href="/docs/gcode/M493.html"><strong>M493</strong>: Fixed-Time Motion</a></li> <li><a href="/docs/gcode/M500.html"><strong>M500</strong>: Save Settings</a></li> <li><a href="/docs/gcode/M501.html"><strong>M501</strong>: Restore Settings</a></li> <li><a href="/docs/gcode/M502.html"><strong>M502</strong>: Factory Reset</a></li> <li><a href="/docs/gcode/M503.html"><strong>M503</strong>: Report Settings</a></li> <li><a href="/docs/gcode/M504.html"><strong>M504</strong>: Validate EEPROM contents</a></li> <li><a href="/docs/gcode/M510.html"><strong>M510</strong>: Lock Machine</a></li> <li><a href="/docs/gcode/M511.html"><strong>M511</strong>: Unlock Machine</a></li> <li><a href="/docs/gcode/M512.html"><strong>M512</strong>: Set Passcode</a></li> <li><a href="/docs/gcode/M524.html"><strong>M524</strong>: Abort SD print</a></li> <li><a href="/docs/gcode/M540.html"><strong>M540</strong>: Endstops Abort SD</a></li> <li><a href="/docs/gcode/M569.html"><strong>M569</strong>: Set TMC stepping mode</a></li> <li><a href="/docs/gcode/M575.html"><strong>M575</strong>: Serial baud rate</a></li> <li><a href="/docs/gcode/M592.html"><strong>M592</strong>: Nonlinear Extrusion Control</a></li> <li><a href="/docs/gcode/M593.html"><strong>M593</strong>: ZV Input Shaping</a></li> <li><a href="/docs/gcode/M600.html"><strong>M600</strong>: Filament Change</a></li> <li><a href="/docs/gcode/M603.html"><strong>M603</strong>: Configure Filament Change</a></li> <li><a href="/docs/gcode/M605.html"><strong>M605</strong>: Multi Nozzle Mode</a></li> <li><a href="/docs/gcode/M665.html"><strong>M665</strong>: Delta Configuration</a></li> <li><a href="/docs/gcode/M665-scara.html"><strong>M665</strong>: SCARA Configuration</a></li> <li><a href="/docs/gcode/M666.html"><strong>M666</strong>: Set Delta endstop adjustments</a></li> <li><a href="/docs/gcode/M666-dual.html"><strong>M666</strong>: Set dual endstop offsets</a></li> <li><a href="/docs/gcode/M672.html"><strong>M672</strong>: Duet Smart Effector sensitivity</a></li> <li><a href="/docs/gcode/M701.html"><strong>M701</strong>: Load filament</a></li> <li><a href="/docs/gcode/M702.html"><strong>M702</strong>: Unload filament</a></li> <li><a href="/docs/gcode/M710.html"><strong>M710</strong>: Controller Fan settings</a></li> <li><a href="/docs/gcode/M808.html"><strong>M808</strong>: Repeat Marker</a></li> <li><a href="/docs/gcode/M810-M819.html"><strong>M810-M819</strong>: G-code macros</a></li> <li><a href="/docs/gcode/M851.html"><strong>M851</strong>: XYZ Probe Offset</a></li> <li><a href="/docs/gcode/M852.html"><strong>M852</strong>: Bed Skew Compensation</a></li> <li><a href="/docs/gcode/M860-M869.html"><strong>M860-M869</strong>: I2C Position Encoders</a></li> <li><a href="/docs/gcode/M871.html"><strong>M871</strong>: Probe temperature config</a></li> <li><a href="/docs/gcode/M876.html"><strong>M876</strong>: Handle Prompt Response</a></li> <li><a href="/docs/gcode/M900.html"><strong>M900</strong>: Linear Advance Factor</a></li> <li><a href="/docs/gcode/M906.html"><strong>M906</strong>: Stepper Motor Current</a></li> <li><a href="/docs/gcode/M907.html"><strong>M907</strong>: Set Motor Current</a></li> <li><a href="/docs/gcode/M908.html"><strong>M908</strong>: Set Trimpot Pins</a></li> <li><a href="/docs/gcode/M909.html"><strong>M909</strong>: DAC Print Values</a></li> <li><a href="/docs/gcode/M910.html"><strong>M910</strong>: Commit DAC to EEPROM</a></li> <li><a href="/docs/gcode/M911.html"><strong>M911</strong>: TMC OT Pre-Warn Condition</a></li> <li><a href="/docs/gcode/M912.html"><strong>M912</strong>: Clear TMC OT Pre-Warn</a></li> <li><a href="/docs/gcode/M913.html"><strong>M913</strong>: Set Hybrid Threshold Speed</a></li> <li><a href="/docs/gcode/M914.html"><strong>M914</strong>: TMC Bump Sensitivity</a></li> <li><a href="/docs/gcode/M915.html"><strong>M915</strong>: TMC Z axis calibration</a></li> <li><a href="/docs/gcode/M916.html"><strong>M916</strong>: L6474 Thermal Warning Test</a></li> <li><a href="/docs/gcode/M917.html"><strong>M917</strong>: L6474 Overcurrent Warning Test</a></li> <li><a href="/docs/gcode/M918.html"><strong>M918</strong>: L6474 Speed Warning Test</a></li> <li><a href="/docs/gcode/M919.html"><strong>M919</strong>: TMC Chopper Timing</a></li> <li><a href="/docs/gcode/M928.html"><strong>M928</strong>: Start SD Logging</a></li> <li><a href="/docs/gcode/M951.html"><strong>M951</strong>: Magnetic Parking Extruder</a></li> <li><a href="/docs/gcode/M993.html"><strong>M993-M994</strong>: SD / SPI Flash</a></li> <li><a href="/docs/gcode/M995.html"><strong>M995</strong>: Touch Screen Calibration</a></li> <li><a href="/docs/gcode/M997.html"><strong>M997</strong>: Firmware update</a></li> <li><a href="/docs/gcode/M999.html"><strong>M999</strong>: STOP Restart</a></li> <li><a href="/docs/gcode/M7219.html"><strong>M7219</strong>: MAX7219 Control</a></li> <li><a href="/docs/gcode/T.html"><strong>T0-T7</strong>: Select or Report Tool</a></li> <li><a href="/docs/gcode/T-mmu2.html"><strong>T?-Tx</strong>: MMU2 Special Commands</a></li> </ul> </li> <li class="dropdown-submenu hardware"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Hardware</a> <ul class="dropdown-menu"> <li><a href="/meta/hardware/">All documents</a></li> <li class="divider"> <li><a href="/docs/hardware/boards.html">Boards</a></li> <li><a href="/docs/hardware/controllers.html">Controllers and displays</a></li> <li class="divider"> <li><a href="/docs/hardware/endstops.html">Endstops</a></li> <li><a href="/docs/hardware/tmc_drivers.html">Trinamic drivers</a></li> </ul> </li> <li class="dropdown-submenu setting"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Settings</a> <ul class="dropdown-menu"> <li><a href="/meta/setting/">All documents</a></li> <li class="divider"> <li><a href="/docs/setting/config_info.html">Configuration Info</a></li> <li><a href="/docs/setting/extruder.html">Extruders</a></li> <li><a href="/docs/setting/hardware.html">Hardware</a></li> <li><a href="/docs/setting/machine_info.html">Machine Info</a></li> <li><a href="/docs/setting/stepper_drivers.html">Stepper Drivers</a></li> <li><a href="/docs/setting/temperature.html">Temperature</a></li> </ul> </li> <li><a href="/docs/basics/troubleshooting.html">Troubleshooting</a></li> <li class="divider"> <li><a href="/meta/in-review/">Documentation Needing Review</a></li> </ul> </li> <li id="top-donate"><a href="/docs/development/contributing.html#donate">❤️ Donate</a></li> <li id="searchbox"> <form action="/meta/search/"> <input type="search" name="q" placeholder="Search"> </form> </li> </ul> <ul class="nav navbar-right hidden-sm"> <li> <a href="https://github.com/MarlinFirmware/MarlinDocumentation/edit/master/_configuration/2.0.9/laser_spindle.md" data-proofer-ignore><i class="fa fa-pen-to-square" aria-hidden="true"></i> <span>Edit Page</span></a> </li> </ul> </div> </div> </nav> <div class="custom-btn"> <div class="row hidden-md hidden-lg hidden-xl"> <a class="btn btn-edit e-btn btn-block btn-lg" href="https://github.com/MarlinFirmware/MarlinDocumentation/edit/master/_configuration/2.0.9/laser_spindle.md" data-proofer-ignore role="button"><span class="e-btn-text"><em class="fa fa-pen-to-square" aria-hidden="true"></em>  Edit Page</span></a> </div> <div class="row"> <a class="btn btn-learn e-btn btn-block btn-lg" href="/docs/basics/introduction.html" role="button"> <span class="e-btn-text"><em class="fa fa-book" aria-hidden="true"></em>  Learn more</span></a> </div> <div class="row"> <a class="btn btn-contribute e-btn btn-block btn-lg" href="/docs/development/contributing.html" role="button"> <span class="e-btn-text"><em class="fa fa-users" aria-hidden="true"></em>  Contribute</span></a> </div> <div class="row"> <a class="btn btn-download e-btn btn-block btn-lg" href="/meta/download/" role="button"> <span class="e-btn-text"><em class="fa fa-download" aria-hidden="true"></em>  Download</span></a> </div> <div class="row"> <a class="btn btn-follow e-btn btn-block btn-lg" href="//fosstodon.org/@marlinfirmware" role="button"> <span class="e-btn-text"><em class="fa-brands fa-mastodon" aria-hidden="true"></em>  Follow @MarlinFirmware</span></a> </div> <div class="row"> <a class="btn btn-follow e-btn btn-block btn-lg" href="//twitter.com/marlinfirmware" role="button"> <span class="e-btn-text"><em class="fa-brands fa-x" aria-hidden="true"></em>  Follow @MarlinFirmware</span></a> </div> </div> <div class="container" role="main"> <div class="row"> <div class="col-lg-3 col-md-4 visible-lg-block visible-md-block custom-no-padding"> <div class="custom-fixed-sidebar"> <div id="toc"></div> </div> </div> <div class="col-lg-9 col-md-8"> <div class="row"> <div class="col-md-12 custom-article"> <p id="authors" class="text-right pull-right visible-lg-block hidden-print small custom-pt25"> <a href="//github.com/descipher" data-toggle="tooltip" data-placement="bottom" title="Visit descipher's profile on Github"><img class="avatar avatar-small" alt="descipher" width="30" height="30" data-proofer-ignore="true" src="https://avatars0.githubusercontent.com/descipher?v=3&amp;s=30" srcset="https://avatars0.githubusercontent.com/descipher?v=3&amp;s=30 1x, https://avatars0.githubusercontent.com/descipher?v=3&amp;s=60 2x, https://avatars0.githubusercontent.com/descipher?v=3&amp;s=90 3x, https://avatars0.githubusercontent.com/descipher?v=3&amp;s=120 4x"></a> </p> <h1 class="custom-article-header">Laser/Spindle Configuration (2.0.9.x)</h1> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>This document is based on Marlin 2.0.9.x</p> </div> </div> </div> <hr> <p>Laser features and other related options are enabled when <code class="language-plaintext highlighter-rouge">LASER_FEATURE</code> is defined in <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code>.</p> <p>If your spindle / laser accepts PWM signals for variable power levels enable the <code class="language-plaintext highlighter-rouge">SPINDLE_LASER_USE_PWM</code> option and define a <code class="language-plaintext highlighter-rouge">SPINDLE_LASER_PWM_PIN</code>. A hardware-enabled PWM pin will provide the best results. Otherwise the cutter will simply be turned on full for any non-zero value and off for zero.</p> <h3 id="power-modes">Power Modes</h3> <p>The default operating state for <code class="language-plaintext highlighter-rouge">LASER_FEATURE</code> is <strong>Standard Mode</strong>. In Standard Mode the <code class="language-plaintext highlighter-rouge">M3</code>/<code class="language-plaintext highlighter-rouge">M4</code>/<code class="language-plaintext highlighter-rouge">M5</code> commands wait synchronize the planner (causing a momentary stop) before changing the power. This mode is good enough for a spindle and is provided for backward compatibility. Standard Mode can be used in combination with <code class="language-plaintext highlighter-rouge">LASER_SYNCHRONOUS_M106_M107</code> (described below), and can be used to cut or to provide Spindle Feature operations when it is active.</p> <p>There are two inline modes, selected using <code class="language-plaintext highlighter-rouge">M3</code>/<code class="language-plaintext highlighter-rouge">M4</code> with the <code class="language-plaintext highlighter-rouge">I</code> parameter. <code class="language-plaintext highlighter-rouge">M3 I</code> enables <strong>Continuous Inline Mode</strong> and <code class="language-plaintext highlighter-rouge">M4 I</code> selects <strong>Dynamic Inline Mode</strong>. These modes remain set <code class="language-plaintext highlighter-rouge">M5 I</code> returns to Standard Mode. In these modes, power set with the <code class="language-plaintext highlighter-rouge">S</code> parameter doesn’t take effect right away, but applies on the next <code class="language-plaintext highlighter-rouge">G1</code>/<code class="language-plaintext highlighter-rouge">G2</code>/<code class="language-plaintext highlighter-rouge">G3</code>/<code class="language-plaintext highlighter-rouge">G5</code> move.</p> <h3 id="dynamic-inline-mode">Dynamic Inline Mode</h3> <p>Since Dynamic Inline Mode is new to Marlin (Oct 2021) it should still be considered under development and experimental. Dynamic Inline Mode scales laser power to the stepper feedrate so that a consistent amount of laser energy is applied to the workpiece throughout moves, even as they accelerate and decelerate. (It is similar to GRBL 1.1f in <code class="language-plaintext highlighter-rouge">M4</code> dynamic mode.) Stay tuned.</p> <h3 id="inline-mode">Inline Mode</h3> <p>Since Marlin 2.0.9.x you’ll get the best results using <strong>Inline Mode</strong> power control. Inline Mode applies power to a selected laser output pin defined by <code class="language-plaintext highlighter-rouge">SPINDLE_LASER_PWM_PIN</code>. This pin should be a hardware-enabled PWM output for optimal performance. If PWM hardware is available it is activated by defining <code class="language-plaintext highlighter-rouge">SPINDLE_LASER_USE_PWM</code>, providing a range of power levels. Without a PWM pin the cutter is simply turned on full for any non-zero value and off for zero. Power values are set when movement G-codes <code class="language-plaintext highlighter-rouge">G1</code>/<code class="language-plaintext highlighter-rouge">G2</code>/<code class="language-plaintext highlighter-rouge">G3</code>/<code class="language-plaintext highlighter-rouge">G5</code> are processed with an S-Value parameter such as <code class="language-plaintext highlighter-rouge">G1 X10 Y10 S100</code>. The inline power value is stored in the planner blocks so that laser power can be perfectly synchronized with every move.</p> <h3 id="motion-mode">Motion Mode</h3> <p>The <code class="language-plaintext highlighter-rouge">GCODE_MOTION_MODES</code> option must be enabled for full compatibility with G-code generated by LaserGRBL and other laser / CNC software. This feature allows Marlin to process shorthand G-code moves that don’t start with a <code class="language-plaintext highlighter-rouge">G#</code> command.</p> <h3 id="non-inline-moves">Non-Inline Moves</h3> <p>While inline mode is active the <code class="language-plaintext highlighter-rouge">M3</code>/<code class="language-plaintext highlighter-rouge">M4</code>/<code class="language-plaintext highlighter-rouge">M5</code> G-codes are still processed and will wait for planner synchronization; they are then queued for the next move unless <code class="language-plaintext highlighter-rouge">LASER_POWER_SYNC</code> is enabled. The <code class="language-plaintext highlighter-rouge">LASER_POWER_SYNC</code> option allows any <code class="language-plaintext highlighter-rouge">M3</code>/<code class="language-plaintext highlighter-rouge">M4</code> G-code <code class="language-plaintext highlighter-rouge">S</code>-values to be enqueued, synced, and processed by the stepper ISR without pausing. Thus if no move is in progress the power is applied immediately.</p> <h3 id="trapizoid-power">Trapizoid Power</h3> <p>While inline mode is active the trapizoid feature <code class="language-plaintext highlighter-rouge">LASER_POWER_TRAP</code> can be enabled. The <code class="language-plaintext highlighter-rouge">LASER_POWER_TRAP</code> option allows the laser power to be compensate during acceleration or deceleration of a move. It helps to reduce laser burning hot spots. It is important to note that if this feature is enabled on CO2 based lasers it may require that the <code class="language-plaintext highlighter-rouge">SPEED_POWER_MIN</code> option value is set. CO2 Lasers typically do not activate at very low PWM values. This feature will use the <code class="language-plaintext highlighter-rouge">SPEED_POWER_MIN</code> to ensure the laser power will not be below the minimum power activation value. The value is determined by testing incremental power values until the CO2 Laser fires.</p> <h3 id="laser-on-fan-pin">Laser on Fan Pin</h3> <p>In addition to inline mode we support laser synchronous fan mode set by defining <code class="language-plaintext highlighter-rouge">LASER_SYNCHRONOUS_M106_M107</code>. Laser synchronous fan mode uses G-codes <code class="language-plaintext highlighter-rouge">M106</code>/<code class="language-plaintext highlighter-rouge">M107</code> to set laser power on a fan output pin. This feature sets the laser power using planner “sync” blocks, which allow power to be set in perfect sync with movement. This mode works well, however inline mode is faster when performing raster image-based laser burns.</p> <h3 id="pins">Pins</h3> <h4 id="fan-pin-example">Fan pin example</h4> <p>Define pin 5 as the second fan just add this line to <code class="language-plaintext highlighter-rouge">Configuration.h</code>:</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define FAN1_PIN 5 // 2nd fan output attached to laser TTL input
</span></code></pre></div></div> <p>Example of G-code using <code class="language-plaintext highlighter-rouge">M106 P1</code></p> <pre><code class="language-gcode">M106 P1 S0   ; Laser off (P1 = 2nd fan output)
M106 P1 S128 ; Laser at 50%
M106 P1 S255 ; Laser at 100%
</code></pre> <h4 id="inline-pin-example">Inline pin example</h4> <p>Define pin 6 as the PWM pin and pin 4 as the ENABLE pin <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code>.</p> <p>These are the defaults for any RAMPS board and are already defined in <code class="language-plaintext highlighter-rouge">pins_RAMPS.h</code>. Override the default values by defining the desired values in <code class="language-plaintext highlighter-rouge">Configuration_adv.h</code>.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SPINDLE_LASER_PWM_PIN 6 // Hardware PWM laser TTL input
#define SPINDLE_LASER_ENA_PIN 4 // CO2 PSU enable input
</span></code></pre></div></div> <h4 id="example-of-g-code-using-m3i">Example of G-code using <code class="language-plaintext highlighter-rouge">M3I</code>:</h4> <pre><code class="language-gcode">M3 I S20       ; Enter Continuous Inline Mode and preload the next move power with S20
G1 X10 Y10     ; Move to X10 Y10 with S20 power
G1 X20 S50     ; Move to X20 with S50 power
M5             ; Kill the power and remain in Continous Inline Mode (M5 or M5I always waits for last move to complete)
</code></pre> <p>It’s fairly easy to select a pin for <code class="language-plaintext highlighter-rouge">SPINDLE_LASER_ENA_PIN</code>. Any unused digital pin with a 0 to 3.3V-5V logic level is sufficient.</p> <p>It is <em>highly recommended</em> to connect an external 1k-10k pullup resistor to the <code class="language-plaintext highlighter-rouge">SPINDLE_LASER_ENA_PIN</code>. This prevents the spindle/laser from powering on briefly during power-up or when the controller is reset (which happens whenever you connect or disconnect from most controllers).</p> <p>Picking the PWM pin can be tricky. There are only 15 hardware PWM pins on an ATmega2560. Some are used by the system interrupts so are unavailable. Others are usually hardwired in the controller to functions you can’t do without. Fans, servos, and some specialized functions all want to have a PWM pin. Usually you’ll end up picking a function you can do without, commenting that function out (or not enabling it) and assigning its pin number to the speed pin. <code class="language-plaintext highlighter-rouge">PINS_DEBUGGING</code> and <code class="language-plaintext highlighter-rouge">M43</code> can be helpful to locate the best candidates.</p> <p>For all CPUs the hardware PWMs on <code class="language-plaintext highlighter-rouge">TIMER1</code> are not available. Marlin uses <code class="language-plaintext highlighter-rouge">TIMER1</code> to generate interrupts and sets it up in such a way that the none of its PWMs can be used.</p> <p>Servos also make hardware PWM(s) unavailable. In this case it’s only the “A” PWM that’s unavailable. The other hardware PWM(s) on that timer are available for general use.</p> <h4 id="atmega2560-pwm-assignments-and-clients">ATmega2560 PWM Assignments and Clients</h4> <p>Below is a table that can be used when selecting the speed pin on a 2560. (Other CPUs include a subset of the 2560 pins.)</p> <p>There are 16 PWM ports assigned to 15 physical pins.</p> <p>Pin 13 has two ports assigned to it. (<code class="language-plaintext highlighter-rouge">0A</code> and <code class="language-plaintext highlighter-rouge">1C</code>)</p> <table> <tbody> <tr> <td>Timer + Port</td> <td>Digital Pin</td> <td>Normal Assignment</td> <td>System Use</td> <td>Optional Clients</td> </tr> <tr> <td>TIMER3B</td> <td>2</td> <td>X_MAX</td> <td> </td> <td> </td> </tr> <tr> <td>TIMER3C</td> <td>3</td> <td>X_MIN</td> <td> </td> <td> </td> </tr> <tr> <td>TIMER0B</td> <td>4</td> <td>HEATER_4</td> <td> </td> <td> </td> </tr> <tr> <td>TIMER3A</td> <td>5</td> <td>HEATER_5</td> <td> </td> <td>servo 0-11 ISR</td> </tr> <tr> <td>TIMER4A</td> <td>6</td> <td>HEATER_6</td> <td> </td> <td>servo 12-23 ISR</td> </tr> <tr> <td>TIMER4B</td> <td>7</td> <td>LCD</td> <td> </td> <td> </td> </tr> <tr> <td>TIMER4C</td> <td>8</td> <td>HOTBED</td> <td> </td> <td> </td> </tr> <tr> <td>TIMER2B</td> <td>9</td> <td>HEATER_1</td> <td> </td> <td> </td> </tr> <tr> <td>TIMER2A</td> <td>10</td> <td>HEATER_0</td> <td> </td> <td> </td> </tr> <tr> <td>TIMER1A</td> <td>11</td> <td>HEATER_7</td> <td>*stepper ISR</td> <td> </td> </tr> <tr> <td>TIMER1B</td> <td>12</td> <td>PS_ON_PIN</td> <td>*stepper ISR</td> <td> </td> </tr> <tr> <td>TIMER0A</td> <td>13</td> <td>LED</td> <td>LED PWM</td> <td> </td> </tr> <tr> <td>TIMER1C</td> <td>13</td> <td> </td> <td>*stepper ISR</td> <td> </td> </tr> <tr> <td>TIMER5C</td> <td>44</td> <td>LCD</td> <td> </td> <td>stepper motor current XY PWM</td> </tr> <tr> <td>TIMER5B</td> <td>45</td> <td>LCD</td> <td> </td> <td>stepper motor current Z PWM</td> </tr> <tr> <td>TIMER5A</td> <td>46</td> <td>Z_STEP</td> <td> </td> <td>stepper motor current E PWM or servo 24-35 ISR</td> </tr> </tbody> </table> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* These hardware PWMs are not available. The pin can still be used for general purpose digital I/O.
</code></pre></div></div> <p>In addition to the above, fans can be assigned to PWM pins. If you pick a pin that’s already assigned to a fan then you’ll need to delete the fan or change its pin assignment. This is needed even if <code class="language-plaintext highlighter-rouge">FAN_FAST_PWM</code> is disabled.</p> <p><strong>NOTE</strong>: Most pins hardwired to a heater or fan are usually driven by a MOSFET with a pullup on its output through an LED to +12V/+24V. This will probably damage your spindle controller unless you add a protection circuit. If there isn’t a +12V/+24V pullup you’ll need an external 1k-10k pullup resistor to the pin.</p> <h4 id="at90usb646-647-1286--1287-pwm-assignments">AT90USB646, 647, 1286 &amp; 1287 PWM assignments</h4> <ul> <li>As with the atmega2560, the PWMs on Timer1 are not available.</li> <li>These chips have 10 PWMs assigned to 9 pins. <code class="language-plaintext highlighter-rouge">TIMER0A</code> and <code class="language-plaintext highlighter-rouge">TIMER1C</code> are tied to the same pin. Most Arduino IDE extensions only make <code class="language-plaintext highlighter-rouge">TIMER1C</code> available (Teensyduino included).</li> </ul> <h4 id="atmega644--1284-pwm-assignments">ATmega644 &amp; 1284 PWM assignments</h4> <ul> <li>As with the 2560, the PWMs on Timer1 are not available.</li> <li>All PWMs have their own pins.</li> </ul> <h3 id="other-features">Other features</h3> <p>Serveral useful features are currently available for Lasers with 12864 LCDs and even 2004 LCDs:</p> <p><img src="/assets/images/config/12864-All.jpg" alt="Features" width="300" height="150"></p> <h4 id="air-assist">Air Assist</h4> <p>Air Assist pump relay output, enables Menu item and G-code <code class="language-plaintext highlighter-rouge">M8/M9</code> control.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="cp">#define AIR_ASSIST                           // Air Assist control with G-codes M8-M9
</span>  <span class="cp">#if ENABLED(AIR_ASSIST)
</span>    <span class="cp">#define AIR_ASSIST_ACTIVE           LOW    // Active state on air assist pin
</span>    <span class="cp">#define AIR_ASSIST_PIN              44     // Override the default Air Assist pin
</span>  <span class="cp">#endif
</span></code></pre></div></div> <h4 id="air-evacuation">Air Evacuation</h4> <p>Air Evacuation motor relay output, enables Menu item and G-code <code class="language-plaintext highlighter-rouge">M10/M11</code> control.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="cp">#define AIR_EVACUATION                       // Cutter Vacuum / Laser Blower motor control with G-codes M10-M11
</span>  <span class="cp">#if ENABLED(AIR_EVACUATION)
</span>    <span class="cp">#define AIR_EVACUATION_ACTIVE       LOW    // Set to "HIGH" if the on/off function is active HIGH
</span>    <span class="cp">#define AIR_EVACUATION_PIN          42     // Override the default Cutter Vacuum or Laser Blower pin
</span>  <span class="cp">#endif
</span></code></pre></div></div> <h4 id="ammeter">Ammeter</h4> <p>Ammeter support, enables laser current monitoring on both 12864 &amp; 2004 LCDs. This is a low side configuration (Ground) current IC that can be used for both CO2 and Diode based lasers. It’s ideal with High Voltage CO2 laser tubes, it connects between chassis ground and the tube ground. The current can be calibrated by measuring the current with an multimeter then adjusting the <code class="language-plaintext highlighter-rouge">I2C_AMMETER_SHUNT_RESISTOR</code> slightly up or down to match the measured value.</p> <p><img src="/assets/images/config/INA226Board.jpg" alt="INA226 Board" width="320" height="160"> <img src="/assets/images/config/INA226.png" alt="INA226 Wiring" width="320" height="160"></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Laser I2C Ammeter (High precision INA226 low/high side module)</span>
<span class="cp">#define I2C_AMMETER
#if ENABLED(I2C_AMMETER)
</span>    <span class="cp">#define I2C_AMMETER_IMAX            0.1    // (Amps) Calibration value for the expected current range
</span>    <span class="cp">#define I2C_AMMETER_SHUNT_RESISTOR  0.1    // (Ohms) Calibration shunt resistor value
#endif
</span></code></pre></div></div> <h4 id="flow-meter">Flow Meter</h4> <p>CO2 Coolant flow meter support, enables laser coolant monitoring on both 12864 &amp; 2004 LCDs. Provides tube protection by detecting flow failures and controlling laser enable signals.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Laser Coolant Flow Meter</span>
<span class="cp">#define LASER_COOLANT_FLOW_METER
#if ENABLED(LASER_COOLANT_FLOW_METER)
</span>  <span class="cp">#define FLOWMETER_PIN         20  // Requires an external interrupt-enabled pin (e.g., RAMPS 2,3,18,19,20,21)
</span>  <span class="cp">#define FLOWMETER_PPL       5880  // (pulses/liter) Flow meter pulses-per-liter on the input pin
</span>  <span class="cp">#define FLOWMETER_INTERVAL  1000  // (ms) Flow rate calculation interval in milliseconds
</span>  <span class="cp">#define FLOWMETER_SAFETY          // Prevent running the laser without the minimum flow rate set below
</span>  <span class="cp">#if ENABLED(FLOWMETER_SAFETY)
</span>    <span class="cp">#define FLOWMETER_MIN_LITERS_PER_MINUTE 1.5 // (liters/min) Minimum flow required when enabled
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <h4 id="laser-cooler">Laser Cooler</h4> <p>Laser cooling control, provides chiller control with temperature monitoring and safety.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Laser Cooler options</span>
<span class="cp">#if TEMP_SENSOR_COOLER
</span>  <span class="cp">#define COOLER_MINTEMP           8  // (°C)
</span>  <span class="cp">#define COOLER_MAXTEMP          26  // (°C)
</span>  <span class="cp">#define COOLER_DEFAULT_TEMP     16  // (°C)
</span>  <span class="cp">#define TEMP_COOLER_HYSTERESIS   1  // (°C) Temperature proximity considered "close enough" to the target
</span>  <span class="cp">#define COOLER_PIN               8  // Laser cooler on/off pin used to control power to the cooling element (e.g., TEC, External chiller via relay)
</span>  <span class="cp">#define COOLER_INVERTING     false
</span>  <span class="cp">#define TEMP_COOLER_PIN         15  // Laser/Cooler temperature sensor pin. ADC is required.
</span>  <span class="cp">#define COOLER_FAN                  // Enable a fan on the cooler, Fan# 0,1,2,3 etc.
</span>  <span class="cp">#define COOLER_FAN_INDEX         0  // FAN number 0, 1, 2 etc. e.g.
</span>  <span class="cp">#if ENABLED(COOLER_FAN)
</span>    <span class="cp">#define COOLER_FAN_BASE      100  // Base Cooler fan PWM (0-255); turns on when Cooler temperature is above the target
</span>    <span class="cp">#define COOLER_FAN_FACTOR     25  // PWM increase per °C above target
</span>  <span class="cp">#endif
#endif
</span></code></pre></div></div> <h4 id="spindle-coolant">Spindle Coolant</h4> <p>Spindle based coolant control, enables M7/M8/M9 G-codes.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define COOLANT_CONTROL
#if ENABLED(COOLANT_CONTROL)
</span>  <span class="cp">#define COOLANT_MIST                // Enable if mist coolant is present (M7)
</span>  <span class="cp">#define COOLANT_FLOOD               // Enable if flood coolant is present (M8)
</span>  <span class="cp">#define COOLANT_MIST_INVERT  false  // Set "true" if the on/off function is reversed
</span>  <span class="cp">#define COOLANT_FLOOD_INVERT false  // Set "true" if the on/off function is reversed
#endif
</span></code></pre></div></div> </div> </div> </div> </div> </div> <footer> <div class="container shift-footer "> <div class="row"> <div class="col-8"> <p>Brought to you with <i class="fa fa-heart text-danger" aria-hidden="true"></i> lack of <i class="fa fa-bed" aria-hidden="true"></i> and lots of <i class="fa fa-coffee" aria-hidden="true"></i>. <br> The contents of this website are © 2024 under the terms of the <a href="//www.gnu.org/licenses/gpl-3.0.txt">GPLv3</a> License.</p> </div> <div class="col-4"> <div class="pull-right back-to-top"> <a href="#top" data-proofer-ignore> Back to top <i class="fa fa-level-up" aria-hidden="true"></i></a> </div> </div> </div> </div> </footer> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-76230130-1', {
          'cookieDomain': 'marlinfw.org',
          'siteSpeedSampleRate': 80
      });

      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script> </body> </html>