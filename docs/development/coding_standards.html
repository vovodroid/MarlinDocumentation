<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"/> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> <meta name="viewport" content="width=device-width, initial-scale=1"/> <meta name="flattr:id" content="e7nqg5"/> <title>Coding Standards | Marlin Firmware</title> <meta name="generator" content="Jekyll v3.9.0"/> <meta property="og:title" content="Coding Standards"/> <meta name="author" content="thinkyhead"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="Guidelines for Marlin code formatting, methodologies, and standards."/> <meta property="og:description" content="Guidelines for Marlin code formatting, methodologies, and standards."/> <link rel="canonical" href="https://marlinfw.org/docs/development/coding_standards.html"/> <meta property="og:url" content="https://marlinfw.org/docs/development/coding_standards.html"/> <meta property="og:site_name" content="Marlin Firmware"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2024-01-13T02:30:54-06:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Coding Standards"/> <meta name="twitter:site" content="@MarlinFirmware"/> <meta name="twitter:creator" content="@thinkyhead"/> <script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"thinkyhead"},"dateModified":"2024-01-13T02:30:54-06:00","datePublished":"2024-01-13T02:30:54-06:00","description":"Guidelines for Marlin code formatting, methodologies, and standards.","headline":"Coding Standards","mainEntityOfPage":{"@type":"WebPage","@id":"https://marlinfw.org/docs/development/coding_standards.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://marlinfw.org/assets/images/logo/marlin/small.png"},"name":"thinkyhead"},"url":"https://marlinfw.org/docs/development/coding_standards.html"}</script> <link rel="icon" href="/assets/favicon_m.ico"/> <link rel="stylesheet" href="/assets/stylesheets/main.css"/> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--> <script src="/assets/javascript/head.min.js"></script> <script type="text/javascript">

      /**
       * As Github pages do not support https for custom domains
       * this is the current best workaround for #18.
       */
      var domains  = [ 'marlinfw.org', 'localhost', '127.0.0.1' ];
      var pathname = location.pathname.replace(/^\/MarlinDocumentation/, '')
      if (domains.indexOf(window.location.hostname) == -1)
        window.top.location.href = 'https://marlinfw.org' + pathname;

      /**
       * Another ugly workaround trying to improve UX reported by #35
       */
      if (location.protocol != 'https:' && window.location.hostname == 'marlinfw.org')
        location.href = 'https:' + window.location.href.substring(window.location.protocol.length);

      /**
       * Improves overall speed by loading javascript and css resources in parallel
       * with the main page.
       */
      head.load(
          "/assets/stylesheets/fontawesome.min.css",
          "/assets/stylesheets/solid.min.css",
          "/assets/stylesheets/brands.min.css",

          "/assets/javascript/jquery-2.2.1.min.js",
          "/assets/javascript/jquery-ui.min.js",
          "/assets/javascript/bootstrap.min.js",
          "/assets/javascript/tocify.min.js",
          "/assets/javascript/search.js",
          "/assets/javascript/custom.js",

          "/assets/javascript/sheetrock.min.js",
          "/assets/javascript/cookieconsent.min.js"
      );

      head.ready(function() {
        window.cookieconsent_options = {
          "message":"We use cookies to ensure you get the best experience on our website",
          "dismiss": "Got it!", "learnMore": "More info", "link":"", "theme": "dark-bottom"
        };
      });
    </script> </head> <body role="document"> <nav class="navbar navbar-default navbar-fixed-top custom-no-margin"> <div class="container"> <div class="navbar-header"> <img id="daynite" src="/assets/images/btn-night.svg" alt="Dark Mode" width="32" height="32"> <a href="/" class="navbar-brand"> <svg id="mflogo" height="95%" version="1.1" viewbox="0 0 828.26325 270.80054"> <g id="g981"> <path d="M 69.48788,0 C 31.1751,0 0,32.61059 0,72.74045 V 198.055 c 0,40.12987 31.17607,72.74553 69.48788,72.74553 H 758.7735 c 38.3127,0 69.4898,-32.61566 69.4898,-72.74553 V 5.84382 c -0.019,-3.60102 -2,-5.68155 -6.9765,-5.84159 H 220.29327 Z m 0,21.01625 H 682.6259 c 8.157,0.43104 14.4593,1.90061 18.9474,6.50681 7.8555,8.06197 84.9293,82.07514 102.73,100.35813 1.8839,1.93509 3.8964,6.37495 3.8964,11.50813 v 58.66132 c 0,28.84892 -21.8776,51.7242 -49.4209,51.7242 H 69.4932 c -27.54239,0 -49.42089,-22.87528 -49.42089,-51.7242 V 72.73609 c 0,-0.90162 0.0193,-1.79645 0.0619,-2.6858 1.30928,-27.57002 22.67685,-49.0386 49.35799,-49.0386 z" fill="#0000ff" id="path957" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 539.5917,36.40978 -0.068,135.74053 c 0,17.73633 5.7753,32.12681 17.3285,43.16739 11.7332,11.22111 26.2205,18.88542 44.6327,18.88542 1.6257,0 4.7893,-0.14503 4.7893,-0.14503 v -30.53858 c -1.4629,0.1785 -2.9571,-0.0101 -4.5172,-0.0101 -9.3867,0 -16.3858,-3.57688 -22.162,-9.36867 -5.7765,-5.79149 -8.6669,-13.38947 -8.6617,-22.80124 l 0.068,-134.92917 z" fill="#0000ff" id="path965" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 48.89544,88.53966 c 0,-15.02233 5.05444,-27.69172 15.1637,-38.00816 10.10849,-10.31644 22.56459,-15.47466 37.36638,-15.47466 6.85957,0 12.81609,0.99594 17.8713,2.98631 5.23501,1.6288 9.65764,3.80061 13.268,6.51552 3.24931,1.99088 6.40833,4.52476 9.47717,7.60143 l 5.957,5.70143 c 1.26361,-1.62891 2.34665,-2.89595 3.24921,-3.80092 1.08314,-1.086 2.07599,-1.99087 2.97855,-2.71481 1.62466,-1.6289 5.77653,-4.70578 12.45611,-9.23064 6.67909,-4.70548 15.8856,-7.05832 27.61884,-7.05832 14.44084,0 26.89694,5.15812 37.36638,15.47466 10.4704,10.31644 15.70464,22.98583 15.70464,38.00816 V 234.05708 H 212.17203 V 90.71005 c 0,-6.3347 -2.52722,-11.94525 -7.58166,-16.83268 -4.87396,-4.88662 -10.6504,-7.32972 -17.32939,-7.32972 -6.49862,0 -11.9142,2.26207 -16.24655,6.78662 -4.33235,4.34371 -6.49852,10.13551 -6.49852,17.37527 V 234.05657 H 129.58617 V 90.70954 c 0,-5.97283 -2.16617,-11.49291 -6.49862,-16.56087 -4.33235,-5.06765 -9.47707,-7.60143 -15.43369,-7.60143 -5.95661,0 -11.46325,2.53378 -16.5175,7.60143 -4.69339,5.06735 -7.04013,10.58825 -7.04013,16.56087 V 234.05657 H 56.2045 c -4.86419,0 -7.30897,-2.56065 -7.30897,-7.68216 z" fill="#0000ff" id="path971" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 325.92573,233.97594 c -14.76501,0.48682 -35.97484,-4.07232 -49.33284,-17.10347 -13.35799,-13.21198 -20.03699,-29.59131 -20.03699,-49.13799 0,-19.90874 6.85957,-36.74041 20.5789,-50.49499 13.71933,-13.75458 30.5074,-20.63288 50.36439,-20.63288 19.857,0 36.19355,6.87749 49.00963,20.63288 12.81706,13.75458 19.2251,31.67347 19.2251,53.75362 v 62.98384 h -31.68024 v -61.89764 c 0,-13.39352 -3.42988,-24.07203 -10.28944,-32.03452 -6.85967,-8.14463 -15.9756,-12.21705 -27.34789,-12.21705 -10.28945,0 -19.1351,3.80082 -26.536,11.40265 -7.40118,7.60153 -11.10134,16.55986 -11.10134,26.8763 0,11.04058 3.88112,20.36108 11.64325,27.96251 7.9427,7.60143 19.68959,9.79078 29.32391,9.40397 h 21.93269 v 30.53857 z" fill="#0000ff" id="path969" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 467.4988,98.58024 c -18.4123,0 -33.485,5.60873 -45.2182,16.82963 -11.5533,11.04059 -17.32847,25.43006 -17.32847,43.16639 v 75.47169 h 31.40927 v -74.65831 c 0,-9.41137 2.8852,-17.01117 8.6617,-22.80327 5.7765,-5.79179 13.3609,-8.68875 22.7475,-8.68875 9.0258,0 16.4265,2.98682 22.2036,8.95975 5.9571,5.97231 8.934,13.48176 8.934,22.53146 l -0.1529,1.81451 h 31.4092 l 0.1529,-2.62779 c 1.04,-17.88441 -5.8668,-32.39761 -17.6003,-43.43718 -11.7332,-11.04058 -26.806,-16.55884 -45.2182,-16.55884 z" fill="#0000ff" id="path967" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 656.9725,158.62088 c 0,-17.73633 5.7765,-32.1258 17.3294,-43.16537 11.7332,-11.22111 26.8069,-16.83166 45.2192,-16.83166 18.4122,0 33.4859,5.52009 45.2191,16.55986 11.7333,11.04058 17.6004,25.5193 17.6004,43.43717 v 67.58629 c -0.039,5.32475 -2.4795,7.8854 -7.4874,7.8854 h -23.9223 v -74.65729 c 0,-9.0493 -2.9785,-16.55986 -8.9355,-22.53248 -5.7766,-5.97262 -13.178,-8.95893 -22.2037,-8.95893 -9.3869,0 -16.9684,2.89564 -22.7446,8.68723 -5.7765,5.79179 -8.6648,13.39352 -8.6648,22.80428 v 74.65729 h -31.4092 z" fill="#0000ff" id="path959" style="fill-opacity:1;stroke:none;stroke-width:0.999984" class="logo"></path> <path d="m 616.136,92.69788 h 31.6802 l 10e-5,-15.49698 v -4.28763 c 0,-8.585 -6.4197,-15.49596 -14.3934,-15.49596 h -2.8932 c -7.9741,0 -14.3934,6.91137 -14.3934,15.49596 v 4.28763 z" color="#000000" color-rendering="auto" enable-background="accumulate" fill="#0000ff" fill-rule="evenodd" image-rendering="auto" shape-rendering="auto" solid-color="#000000" style="fill-opacity:1;stroke:none;stroke-width:0.999984" id="path961" class="logo"></path> <path d="m 616.136,100.71006 h 31.6802 V 234.00637 H 616.136 Z" color="#000000" color-rendering="auto" enable-background="accumulate" fill="#0000ff" fill-rule="evenodd" image-rendering="auto" shape-rendering="auto" solid-color="#000000" style="fill-opacity:1;stroke:none;stroke-width:0.999984" id="path963" class="logo"></path> </g> </svg> </a> <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> </div> <div class="navbar-collapse collapse" id="navbar-main"> <ul class="nav navbar-nav"> <li id="top-intro"><a href="/docs/basics/introduction.html">About Marlin</a></li> <li id="top-download"><a href="/meta/download/">Download</a></li> <li id="top-config"><a href="/docs/configuration/configuration.html">Configure</a></li> <li id="top-install"><a href="/docs/basics/install.html">Install</a></li> <li id="top-tools" class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-tools">Tools <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/tools/u8glib/converter.html">Bitmap Converter</a></li> <li><a href="/tools/rgb565/converter.html">RGB565 Converter</a></li> <li><a href="/tools/lin_advance/k-factor.html">Calibrate Linear Advance</a></li> <li><a href="/tools/input_shaping/freq-calibr.html">Calibrate Input Shaping</a></li> <li class="divider"> <li><a href="//github.com/MarlinFirmware/Marlin/issues">Bugtracker</a></li> <li><a href="/docs/basics/reporting_bugs.html">Reporting bugs</a></li> <li class="divider"> <li><a href="//github.com/MarlinFirmware/Marlin">Source Code Repository</a></li> </ul> </li> <li id="top-help" class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-documentation">Help <span class="caret"></span></a> <ul class="dropdown-menu"> <li class="dropdown-submenu configuration"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Configuration</a> <ul class="dropdown-menu"> <li><a href="/meta/configuration/">All documents</a></li> <li class="divider"> <li><a href="/docs/configuration/1.1/laser_spindle.html">Laser/Spindle Configuration (1.1.x)</a></li> <li><a href="/docs/configuration/2.0.9/laser_spindle.html">Laser/Spindle Configuration (2.0.9.x)</a></li> <li><a href="/docs/configuration/config-ini.html">Configuring with INI</a></li> <li><a href="/docs/configuration/configuration.html">Configuring Marlin</a></li> <li><a href="/docs/configuration/probes.html">Probe Configuration</a></li> </ul> </li> <li class="dropdown-submenu development"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Development</a> <ul class="dropdown-menu"> <li><a href="/meta/development/">All documents</a></li> <li class="divider"> <li><a href="/docs/development/boards.html">Boards</a></li> <li class="divider"> <li><a href="/docs/development/code_structure.html">Code Structure</a></li> <li><a href="/docs/development/coding_standards.html">Coding Standards</a></li> <li><a href="/docs/development/fastio.html">FastIO</a></li> <li><a href="/docs/development/hal.html">Hardware Abstraction Layer</a></li> <li class="divider"> <li><a href="/docs/development/contributing.html">Contributing to Marlin</a></li> <li class="divider"> <li><a href="/docs/development/feature_request.html">Feature requests</a></li> <li><a href="/docs/development/getting_started_pull_requests.html">Contributing Code with Pull Requests</a></li> <li><a href="/docs/development/git_scripts.html">Marlin Github Scripts</a></li> <li class="divider"> <li><a href="/docs/development/fonts.html">Adding new fonts</a></li> <li><a href="/docs/development/lcd_language.html">LCD Language System</a></li> </ul> </li> <li class="dropdown-submenu features"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Features</a> <ul class="dropdown-menu"> <li><a href="/meta/features/">All documents</a></li> <li class="divider"> <li><a href="/docs/features/auto_bed_leveling.html">Automatic Bed Leveling</a></li> <li><a href="/docs/features/unified_bed_leveling.html">Unified Bed Leveling</a></li> <li class="divider"> <li><a href="/docs/features/autostart.html">Autostart</a></li> <li class="divider"> <li><a href="/docs/features/eeprom.html">EEPROM</a></li> <li class="divider"> <li><a href="/docs/features/fwretract.html">Firmware Retract</a></li> <li><a href="/docs/features/input_shaping.html">Input Shaping</a></li> <li><a href="/docs/features/lin_advance.html">Linear Advance</a></li> <li><a href="/docs/features/model_predictive_control.html">Model Predictive Temperature Control</a></li> <li><a href="/docs/features/probe_temp_compensation.html">Probe Temperature Compensation</a></li> <li class="divider"> <li><a href="/docs/features/lcd_menu.html">LCD Menu Tree</a></li> </ul> </li> <li class="dropdown-submenu gcode"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">G-code</a> <ul class="dropdown-menu"> <li><a href="/meta/gcode/">All documents</a></li> <li class="divider"> <li><a href="/docs/gcode/G000-G001.html"><strong>G0-G1</strong>: Linear Move</a></li> <li><a href="/docs/gcode/G002-G003.html"><strong>G2-G3</strong>: Arc or Circle Move</a></li> <li><a href="/docs/gcode/G004.html"><strong>G4</strong>: Dwell</a></li> <li><a href="/docs/gcode/G005.html"><strong>G5</strong>: Bézier cubic spline</a></li> <li><a href="/docs/gcode/G006.html"><strong>G6</strong>: Direct Stepper Move</a></li> <li><a href="/docs/gcode/G010.html"><strong>G10</strong>: Retract</a></li> <li><a href="/docs/gcode/G011.html"><strong>G11</strong>: Recover</a></li> <li><a href="/docs/gcode/G012.html"><strong>G12</strong>: Clean the Nozzle</a></li> <li><a href="/docs/gcode/G017-G019.html"><strong>G17-G19</strong>: CNC Workspace Planes</a></li> <li><a href="/docs/gcode/G020.html"><strong>G20</strong>: Inch Units</a></li> <li><a href="/docs/gcode/G021.html"><strong>G21</strong>: Millimeter Units</a></li> <li><a href="/docs/gcode/G026.html"><strong>G26</strong>: Mesh Validation Pattern</a></li> <li><a href="/docs/gcode/G027.html"><strong>G27</strong>: Park toolhead</a></li> <li><a href="/docs/gcode/G028.html"><strong>G28</strong>: Auto Home</a></li> <li><a href="/docs/gcode/G029.html"><strong>G29</strong>: Bed Leveling</a></li> <li><a href="/docs/gcode/G029-abl-3point.html"><strong>G29</strong>: Bed Leveling (3-Point)</a></li> <li><a href="/docs/gcode/G029-abl-linear.html"><strong>G29</strong>: Bed Leveling (Linear)</a></li> <li><a href="/docs/gcode/G029-mbl.html"><strong>G29</strong>: Bed Leveling (Manual)</a></li> <li><a href="/docs/gcode/G029-abl-bilinear.html"><strong>G29</strong>: Bed Leveling (Bilinear)</a></li> <li><a href="/docs/gcode/G029-ubl.html"><strong>G29</strong>: Bed Leveling (Unified)</a></li> <li><a href="/docs/gcode/G030.html"><strong>G30</strong>: Single Z-Probe</a></li> <li><a href="/docs/gcode/G031.html"><strong>G31</strong>: Dock Sled</a></li> <li><a href="/docs/gcode/G032.html"><strong>G32</strong>: Undock Sled</a></li> <li><a href="/docs/gcode/G033.html"><strong>G33</strong>: Delta Auto Calibration</a></li> <li><a href="/docs/gcode/G034-zsaa.html"><strong>G34</strong>: Z Steppers Auto-Alignment</a></li> <li><a href="/docs/gcode/G034-mgc.html"><strong>G34</strong>: Mechanical Gantry Calibration</a></li> <li><a href="/docs/gcode/G035.html"><strong>G35</strong>: Tramming Assistant</a></li> <li><a href="/docs/gcode/G038.html"><strong>G38.2-G38.5</strong>: Probe target</a></li> <li><a href="/docs/gcode/G042.html"><strong>G42</strong>: Move to mesh coordinate</a></li> <li><a href="/docs/gcode/G053.html"><strong>G53</strong>: Move in Machine Coordinates</a></li> <li><a href="/docs/gcode/G054-G059.html"><strong>G54-G59.3</strong>: Workspace Coordinate System</a></li> <li><a href="/docs/gcode/G060.html"><strong>G60</strong>: Save Current Position</a></li> <li><a href="/docs/gcode/G061.html"><strong>G61</strong>: Return to Saved Position</a></li> <li><a href="/docs/gcode/G076.html"><strong>G76</strong>: Probe temperature calibration</a></li> <li><a href="/docs/gcode/G080.html"><strong>G80</strong>: Cancel Current Motion Mode</a></li> <li><a href="/docs/gcode/G090.html"><strong>G90</strong>: Absolute Positioning</a></li> <li><a href="/docs/gcode/G091.html"><strong>G91</strong>: Relative Positioning</a></li> <li><a href="/docs/gcode/G092.html"><strong>G92</strong>: Set Position</a></li> <li><a href="/docs/gcode/G425.html"><strong>G425</strong>: Backlash Calibration</a></li> <li><a href="/docs/gcode/M000-M001.html"><strong>M0-M1</strong>: Unconditional stop</a></li> <li><a href="/docs/gcode/M003.html"><strong>M3</strong>: Spindle CW / Laser On</a></li> <li><a href="/docs/gcode/M004.html"><strong>M4</strong>: Spindle CCW / Laser On</a></li> <li><a href="/docs/gcode/M005.html"><strong>M5</strong>: Spindle / Laser Off</a></li> <li><a href="/docs/gcode/M007-M009.html"><strong>M7-M9</strong>: Coolant Controls</a></li> <li><a href="/docs/gcode/M010-M011.html"><strong>M10-M11</strong>: Vacuum / Blower Control</a></li> <li><a href="/docs/gcode/M016.html"><strong>M16</strong>: Expected Printer Check</a></li> <li><a href="/docs/gcode/M017.html"><strong>M17</strong>: Enable Steppers</a></li> <li><a href="/docs/gcode/M018.html"><strong>M18, M84</strong>: Disable steppers</a></li> <li><a href="/docs/gcode/M020.html"><strong>M20</strong>: List SD Card</a></li> <li><a href="/docs/gcode/M021.html"><strong>M21</strong>: Init SD card</a></li> <li><a href="/docs/gcode/M022.html"><strong>M22</strong>: Release SD card</a></li> <li><a href="/docs/gcode/M023.html"><strong>M23</strong>: Select SD file</a></li> <li><a href="/docs/gcode/M024.html"><strong>M24</strong>: Start or Resume SD print</a></li> <li><a href="/docs/gcode/M025.html"><strong>M25</strong>: Pause SD print</a></li> <li><a href="/docs/gcode/M026.html"><strong>M26</strong>: Set SD position</a></li> <li><a href="/docs/gcode/M027.html"><strong>M27</strong>: Report SD print status</a></li> <li><a href="/docs/gcode/M028.html"><strong>M28</strong>: Start SD write</a></li> <li><a href="/docs/gcode/M029.html"><strong>M29</strong>: Stop SD write</a></li> <li><a href="/docs/gcode/M030.html"><strong>M30</strong>: Delete SD file</a></li> <li><a href="/docs/gcode/M031.html"><strong>M31</strong>: Print time</a></li> <li><a href="/docs/gcode/M032.html"><strong>M32</strong>: Select and Start</a></li> <li><a href="/docs/gcode/M033.html"><strong>M33</strong>: Get Long Path</a></li> <li><a href="/docs/gcode/M034.html"><strong>M34</strong>: SDCard Sorting</a></li> <li><a href="/docs/gcode/M042.html"><strong>M42</strong>: Set Pin State</a></li> <li><a href="/docs/gcode/M043.html"><strong>M43</strong>: Debug Pins</a></li> <li><a href="/docs/gcode/M043-T.html"><strong>M43 T</strong>: Toggle Pins</a></li> <li><a href="/docs/gcode/M048.html"><strong>M48</strong>: Probe Repeatability Test</a></li> <li><a href="/docs/gcode/M073.html"><strong>M73</strong>: Set Print Progress</a></li> <li><a href="/docs/gcode/M075.html"><strong>M75</strong>: Start Print Job Timer</a></li> <li><a href="/docs/gcode/M076.html"><strong>M76</strong>: Pause Print Job Timer</a></li> <li><a href="/docs/gcode/M077.html"><strong>M77</strong>: Stop Print Job Timer</a></li> <li><a href="/docs/gcode/M078.html"><strong>M78</strong>: Print Job Stats</a></li> <li><a href="/docs/gcode/M080.html"><strong>M80</strong>: Power On</a></li> <li><a href="/docs/gcode/M081.html"><strong>M81</strong>: Power Off</a></li> <li><a href="/docs/gcode/M082.html"><strong>M82</strong>: E Absolute</a></li> <li><a href="/docs/gcode/M083.html"><strong>M83</strong>: E Relative</a></li> <li><a href="/docs/gcode/M085.html"><strong>M85</strong>: Inactivity Shutdown</a></li> <li><a href="/docs/gcode/M086.html"><strong>M86</strong>: Hotend Idle Timeout</a></li> <li><a href="/docs/gcode/M087.html"><strong>M87</strong>: Disable Hotend Idle Timeout</a></li> <li><a href="/docs/gcode/M092.html"><strong>M92</strong>: Set Axis Steps-per-unit</a></li> <li><a href="/docs/gcode/M100.html"><strong>M100</strong>: Free Memory</a></li> <li><a href="/docs/gcode/M102.html"><strong>M102</strong>: Configure Bed Distance Sensor</a></li> <li><a href="/docs/gcode/M104.html"><strong>M104</strong>: Set Hotend Temperature</a></li> <li><a href="/docs/gcode/M105.html"><strong>M105</strong>: Report Temperatures</a></li> <li><a href="/docs/gcode/M106.html"><strong>M106</strong>: Set Fan Speed</a></li> <li><a href="/docs/gcode/M107.html"><strong>M107</strong>: Fan Off</a></li> <li><a href="/docs/gcode/M108.html"><strong>M108</strong>: Break and Continue</a></li> <li><a href="/docs/gcode/M109.html"><strong>M109</strong>: Wait for Hotend Temperature</a></li> <li><a href="/docs/gcode/M110.html"><strong>M110</strong>: Set Line Number</a></li> <li><a href="/docs/gcode/M111.html"><strong>M111</strong>: Debug Level</a></li> <li><a href="/docs/gcode/M112.html"><strong>M112</strong>: Full Shutdown</a></li> <li><a href="/docs/gcode/M113.html"><strong>M113</strong>: Host Keepalive</a></li> <li><a href="/docs/gcode/M114.html"><strong>M114</strong>: Get Current Position</a></li> <li><a href="/docs/gcode/M115.html"><strong>M115</strong>: Firmware Info</a></li> <li><a href="/docs/gcode/M117.html"><strong>M117</strong>: Set LCD Message</a></li> <li><a href="/docs/gcode/M118.html"><strong>M118</strong>: Serial print</a></li> <li><a href="/docs/gcode/M119.html"><strong>M119</strong>: Endstop States</a></li> <li><a href="/docs/gcode/M120.html"><strong>M120</strong>: Enable Endstops</a></li> <li><a href="/docs/gcode/M121.html"><strong>M121</strong>: Disable Endstops</a></li> <li><a href="/docs/gcode/M122.html"><strong>M122</strong>: TMC Debugging</a></li> <li><a href="/docs/gcode/M123.html"><strong>M123</strong>: Fan Tachometers</a></li> <li><a href="/docs/gcode/M125.html"><strong>M125</strong>: Park Head</a></li> <li><a href="/docs/gcode/M126.html"><strong>M126</strong>: Baricuda 1 Open</a></li> <li><a href="/docs/gcode/M127.html"><strong>M127</strong>: Baricuda 1 Close</a></li> <li><a href="/docs/gcode/M128.html"><strong>M128</strong>: Baricuda 2 Open</a></li> <li><a href="/docs/gcode/M129.html"><strong>M129</strong>: Baricuda 2 Close</a></li> <li><a href="/docs/gcode/M140.html"><strong>M140</strong>: Set Bed Temperature</a></li> <li><a href="/docs/gcode/M141.html"><strong>M141</strong>: Set Chamber Temperature</a></li> <li><a href="/docs/gcode/M143.html"><strong>M143</strong>: Set Laser Cooler Temperature</a></li> <li><a href="/docs/gcode/M145.html"><strong>M145</strong>: Set Material Preset</a></li> <li><a href="/docs/gcode/M149.html"><strong>M149</strong>: Set Temperature Units</a></li> <li><a href="/docs/gcode/M150.html"><strong>M150</strong>: Set RGB(W) Color</a></li> <li><a href="/docs/gcode/M154.html"><strong>M154</strong>: Position Auto-Report</a></li> <li><a href="/docs/gcode/M155.html"><strong>M155</strong>: Temperature Auto-Report</a></li> <li><a href="/docs/gcode/M163.html"><strong>M163</strong>: Set Mix Factor</a></li> <li><a href="/docs/gcode/M164.html"><strong>M164</strong>: Save Mix</a></li> <li><a href="/docs/gcode/M165.html"><strong>M165</strong>: Set Mix</a></li> <li><a href="/docs/gcode/M166.html"><strong>M166</strong>: Gradient Mix</a></li> <li><a href="/docs/gcode/M190.html"><strong>M190</strong>: Wait for Bed Temperature</a></li> <li><a href="/docs/gcode/M191.html"><strong>M191</strong>: Wait for Chamber Temperature</a></li> <li><a href="/docs/gcode/M192.html"><strong>M192</strong>: Wait for Probe temperature</a></li> <li><a href="/docs/gcode/M193.html"><strong>M193</strong>: Set Laser Cooler Temperature</a></li> <li><a href="/docs/gcode/M200.html"><strong>M200</strong>: Set Filament Diameter</a></li> <li><a href="/docs/gcode/M201.html"><strong>M201</strong>: Print / Travel Move Limits</a></li> <li><a href="/docs/gcode/M203.html"><strong>M203</strong>: Set Max Feedrate</a></li> <li><a href="/docs/gcode/M204.html"><strong>M204</strong>: Set Starting Acceleration</a></li> <li><a href="/docs/gcode/M205.html"><strong>M205</strong>: Set Advanced Settings</a></li> <li><a href="/docs/gcode/M206.html"><strong>M206</strong>: Set Home Offsets</a></li> <li><a href="/docs/gcode/M207.html"><strong>M207</strong>: Set Firmware Retraction</a></li> <li><a href="/docs/gcode/M208.html"><strong>M208</strong>: Firmware Recover</a></li> <li><a href="/docs/gcode/M209.html"><strong>M209</strong>: Set Auto Retract</a></li> <li><a href="/docs/gcode/M211.html"><strong>M211</strong>: Software Endstops</a></li> <li><a href="/docs/gcode/M217.html"><strong>M217</strong>: Filament swap parameters</a></li> <li><a href="/docs/gcode/M218.html"><strong>M218</strong>: Set Hotend Offset</a></li> <li><a href="/docs/gcode/M220.html"><strong>M220</strong>: Set Feedrate Percentage</a></li> <li><a href="/docs/gcode/M221.html"><strong>M221</strong>: Set Flow Percentage</a></li> <li><a href="/docs/gcode/M226.html"><strong>M226</strong>: Wait for Pin State</a></li> <li><a href="/docs/gcode/M240.html"><strong>M240</strong>: Trigger Camera</a></li> <li><a href="/docs/gcode/M250.html"><strong>M250</strong>: LCD Contrast</a></li> <li><a href="/docs/gcode/M255.html"><strong>M255</strong>: LCD Sleep/Backlight Timeout</a></li> <li><a href="/docs/gcode/M256.html"><strong>M256</strong>: LCD Brightness</a></li> <li><a href="/docs/gcode/M260.html"><strong>M260</strong>: I2C Send</a></li> <li><a href="/docs/gcode/M261.html"><strong>M261</strong>: I2C Request</a></li> <li><a href="/docs/gcode/M280.html"><strong>M280</strong>: Servo Position</a></li> <li><a href="/docs/gcode/M281.html"><strong>M281</strong>: Edit Servo Angles</a></li> <li><a href="/docs/gcode/M282.html"><strong>M282</strong>: Detach Servo</a></li> <li><a href="/docs/gcode/M290.html"><strong>M290</strong>: Babystep</a></li> <li><a href="/docs/gcode/M300.html"><strong>M300</strong>: Play Tone</a></li> <li><a href="/docs/gcode/M301.html"><strong>M301</strong>: Set Hotend PID</a></li> <li><a href="/docs/gcode/M302.html"><strong>M302</strong>: Cold Extrude</a></li> <li><a href="/docs/gcode/M303.html"><strong>M303</strong>: PID autotune</a></li> <li><a href="/docs/gcode/M304.html"><strong>M304</strong>: Set Bed PID</a></li> <li><a href="/docs/gcode/M305.html"><strong>M305</strong>: User Thermistor Parameters</a></li> <li><a href="/docs/gcode/M306.html"><strong>M306</strong>: Model Predictive Temp. Control</a></li> <li><a href="/docs/gcode/M350.html"><strong>M350</strong>: Set micro-stepping</a></li> <li><a href="/docs/gcode/M351.html"><strong>M351</strong>: Set Microstep Pins</a></li> <li><a href="/docs/gcode/M355.html"><strong>M355</strong>: Case Light Control</a></li> <li><a href="/docs/gcode/M360.html"><strong>M360</strong>: SCARA Theta A</a></li> <li><a href="/docs/gcode/M361.html"><strong>M361</strong>: SCARA Theta-B</a></li> <li><a href="/docs/gcode/M362.html"><strong>M362</strong>: SCARA Psi-A</a></li> <li><a href="/docs/gcode/M363.html"><strong>M363</strong>: SCARA Psi-B</a></li> <li><a href="/docs/gcode/M364.html"><strong>M364</strong>: SCARA Psi-C</a></li> <li><a href="/docs/gcode/M380.html"><strong>M380</strong>: Activate Solenoid</a></li> <li><a href="/docs/gcode/M381.html"><strong>M381</strong>: Deactivate Solenoids</a></li> <li><a href="/docs/gcode/M400.html"><strong>M400</strong>: Finish Moves</a></li> <li><a href="/docs/gcode/M401.html"><strong>M401</strong>: Deploy Probe</a></li> <li><a href="/docs/gcode/M402.html"><strong>M402</strong>: Stow Probe</a></li> <li><a href="/docs/gcode/M403.html"><strong>M403</strong>: MMU2 Filament Type</a></li> <li><a href="/docs/gcode/M404.html"><strong>M404</strong>: Set Filament Diameter</a></li> <li><a href="/docs/gcode/M405.html"><strong>M405</strong>: Filament Width Sensor On</a></li> <li><a href="/docs/gcode/M406.html"><strong>M406</strong>: Filament Width Sensor Off</a></li> <li><a href="/docs/gcode/M407.html"><strong>M407</strong>: Filament Width</a></li> <li><a href="/docs/gcode/M410.html"><strong>M410</strong>: Quickstop</a></li> <li><a href="/docs/gcode/M412.html"><strong>M412</strong>: Filament Runout</a></li> <li><a href="/docs/gcode/M413.html"><strong>M413</strong>: Power-loss Recovery</a></li> <li><a href="/docs/gcode/M420.html"><strong>M420</strong>: Bed Leveling State</a></li> <li><a href="/docs/gcode/M421.html"><strong>M421</strong>: Set Mesh Value</a></li> <li><a href="/docs/gcode/M422.html"><strong>M422</strong>: Set Z Motor XY</a></li> <li><a href="/docs/gcode/M423.html"><strong>M423</strong>: X Twist Compensation</a></li> <li><a href="/docs/gcode/M425.html"><strong>M425</strong>: Backlash compensation</a></li> <li><a href="/docs/gcode/M428.html"><strong>M428</strong>: Home Offsets Here</a></li> <li><a href="/docs/gcode/M430.html"><strong>M430</strong>: Power Monitor</a></li> <li><a href="/docs/gcode/M486.html"><strong>M486</strong>: Cancel Objects</a></li> <li><a href="/docs/gcode/M493.html"><strong>M493</strong>: Fixed-Time Motion</a></li> <li><a href="/docs/gcode/M500.html"><strong>M500</strong>: Save Settings</a></li> <li><a href="/docs/gcode/M501.html"><strong>M501</strong>: Restore Settings</a></li> <li><a href="/docs/gcode/M502.html"><strong>M502</strong>: Factory Reset</a></li> <li><a href="/docs/gcode/M503.html"><strong>M503</strong>: Report Settings</a></li> <li><a href="/docs/gcode/M504.html"><strong>M504</strong>: Validate EEPROM contents</a></li> <li><a href="/docs/gcode/M510.html"><strong>M510</strong>: Lock Machine</a></li> <li><a href="/docs/gcode/M511.html"><strong>M511</strong>: Unlock Machine</a></li> <li><a href="/docs/gcode/M512.html"><strong>M512</strong>: Set Passcode</a></li> <li><a href="/docs/gcode/M524.html"><strong>M524</strong>: Abort SD print</a></li> <li><a href="/docs/gcode/M540.html"><strong>M540</strong>: Endstops Abort SD</a></li> <li><a href="/docs/gcode/M569.html"><strong>M569</strong>: Set TMC stepping mode</a></li> <li><a href="/docs/gcode/M575.html"><strong>M575</strong>: Serial baud rate</a></li> <li><a href="/docs/gcode/M592.html"><strong>M592</strong>: Nonlinear Extrusion Control</a></li> <li><a href="/docs/gcode/M593.html"><strong>M593</strong>: ZV Input Shaping</a></li> <li><a href="/docs/gcode/M600.html"><strong>M600</strong>: Filament Change</a></li> <li><a href="/docs/gcode/M603.html"><strong>M603</strong>: Configure Filament Change</a></li> <li><a href="/docs/gcode/M605.html"><strong>M605</strong>: Multi Nozzle Mode</a></li> <li><a href="/docs/gcode/M665.html"><strong>M665</strong>: Delta Configuration</a></li> <li><a href="/docs/gcode/M665-scara.html"><strong>M665</strong>: SCARA Configuration</a></li> <li><a href="/docs/gcode/M666.html"><strong>M666</strong>: Set Delta endstop adjustments</a></li> <li><a href="/docs/gcode/M666-dual.html"><strong>M666</strong>: Set dual endstop offsets</a></li> <li><a href="/docs/gcode/M672.html"><strong>M672</strong>: Duet Smart Effector sensitivity</a></li> <li><a href="/docs/gcode/M701.html"><strong>M701</strong>: Load filament</a></li> <li><a href="/docs/gcode/M702.html"><strong>M702</strong>: Unload filament</a></li> <li><a href="/docs/gcode/M710.html"><strong>M710</strong>: Controller Fan settings</a></li> <li><a href="/docs/gcode/M808.html"><strong>M808</strong>: Repeat Marker</a></li> <li><a href="/docs/gcode/M810-M819.html"><strong>M810-M819</strong>: G-code macros</a></li> <li><a href="/docs/gcode/M851.html"><strong>M851</strong>: XYZ Probe Offset</a></li> <li><a href="/docs/gcode/M852.html"><strong>M852</strong>: Bed Skew Compensation</a></li> <li><a href="/docs/gcode/M860-M869.html"><strong>M860-M869</strong>: I2C Position Encoders</a></li> <li><a href="/docs/gcode/M871.html"><strong>M871</strong>: Probe temperature config</a></li> <li><a href="/docs/gcode/M876.html"><strong>M876</strong>: Handle Prompt Response</a></li> <li><a href="/docs/gcode/M900.html"><strong>M900</strong>: Linear Advance Factor</a></li> <li><a href="/docs/gcode/M906.html"><strong>M906</strong>: Stepper Motor Current</a></li> <li><a href="/docs/gcode/M907.html"><strong>M907</strong>: Set Motor Current</a></li> <li><a href="/docs/gcode/M908.html"><strong>M908</strong>: Set Trimpot Pins</a></li> <li><a href="/docs/gcode/M909.html"><strong>M909</strong>: DAC Print Values</a></li> <li><a href="/docs/gcode/M910.html"><strong>M910</strong>: Commit DAC to EEPROM</a></li> <li><a href="/docs/gcode/M911.html"><strong>M911</strong>: TMC OT Pre-Warn Condition</a></li> <li><a href="/docs/gcode/M912.html"><strong>M912</strong>: Clear TMC OT Pre-Warn</a></li> <li><a href="/docs/gcode/M913.html"><strong>M913</strong>: Set Hybrid Threshold Speed</a></li> <li><a href="/docs/gcode/M914.html"><strong>M914</strong>: TMC Bump Sensitivity</a></li> <li><a href="/docs/gcode/M915.html"><strong>M915</strong>: TMC Z axis calibration</a></li> <li><a href="/docs/gcode/M916.html"><strong>M916</strong>: L6474 Thermal Warning Test</a></li> <li><a href="/docs/gcode/M917.html"><strong>M917</strong>: L6474 Overcurrent Warning Test</a></li> <li><a href="/docs/gcode/M918.html"><strong>M918</strong>: L6474 Speed Warning Test</a></li> <li><a href="/docs/gcode/M919.html"><strong>M919</strong>: TMC Chopper Timing</a></li> <li><a href="/docs/gcode/M928.html"><strong>M928</strong>: Start SD Logging</a></li> <li><a href="/docs/gcode/M951.html"><strong>M951</strong>: Magnetic Parking Extruder</a></li> <li><a href="/docs/gcode/M993.html"><strong>M993-M994</strong>: SD / SPI Flash</a></li> <li><a href="/docs/gcode/M995.html"><strong>M995</strong>: Touch Screen Calibration</a></li> <li><a href="/docs/gcode/M997.html"><strong>M997</strong>: Firmware update</a></li> <li><a href="/docs/gcode/M999.html"><strong>M999</strong>: STOP Restart</a></li> <li><a href="/docs/gcode/M7219.html"><strong>M7219</strong>: MAX7219 Control</a></li> <li><a href="/docs/gcode/T.html"><strong>T0-T7</strong>: Select or Report Tool</a></li> <li><a href="/docs/gcode/T-mmu2.html"><strong>T?-Tx</strong>: MMU2 Special Commands</a></li> </ul> </li> <li class="dropdown-submenu hardware"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Hardware</a> <ul class="dropdown-menu"> <li><a href="/meta/hardware/">All documents</a></li> <li class="divider"> <li><a href="/docs/hardware/boards.html">Boards</a></li> <li><a href="/docs/hardware/controllers.html">Controllers and displays</a></li> <li class="divider"> <li><a href="/docs/hardware/endstops.html">Endstops</a></li> <li><a href="/docs/hardware/tmc_drivers.html">Trinamic drivers</a></li> </ul> </li> <li class="dropdown-submenu setting"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Settings</a> <ul class="dropdown-menu"> <li><a href="/meta/setting/">All documents</a></li> <li class="divider"> <li><a href="/docs/setting/config_info.html">Configuration Info</a></li> <li><a href="/docs/setting/extruder.html">Extruders</a></li> <li><a href="/docs/setting/hardware.html">Hardware</a></li> <li><a href="/docs/setting/machine_info.html">Machine Info</a></li> <li><a href="/docs/setting/stepper_drivers.html">Stepper Drivers</a></li> <li><a href="/docs/setting/temperature.html">Temperature</a></li> </ul> </li> <li><a href="/docs/basics/troubleshooting.html">Troubleshooting</a></li> <li class="divider"> <li><a href="/meta/in-review/">Documentation Needing Review</a></li> </ul> </li> <li id="top-donate"><a href="/docs/development/contributing.html#donate">❤️ Donate</a></li> <li id="searchbox"> <form action="/meta/search/"> <input type="search" name="q" placeholder="Search"> </form> </li> </ul> <ul class="nav navbar-right hidden-sm"> <li> <a href="https://github.com/MarlinFirmware/MarlinDocumentation/edit/master/_development/coding_standards.md" data-proofer-ignore><i class="fa fa-pen-to-square" aria-hidden="true"></i> <span>Edit Page</span></a> </li> </ul> </div> </div> </nav> <div class="custom-btn"> <div class="row hidden-md hidden-lg hidden-xl"> <a class="btn btn-edit e-btn btn-block btn-lg" href="https://github.com/MarlinFirmware/MarlinDocumentation/edit/master/_development/coding_standards.md" data-proofer-ignore role="button"><span class="e-btn-text"><em class="fa fa-pen-to-square" aria-hidden="true"></em>  Edit Page</span></a> </div> <div class="row"> <a class="btn btn-learn e-btn btn-block btn-lg" href="/docs/basics/introduction.html" role="button"> <span class="e-btn-text"><em class="fa fa-book" aria-hidden="true"></em>  Learn more</span></a> </div> <div class="row"> <a class="btn btn-contribute e-btn btn-block btn-lg" href="/docs/development/contributing.html" role="button"> <span class="e-btn-text"><em class="fa fa-users" aria-hidden="true"></em>  Contribute</span></a> </div> <div class="row"> <a class="btn btn-download e-btn btn-block btn-lg" href="/meta/download/" role="button"> <span class="e-btn-text"><em class="fa fa-download" aria-hidden="true"></em>  Download</span></a> </div> <div class="row"> <a class="btn btn-follow e-btn btn-block btn-lg" href="//fosstodon.org/@marlinfirmware" role="button"> <span class="e-btn-text"><em class="fa-brands fa-mastodon" aria-hidden="true"></em>  Follow @MarlinFirmware</span></a> </div> <div class="row"> <a class="btn btn-follow e-btn btn-block btn-lg" href="//twitter.com/marlinfirmware" role="button"> <span class="e-btn-text"><em class="fa-brands fa-x" aria-hidden="true"></em>  Follow @MarlinFirmware</span></a> </div> </div> <div class="container" role="main"> <div class="row"> <div class="col-lg-3 col-md-4 visible-lg-block visible-md-block custom-no-padding"> <div class="custom-fixed-sidebar"> <div id="toc"></div> </div> </div> <div class="col-lg-9 col-md-8"> <div class="row"> <div class="col-md-12 custom-article"> <p id="authors" class="text-right pull-right visible-lg-block hidden-print small custom-pt25"> <a href="//github.com/thinkyhead" data-toggle="tooltip" data-placement="bottom" title="Visit thinkyhead's profile on Github"><img class="avatar avatar-small" alt="thinkyhead" width="30" height="30" data-proofer-ignore="true" src="https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=30" srcset="https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=30 1x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=60 2x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=90 3x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=120 4x"></a> </p> <h1 class="custom-article-header">Coding Standards</h1> <p>Please follow the formatting guidelines and coding standards below when contributing code to Marlin. Pull requests that don’t follow the existing coding style closely may be postponed for cleanup. Your code reviewer should point out where changes are needed.</p> <h1 id="coding-style">Coding Style</h1> <h2 id="indentation">Indentation</h2> <p>Indentation is important for readability and maintainability of code, and provides guidance for naïve code editors (<em>e.g.,</em> TextMate, Sublime, et. al.) to properly fold code blocks by level.</p> <ul> <li>Entab lines with 2 spaces and don’t use tabs. <em>Set your editor to use 2 Spaces! Tabs will bite you in the end.</em> </li> <li>All block elements should increase the indentation level, including <code class="language-plaintext highlighter-rouge">#if</code> blocks and other non-brace compiler blocks:</li> </ul> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">myFunction</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">myCondition</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="cp">#ifdef PETER_PARKER
</span>      <span class="n">slingWeb</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
    <span class="cp">#else
</span>      <span class="n">findPhoneBooth</span><span class="p">();</span>
    <span class="cp">#endif
</span>  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="brace-style">Brace-style</h2> <p>Marlin uses a brace style intended to</p> <ul> <li>show the folded code block at the end of its opening line: <code class="language-plaintext highlighter-rouge">{</code><code class="language-plaintext highlighter-rouge">(...)</code>,</li> <li>maintain consistency and develop a single style habit, and</li> <li>maximize the number of code lines on-screen.</li> </ul> <p>If vertical spacing makes code more readable, add <em>one</em> extra blank line rather than using a different brace style.</p> <ul> <li>Known by the Ancients as <a href="//en.wikipedia.org/wiki/Indent_style#Variant:_1TBS_.28OTBS.29">“One True Brace Style”</a> </li> <li>Place opening braces at the end of the line: <code class="language-plaintext highlighter-rouge">if (a == 1) {</code> </li> <li>Do the same for a declaration line: <code class="language-plaintext highlighter-rouge">void pizza(int slices) {</code> </li> <li>Vertically align closing braces to the opening line.</li> </ul> <p>Here’s an example of 1TBS style applied to a faux function:</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">my_function</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(...)</span> <span class="p">{</span>
    <span class="p">...</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="p">...</span>
  <span class="p">}</span>

  <span class="k">switch</span> <span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="mi">1</span><span class="p">:</span> <span class="n">SERIAL_CHAR</span><span class="p">(</span><span class="sc">'Q'</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">2</span><span class="p">:</span> <span class="n">SERIAL_CHAR</span><span class="p">(</span><span class="sc">'T'</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="spacing">Spacing</h2> <ul> <li>One space after control keywords:<br><code class="language-plaintext highlighter-rouge">if (…)</code>, <code class="language-plaintext highlighter-rouge">while (…)</code>, <code class="language-plaintext highlighter-rouge">do {…} while(…)</code>, <code class="language-plaintext highlighter-rouge">switch (…)</code> etc.</li> <li>No space is needed for <code class="language-plaintext highlighter-rouge">sizeof()</code> and other “function-like” language features.</li> <li>No space between a function and its arguments: <code class="language-plaintext highlighter-rouge">val = myFunction(…);</code> </li> <li>No spaces around <code class="language-plaintext highlighter-rouge">.</code> or <code class="language-plaintext highlighter-rouge">-&gt;</code> operators: <code class="language-plaintext highlighter-rouge">the_place = state-&gt;parks[echo];</code> </li> <li>No space between a cast and its target: <code class="language-plaintext highlighter-rouge">old_state = (int)state;</code> </li> <li>Use one space around (on each side of) most binary and ternary operators:<br><code class="language-plaintext highlighter-rouge">myVar = aVar + bVar * cVar;</code><br><code class="language-plaintext highlighter-rouge">myVal = (a * b + b * c);</code> </li> </ul> <h2 id="trailing-whitespace">Trailing Whitespace</h2> <p>Don’t leave trailing whitespace at the ends of lines. Some editors will auto-indent new lines, leaving extra whitespace behind on blank lines. As a result, you end up with lines containing trailing whitespace.</p> <p>Git can warn you about patches that introduce trailing whitespace, and optionally strip the trailing whitespace for you; however, if applying a series of patches, this may make later patches in the series fail by changing their context lines.</p> <h2 id="commenting">Commenting</h2> <p>Comments are good, but avoid over-commenting. <em>Never</em> try to explain <em>how</em> your code works in a comment: it’s much better to write the code so that the working is obvious, and it’s a waste of time to explain badly written code.</p> <p>Generally, you want your comments to explain <em>what</em> your code does, not <em>how</em>. Keep comments inside a function body short. If a function is so complex that you need to separately comment parts of it, consider splitting it up into simpler units. Make small comments to note or warn about something particularly clever (or ugly), but avoid excess. Reserve detailed comments for the head of the function, explaining what it does, and possibly <em>why</em> it does it.</p> <ul> <li>Use Doxygen-style comments for functions, classes, and other defined entities, and concentrate documentation in the <code class="language-plaintext highlighter-rouge">.h</code> files.</li> </ul> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * This is the preferred style for multi-line comments in the
 * Marlin Firmware source code. Please use it consistently.
 *
 * This mimics Doxygen/HeaderDoc style, and once keywords are added
 * we'll be able to auto-generate code documentation and provide more
 * complete development guidance.
 */</span>
</code></pre></div></div> <ul> <li>Use C++ single-line style with <code class="language-plaintext highlighter-rouge">//</code> for comments under 3 lines.</li> </ul> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// A short comment that takes up only a line or two</span>
<span class="c1">// should just use end-of-line comment style.</span>
</code></pre></div></div> <h1 id="names-and-symbols">Names and Symbols</h1> <h2 id="filenames">Filenames</h2> <p>Filenames for Marlin code should favor <code class="language-plaintext highlighter-rouge">lowercase_with_underscores.ext</code> format. Contributed code will follow its own standard.</p> <ul> <li>use <code class="language-plaintext highlighter-rouge">.cpp</code> for C++ sources</li> <li>use <code class="language-plaintext highlighter-rouge">.c</code> for C only sources</li> <li>use <code class="language-plaintext highlighter-rouge">.h</code> for headers of all types</li> </ul> <h2 id="directories">Directories</h2> <ul> <li>Lowercase names.</li> <li>Marlin 1.0.x and 1.1.x retain a flat file layout</li> <li>Marlin 1.2.x and up adopts a hierarchical file layout</li> </ul> <h2 id="capitalization">Capitalization</h2> <p>For Marlin variables, data members, functions, and methods use <code class="language-plaintext highlighter-rouge">lowercase_with_underscores</code>. Use <code class="language-plaintext highlighter-rouge">camelCase</code> names only when class names and methods already uses that format. Marlin classes may use <code class="language-plaintext highlighter-rouge">MyClassName</code> format or <code class="language-plaintext highlighter-rouge">my_class_name</code>. Core classes tend to use camel-case, with general-purpose classes using underscore format.</p> <ul> <li><code class="language-plaintext highlighter-rouge">my_function_name(int in_integer, float in_float=0.0)</code></li> <li> <code class="language-plaintext highlighter-rouge">MyClass</code>, <code class="language-plaintext highlighter-rouge">classMethod</code>, <code class="language-plaintext highlighter-rouge">classData</code> </li> <li> <code class="language-plaintext highlighter-rouge">local_variable</code>, <code class="language-plaintext highlighter-rouge">global_variable</code>, <code class="language-plaintext highlighter-rouge">const_value</code> </li> <li> <code class="language-plaintext highlighter-rouge">MACRO_NAME</code> – anything created with <code class="language-plaintext highlighter-rouge">#define</code> </li> <li><code class="language-plaintext highlighter-rouge">EnumeratedType</code></li> </ul> <h2 id="libraries">Libraries</h2> <p>Whenever possible, use the functions supplied by avr-libc or Arduino bundled libraries. Any libraries required to compile Marlin should be included in the package so that they are guaranteed to be compatible versions.</p> <h1 id="language-features">Language Features</h1> <p>Marlin is written in C/C++ and needs be able to compile with the supplied <code class="language-plaintext highlighter-rouge">Makefile</code> or an up-to-date version of Arduino. With Marlin 1.1 we now support building with Arduino IDE, Teensyduino, PlatformIO, <code class="language-plaintext highlighter-rouge">make</code>, and <code class="language-plaintext highlighter-rouge">cmake</code>.</p> <p>Going forward, Marlin does not need to be backward-compatible with older (pre-2017) toolchains. The minimum requirement for Marlin 1.1.x is Arduino IDE 1.6.8.</p> <ul> <li> <strong>Do not use</strong> extended C++ features like: <ul> <li>Exceptions (throw / catch)</li> <li>Virtual functions / classes</li> <li>Standard Template Library (STL)</li> </ul> </li> <li> <strong>Do use</strong> modern C++11 features like: <ul> <li> <code class="language-plaintext highlighter-rouge">constexpr</code> values and functions.</li> <li> <code class="language-plaintext highlighter-rouge">static_assert(test,"error")</code> to sanity-check <code class="language-plaintext highlighter-rouge">float</code> and <code class="language-plaintext highlighter-rouge">constexpr</code> values.</li> </ul> </li> </ul> <h2 id="primitive-types">Primitive Types</h2> <ul> <li>Favor bit-size types like <code class="language-plaintext highlighter-rouge">uint8_t</code> and <code class="language-plaintext highlighter-rouge">int32_t</code> over <code class="language-plaintext highlighter-rouge">short</code>, <code class="language-plaintext highlighter-rouge">int</code>, and <code class="language-plaintext highlighter-rouge">long</code>. This helps to keep behavior consistent across architectures.</li> <li>AVR recasts <code class="language-plaintext highlighter-rouge">double</code> as <code class="language-plaintext highlighter-rouge">float</code>, so both are 32 bits long. Favor <code class="language-plaintext highlighter-rouge">float</code> and avoid <code class="language-plaintext highlighter-rouge">double</code> unless the extra precision is needed on a 32-bit architecture.</li> </ul> <h2 id="memory-usage">Memory Usage</h2> <ul> <li>Dynamic allocation (<code class="language-plaintext highlighter-rouge">malloc()</code>, <code class="language-plaintext highlighter-rouge">free()</code>, <code class="language-plaintext highlighter-rouge">new</code>, <code class="language-plaintext highlighter-rouge">delete</code>) is <strong><em>verboten</em></strong>! There may be some flexibility for certain 32-bit features.</li> <li>Avoid unconstrained recursion (<em>e.g.,</em> calling <code class="language-plaintext highlighter-rouge">idle()</code> from <code class="language-plaintext highlighter-rouge">idle()</code>) so the stack won’t explode.</li> <li>Avoid using globals and <code class="language-plaintext highlighter-rouge">static</code> locals because SRAM is a precious resource on many boards.</li> <li>Use <code class="language-plaintext highlighter-rouge">PSTR</code> and <code class="language-plaintext highlighter-rouge">PROGMEM</code> macros to keep strings in Program Memory.</li> </ul> <h2 id="minimize-repetition">Minimize Repetition</h2> <p>When possible, use macros, small functions, and other clever techniques to avoid redundancy. For example, instead of this…</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#if ENABLED(FEATURE_ONE)
</span>  <span class="k">const</span> <span class="kt">char</span> <span class="n">blue</span> <span class="o">=</span> <span class="sc">'1'</span><span class="p">;</span>
<span class="cp">#else
</span>  <span class="k">const</span> <span class="kt">char</span> <span class="n">blue</span> <span class="o">=</span> <span class="sc">'0'</span><span class="p">;</span>
<span class="cp">#endif
</span></code></pre></div></div> <p>…do this…</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">const</span> <span class="kt">char</span> <span class="n">blue</span> <span class="o">=</span>
  <span class="cp">#if ENABLED(FEATURE_ONE)
</span>    <span class="sc">'1'</span>
  <span class="cp">#else
</span>    <span class="sc">'0'</span>
  <span class="cp">#endif
</span><span class="p">;</span>
</code></pre></div></div> <p>…or, better yet, use this…</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">const</span> <span class="kt">char</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">TERN</span><span class="p">(</span><span class="n">FEATURE_ONE</span><span class="p">,</span> <span class="sc">'1'</span><span class="p">,</span> <span class="sc">'0'</span><span class="p">);</span>
</code></pre></div></div> <h2 id="avoid-expensive-code">Avoid Expensive Code</h2> <ul> <li> <code class="language-plaintext highlighter-rouge">millis()</code> can be expensive so put it in a <code class="language-plaintext highlighter-rouge">const millis_t var</code> if you need to use the value more than once. (And always use the <code class="language-plaintext highlighter-rouge">ELAPSED</code>/<code class="language-plaintext highlighter-rouge">PENDING</code> macros - see below.)</li> <li>Pre-calculate instead of calculating on the fly, when possible.</li> <li>Use multiplication (of the reciprocal) instead of division, when possible.</li> <li>Most code doesn’t need to be optimized for speed, so favor smaller code.</li> </ul> <h2 id="best-practices-for-include">Best-Practices for #include</h2> <ul> <li>Follow best practices for <code class="language-plaintext highlighter-rouge">#include</code>. <ul> <li>Only include the headers needed to provide the definitions required by the current source file. This helps provide an accurate view of dependencies.</li> <li>Include <code class="language-plaintext highlighter-rouge">Marlin.h</code> only when you need its externs. Don’t include <code class="language-plaintext highlighter-rouge">Marlin.h</code> when just <code class="language-plaintext highlighter-rouge">MarlinConfig.h</code> (or <code class="language-plaintext highlighter-rouge">MarlinConfigPre.h</code>) will do.</li> <li>Included headers should be arranged in the following order: <ul> <li> <code class="language-plaintext highlighter-rouge">MarlinConfig.h</code> (or <code class="language-plaintext highlighter-rouge">MarlinConfigPre.h</code>), if configuration values are needed for <code class="language-plaintext highlighter-rouge">#if</code> or other uses.</li> <li>After the main <code class="language-plaintext highlighter-rouge">#if</code> condition, include the file’s own corresponding header.</li> <li>Next, arrange project headers to prevent hiding broken dependencies. For example, if <code class="language-plaintext highlighter-rouge">grape.h</code> depends on <code class="language-plaintext highlighter-rouge">orange.h</code>, try to include <code class="language-plaintext highlighter-rouge">grape.h</code> before <code class="language-plaintext highlighter-rouge">orange.h</code> so that if <code class="language-plaintext highlighter-rouge">grape.h</code> fails to include <code class="language-plaintext highlighter-rouge">orange.h</code> an error will be thrown.</li> <li>Last come system and library headers, such as <code class="language-plaintext highlighter-rouge">&lt;Arduino.h&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;inttypes.h&gt;</code>, and <code class="language-plaintext highlighter-rouge">&lt;u8glib.h&gt;</code>.</li> </ul> </li> </ul> </li> </ul> <h1 id="marlin-specific-conventions">Marlin-specific Conventions</h1> <h2 id="preprocessor-directives">Preprocessor directives</h2> <ul> <li>Use <code class="language-plaintext highlighter-rouge">#define</code> instead of <code class="language-plaintext highlighter-rouge">const</code> for configurable values</li> <li>Don’t use <code class="language-plaintext highlighter-rouge">#if</code> / <code class="language-plaintext highlighter-rouge">#endif</code> for commenting-out unused, old or broken code. We have a git repository! If it’s obsolete, delete it.</li> <li>Use <code class="language-plaintext highlighter-rouge">#if ENABLED(FEATURE_NAME)</code> / <code class="language-plaintext highlighter-rouge">#endif</code> to compile code for an enabled feature. (Using these macros allows features to be set externally.)</li> <li>Use <code class="language-plaintext highlighter-rouge">#if DISABLED(FEATURE_NAME)</code> / <code class="language-plaintext highlighter-rouge">#endif</code> to compile code for a disabled feature. See more macros below.</li> <li>Use <code class="language-plaintext highlighter-rouge">#define</code> macros to avoid repeating boilerplate code.<br>Consider both readability and maintainability.</li> <li>Label <code class="language-plaintext highlighter-rouge">#endif</code> with the opening <code class="language-plaintext highlighter-rouge">#if</code> condition(s) if the block is over ~15 lines. Make the label compact. For example, <code class="language-plaintext highlighter-rouge">#endif // SDSUPPORT || ULTRALCD</code>.</li> </ul> <h2 id="macros">Macros</h2> <p>Marlin provides several shorthand macros - mostly in the <code class="language-plaintext highlighter-rouge">macros.h</code> file - that are used throughout the code. Get to know and use them. Here are some of the most common:</p> <h3 id="configuration-tests">Configuration Tests</h3> <table class="pretty-list headless"> <thead> <tr> <th>Macro</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td> <code class="language-plaintext highlighter-rouge">ENABLED(OPTION)</code>/<code class="language-plaintext highlighter-rouge">DISABLED(OPTION)</code> </td> <td>Test whether an option is on/off. These macros are required so that <code class="language-plaintext highlighter-rouge">make</code> can set options.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ANY(...)</code></td> <td>True if any of the listed options is enabled.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">MANY(...)</code></td> <td>True only if more than one of the listed options is enabled.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ALL(...)</code></td> <td>True only if all of the listed options are enabled.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">NONE(...)</code></td> <td>True only if none of the listed options is enabled.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">COUNT_ENABLED(OPT1, OPT2, ...)</code></td> <td>Count the number of options in the list that are enabled.</td> </tr> </tbody> </table> <h3 id="ternary-macros">Ternary Macros</h3> <p>Since Marlin 2.0 all macros listed here (unless marked “<strong>Precompiler only</strong>”) can be used anywhere in code where a value would be used. This is a really handy capability and allows the code to be a lot more concise. The <code class="language-plaintext highlighter-rouge">ENABLED</code> and related macros simply emit an integer 0 or 1. A more interesting macro is <code class="language-plaintext highlighter-rouge">TERN</code> and its relatives <code class="language-plaintext highlighter-rouge">TERN0</code>, <code class="language-plaintext highlighter-rouge">TERN1</code>, <code class="language-plaintext highlighter-rouge">TERN_</code>, <code class="language-plaintext highlighter-rouge">IF_ENABLED</code>, and <code class="language-plaintext highlighter-rouge">IF_DISABLED</code>.</p> <table> <thead> <tr> <th>Macro</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">TERN(OPTION, T, F)</code></td> <td>If <code class="language-plaintext highlighter-rouge">OPTION</code> is enabled emit T otherwise emit F.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">TERN0(OPTION, T)</code></td> <td>If <code class="language-plaintext highlighter-rouge">OPTION</code> is enabled emit T otherwise emit 0 (<code class="language-plaintext highlighter-rouge">false</code>).</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">TERN1(OPTION, T)</code></td> <td>If <code class="language-plaintext highlighter-rouge">OPTION</code> is enabled emit T otherwise emit 1 (<code class="language-plaintext highlighter-rouge">true</code>).</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">TERN_(OPTION, T)</code></td> <td>If <code class="language-plaintext highlighter-rouge">OPTION</code> is enabled emit T otherwise emit nothing.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">IF_ENABLED(OPTION, T)</code></td> <td>Alias for <code class="language-plaintext highlighter-rouge">TERN_</code>.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">IF_DISABLED(OPTION, F)</code></td> <td>If <code class="language-plaintext highlighter-rouge">OPTION</code> is disabled emit F otherwise emit nothing.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SUM_TERN(OPTION, F)</code></td> <td>If <code class="language-plaintext highlighter-rouge">OPTION</code> is disabled emit F otherwise emit nothing.</td> </tr> </tbody> </table> <table> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">PLUS_TERN0(O,A)</code></td> <td>Emit +(A) for enabled option O, otherwise nothing.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">MINUS_TERN0(O,A)</code></td> <td>Emit -(A) for enabled option O, otherwise nothing.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SUM_TERN(O,B,A)</code></td> <td>Emit (B)+(A) for enabled option, otherwise just (B).</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">DIFF_TERN(O,B,A)</code></td> <td>Emit (B)-(A) for enabled option, otherwise just (B).</td> </tr> </tbody> </table> <p>Here are some ternary macro examples:</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">millis_t</span> <span class="n">ms</span> <span class="o">=</span> <span class="n">millis</span><span class="p">()</span> <span class="o">+</span> <span class="n">TERN</span><span class="p">(</span><span class="n">USE_LONG_TIMEOUT</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span> <span class="c1">// A longer timeout</span>
<span class="kt">bool</span> <span class="n">is_ready</span> <span class="o">=</span> <span class="n">TERN1</span><span class="p">(</span><span class="n">HAS_READY_STATE</span><span class="p">,</span> <span class="n">get_ready_state</span><span class="p">());</span> <span class="c1">// Get state (or assume true)</span>
<span class="n">TERN_</span><span class="p">(</span><span class="n">EEPROM_SETTINGS</span><span class="p">,</span> <span class="n">settings</span><span class="p">.</span><span class="n">read</span><span class="p">());</span> <span class="c1">// Read settings (or not)</span>
</code></pre></div></div> <h3 id="check-defined-pins">Check Defined Pins</h3> <table class="pretty-list headless"> <thead> <tr> <th>Macro</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">PIN_EXISTS(NAME)</code></td> <td>True if the pin is defined. <strong>Precompiler only.</strong> (Takes a pin name minus <code class="language-plaintext highlighter-rouge">_PIN</code>.)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">PINS_EXIST(...)</code></td> <td>True if all the listed pins are defined. <strong>Precompiler only.</strong> (Takes pin names minus <code class="language-plaintext highlighter-rouge">_PIN</code>.)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ANY_PIN(...)</code></td> <td>True if any of the listed pins is defined. <strong>Precompiler only.</strong> (Takes pin names minus <code class="language-plaintext highlighter-rouge">_PIN</code>.)</td> </tr> </tbody> </table> <h3 id="fastio">FastIO</h3> <p>Marlin uses FastIO macros to interface with pins that are known and fixed at compile-time. This results in much faster I/O, especially on AVR boards where every cycle counts. For more details about Marlin’s use of FastIO see <a href="fastio.html">this page</a>.</p> <table class="pretty-list headless"> <thead> <tr> <th>Macro</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">SET_INPUT(PIN)</code></td> <td>Set a digital pin to <code class="language-plaintext highlighter-rouge">INPUT</code> mode.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SET_INPUT_PULLUP(PIN)</code></td> <td>Set a digital pin to <code class="language-plaintext highlighter-rouge">INPUT_PULLUP</code> mode.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SET_INPUT_PULLDOWN(PIN)</code></td> <td>Set a digital pin to <code class="language-plaintext highlighter-rouge">INPUT_PULLDOWN</code> mode (if supported, else <code class="language-plaintext highlighter-rouge">INPUT</code>).</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SET_OUTPUT(PIN)</code></td> <td>Set a digital pin to <code class="language-plaintext highlighter-rouge">OUTPUT</code> mode.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SET_PWM(PIN)</code></td> <td>Set a digital pin to <code class="language-plaintext highlighter-rouge">PWM</code> mode (if supported, else <code class="language-plaintext highlighter-rouge">OUTPUT</code>).</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SET_PWM_OD(PIN)</code></td> <td>Set a digital pin to <code class="language-plaintext highlighter-rouge">PWM</code> open-drain mode (if supported, else <code class="language-plaintext highlighter-rouge">PWM</code> or <code class="language-plaintext highlighter-rouge">OUTPUT</code>).</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">READ(PIN)</code></td> <td>Read the state of a digital pin. Returns either <code class="language-plaintext highlighter-rouge">HIGH</code> or <code class="language-plaintext highlighter-rouge">LOW</code>.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">WRITE(PIN, STATE)</code></td> <td>Set a digital pin’s state to either <code class="language-plaintext highlighter-rouge">HIGH</code> or <code class="language-plaintext highlighter-rouge">LOW</code>.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">OUT_WRITE(PIN, STATE)</code></td> <td>Set a digital pin’s state to either <code class="language-plaintext highlighter-rouge">HIGH</code> or <code class="language-plaintext highlighter-rouge">LOW</code>.</td> </tr> </tbody> </table> <h3 id="loops-shorthand">Loops Shorthand</h3> <table class="pretty-list headless"> <thead> <tr> <th>Macro</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">LOOP_ABC(VAR)</code></td> <td>Loop over the first (up to) three axes</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">LOOP_NUM_AXES(VAR)</code></td> <td>Loop over all axes except for E</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">LOOP_LOGICAL_AXES(VAR)</code></td> <td>Loop over all axes including E as a single axis</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">LOOP_DISTINCT_AXES(VAR)</code></td> <td>Loop over all axes, including multiple E (for settings, saved tool state, etc.)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">LOOP_DISTINCT_E(VAR)</code></td> <td>Loop over all E (tool) indexes</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">EXTRUDER_LOOP()</code></td> <td>Loop integer var ‘<code class="language-plaintext highlighter-rouge">e</code>’ over all extruder indexes.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">HOTEND_LOOP()</code></td> <td>Loop integer var ‘<code class="language-plaintext highlighter-rouge">e</code>’ over all hotend indexes.</td> </tr> </tbody> </table> <h3 id="repeat">REPEAT</h3> <p>The <code class="language-plaintext highlighter-rouge">REPEAT</code> macros are used to emit another macro repeatedly, passing an index and optional arguments. In this example, <code class="language-plaintext highlighter-rouge">REPEAT</code> emits a whole line of code for each serial port:</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="cp">#define _S_FLUSH(N) if (portMask.enabled(output[N])) serial##N.flush();
</span>  <span class="n">REPEAT</span><span class="p">(</span><span class="n">NUM_SERIAL</span><span class="p">,</span> <span class="n">_S_FLUSH</span><span class="p">);</span>
</code></pre></div></div> <table class="pretty-list headless"> <thead> <tr> <th>Macro</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">REPEAT(N,OP)</code></td> <td>Emit the <code class="language-plaintext highlighter-rouge">OP</code> macro <code class="language-plaintext highlighter-rouge">N</code> times with zero-based index.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">REPEAT_1(N,OP)</code></td> <td>Emit the <code class="language-plaintext highlighter-rouge">OP</code> macro <code class="language-plaintext highlighter-rouge">N</code> times with one-based index.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">REPEAT_S(S,N,OP)</code></td> <td>Do a zero-based <code class="language-plaintext highlighter-rouge">REPEAT</code>, skipping <code class="language-plaintext highlighter-rouge">S</code> elements.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">REPEAT2(N,OP,V...)</code></td> <td>Emit the <code class="language-plaintext highlighter-rouge">OP</code> macro <code class="language-plaintext highlighter-rouge">N</code> times with zero-based index and arguments.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">REPEAT2_S(S,N,OP,V...)</code></td> <td>Do a zero-based <code class="language-plaintext highlighter-rouge">REPEAT2</code>, skipping <code class="language-plaintext highlighter-rouge">S</code> elements.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">RREPEAT(N,OP)</code></td> <td> <code class="language-plaintext highlighter-rouge">REPEAT</code> for usage within another <code class="language-plaintext highlighter-rouge">REPEAT*</code>.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">RREPEAT_S(S,N,OP)</code></td> <td> <code class="language-plaintext highlighter-rouge">REPEAT_S</code> for usage within another <code class="language-plaintext highlighter-rouge">REPEAT*</code>.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">RREPEAT2(N,OP,V...)</code></td> <td> <code class="language-plaintext highlighter-rouge">REPEAT2</code> for usage within another <code class="language-plaintext highlighter-rouge">REPEAT*</code>.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">RREPEAT2_S(S,N,OP,V...)</code></td> <td> <code class="language-plaintext highlighter-rouge">REPEAT2_S</code> for usage within another <code class="language-plaintext highlighter-rouge">REPEAT*</code>.</td> </tr> </tbody> </table> <h3 id="map">MAP</h3> <p>The <code class="language-plaintext highlighter-rouge">MAP</code> macro works like <code class="language-plaintext highlighter-rouge">REPEAT</code>, but takes a list of things to pass to the emitted macro instead of a number. In this example, <code class="language-plaintext highlighter-rouge">MAPLIST</code> emits a comma-separated list of items for the axes listed in <code class="language-plaintext highlighter-rouge">ALL_AXIS_NAMES</code>:</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="cp">#define TMC_SW_DETAIL(A) { TMC_SW_DETAIL_ARGS(A) }
</span>  <span class="k">constexpr</span> <span class="n">SanitySwSerialDetails</span> <span class="n">sanity_tmc_sw_details</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">MAPLIST</span><span class="p">(</span><span class="n">TMC_SW_DETAIL</span><span class="p">,</span> <span class="n">ALL_AXIS_NAMES</span><span class="p">)</span>
  <span class="p">};</span>
</code></pre></div></div> <table class="pretty-list headless"> <thead> <tr> <th>Macro</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">MAP(OP,VALS...)</code></td> <td>Emit the <code class="language-plaintext highlighter-rouge">OP</code> macro with each of the given <code class="language-plaintext highlighter-rouge">VALS</code>.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">MAPLIST(OP,VALS...)</code></td> <td>Emit <code class="language-plaintext highlighter-rouge">OP</code> with each of the given <code class="language-plaintext highlighter-rouge">VALS</code>, comma-separated.</td> </tr> </tbody> </table> <h3 id="character-test">Character Test</h3> <table class="pretty-list headless"> <thead> <tr> <th>Macro</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">NUMERIC(c)</code></td> <td>True if a character is numeric: <code class="language-plaintext highlighter-rouge">0123456789</code> </td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">DECIMAL(c)</code></td> <td>True if a character is decimal: <code class="language-plaintext highlighter-rouge">0123456789.</code> </td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">NUMERIC_SIGNED(c)</code></td> <td>True if a character is signed numeric: <code class="language-plaintext highlighter-rouge">0123456789+-</code> </td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">DECIMAL_SIGNED(c)</code></td> <td>True if a character is signed decimal: <code class="language-plaintext highlighter-rouge">0123456789+-.</code> </td> </tr> </tbody> </table> <h3 id="lists-and-arrays">Lists and Arrays</h3> <table class="pretty-list headless"> <thead> <tr> <th>Macro</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">COUNT(array)</code></td> <td>The number of items in a defined array.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">LIST_N(N,VALS...)</code></td> <td>Reduce a prepopulated list to size <code class="language-plaintext highlighter-rouge">N</code> (based on an integer option like <code class="language-plaintext highlighter-rouge">EXTRUDERS</code>).</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">LIST_N_1(N,VAL)</code></td> <td>Generate a list of size <code class="language-plaintext highlighter-rouge">N</code> filled with a single value.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ARRAY_N(N,VALS...)</code></td> <td>Generate a C style array of size <code class="language-plaintext highlighter-rouge">N</code> from a prepopulated list.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ARRAY_N_1(N,VAL)</code></td> <td>Generate a C style array of size <code class="language-plaintext highlighter-rouge">N</code> filled with a single value.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ARRAY_BY_EXTRUDERS(V...)</code></td> <td>Reduce a prepopulated list to <code class="language-plaintext highlighter-rouge">EXTRUDERS</code> items.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ARRAY_BY_EXTRUDERS1(v1)</code></td> <td>Generate a list of <code class="language-plaintext highlighter-rouge">EXTRUDERS</code> items filled with a single value.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ARRAY_BY_HOTENDS(V...)</code></td> <td>Reduce a prepopulated list to <code class="language-plaintext highlighter-rouge">HOTENDS</code> items.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ARRAY_BY_HOTENDS1(v1)</code></td> <td>Generate a list of <code class="language-plaintext highlighter-rouge">HOTENDS</code> items filled with a single value.</td> </tr> </tbody> </table> <h3 id="time-comparison">Time Comparison</h3> <p>Use the following macros when comparing two millis count values:</p> <ul> <li> <code class="language-plaintext highlighter-rouge">PENDING(ms,time)</code>: Relative to <code class="language-plaintext highlighter-rouge">ms</code>, <code class="language-plaintext highlighter-rouge">time</code> is pending.</li> <li> <code class="language-plaintext highlighter-rouge">ELAPSED(ms,time)</code>: Relative to <code class="language-plaintext highlighter-rouge">ms</code>, <code class="language-plaintext highlighter-rouge">time</code> has elapsed.</li> </ul> <p>When using <code class="language-plaintext highlighter-rouge">ELAPSED</code> and <code class="language-plaintext highlighter-rouge">PENDING</code>, always compare against the <em>next time</em> rather than the <em>last time</em>. This…</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">const</span> <span class="n">millis_t</span> <span class="n">ms</span> <span class="o">=</span> <span class="n">millis</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ELAPSED</span><span class="p">(</span><span class="n">ms</span><span class="p">,</span> <span class="n">next_event_ms</span><span class="p">))</span> <span class="p">{</span>
  <span class="n">next_event_ms</span> <span class="o">=</span> <span class="n">ms</span> <span class="o">+</span> <span class="n">TIME_INTERVAL</span><span class="p">;</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div> <p>…will be smaller and faster than this…</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">const</span> <span class="n">millis_t</span> <span class="n">ms</span> <span class="o">=</span> <span class="n">millis</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ELAPSED</span><span class="p">(</span><span class="n">ms</span><span class="p">,</span> <span class="n">last_event_ms</span> <span class="o">+</span> <span class="n">TIME_INTERVAL</span><span class="p">))</span> <span class="p">{</span>
  <span class="n">last_event_ms</span> <span class="o">=</span> <span class="n">ms</span><span class="p">;</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="serial-macros">Serial Macros</h3> <p>The <code class="language-plaintext highlighter-rouge">serial.h</code> file also includes several macros to make it easier to create PROGMEM strings and print them to the serial output. Below are a few of them. See the <code class="language-plaintext highlighter-rouge">serial.h</code> file for others.</p> <table class="pretty-list headless"> <thead> <tr> <th>Macro</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">SERIAL_ECHO_START()</code></td> <td>Send “<code class="language-plaintext highlighter-rouge">echo:</code>” to the serial output.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SERIAL_ERROR_START()</code></td> <td>Print “<code class="language-plaintext highlighter-rouge">error:</code>” to the serial output.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SERIAL_ECHO("hello")</code></td> <td>Print an ASCII string stored in SRAM to serial out.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SERIAL_ECHOLN("hello")</code></td> <td>Print an ASCII string stored in SRAM to serial out, appending a newline.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SERIAL_ECHOPGM("hello")</code></td> <td>Wrap the given ASCII string in <code class="language-plaintext highlighter-rouge">PSTR</code> and print it to serial out.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SERIAL_ECHOLNPGM("hello")</code></td> <td>Wrap the given ASCII string in <code class="language-plaintext highlighter-rouge">PSTR</code> and print it to serial out, appending a newline.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SERIAL_ECHOPAIR("Hello:",val)</code></td> <td>Wrap an ASCII string in <code class="language-plaintext highlighter-rouge">PSTR</code>; print it and a value to serial out.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SERIAL_ECHOLNPAIR("Hello:",val)</code></td> <td>Wrap an ASCII string in <code class="language-plaintext highlighter-rouge">PSTR</code>; print it, a value, and a newline to serial out.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">STRINGIFY(DEFINE)</code></td> <td>Resolve a define to a quoted string. (If undefined, the name of the define.)</td> </tr> </tbody> </table> <h3 id="maths-macros">Maths macros</h3> <p>Use the following macros in place of their normal lower-case versions. These ensure the smaller 32-bit <code class="language-plaintext highlighter-rouge">float</code> on all architectures. The initial 32-bit targets for Marlin, while significantly faster, do not have a floating-point unit either, so <code class="language-plaintext highlighter-rouge">float</code> maths is more compatible while not sacrificing performance.</p> <table class="pretty-list headless"> <thead> <tr> <th>Macro</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">FIXFLOAT(N)</code></td> <td>Add a tiny value to a <code class="language-plaintext highlighter-rouge">float</code> to fix rounding errors (e.g., for display).</td> </tr> <tr> <td> <code class="language-plaintext highlighter-rouge">NEAR_ZERO(V)</code>/<code class="language-plaintext highlighter-rouge">UNEAR_ZERO(V)</code>/<code class="language-plaintext highlighter-rouge">NEAR(V1,V2)</code> </td> <td>True if a float value is near zero or another value.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">RECIPROCAL(N)</code></td> <td>The reciprocal of a value, but return 0.0 (not infinity) for 0.0.</td> </tr> <tr> <td> <code class="language-plaintext highlighter-rouge">RADIANS(d)</code>/<code class="language-plaintext highlighter-rouge">DEGREES(r)</code> </td> <td>Convert degrees to radians and <em>vice-versa</em>.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">HYPOT2(x,y)</code></td> <td>The hypotenuse-squared of a right triangle with legs x,y.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">HYPOT(x,y)</code></td> <td>The hypotenuse of a right triangle with legs x,y.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ATAN2(y, x)</code></td> <td><code class="language-plaintext highlighter-rouge">atan2f</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">FABS(x)</code></td> <td><code class="language-plaintext highlighter-rouge">fabsf</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">POW(x, y)</code></td> <td><code class="language-plaintext highlighter-rouge">powf</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SQRT(x)</code></td> <td><code class="language-plaintext highlighter-rouge">sqrtf</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">CEIL(x)</code></td> <td><code class="language-plaintext highlighter-rouge">ceilf</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">FLOOR(x)</code></td> <td><code class="language-plaintext highlighter-rouge">floorf</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">LROUND(x)</code></td> <td><code class="language-plaintext highlighter-rouge">lroundf</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">FMOD(x, y)</code></td> <td><code class="language-plaintext highlighter-rouge">fmodf</code></td> </tr> </tbody> </table> <h3 id="other-shorthand">Other Shorthand</h3> <table class="pretty-list headless"> <thead> <tr> <th>Macro</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">WITHIN(val,low,high)</code></td> <td>Check that a value is within a given range, inclusive.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">NOLESS(var,min)</code></td> <td>Change a variable, if needed, so it is not smaller than the given value.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">NOMORE(var,max)</code></td> <td>Change a variable, if needed, so it is not larger than the given value.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">FORCE_INLINE</code></td> <td>Force a function or method to be compiled inline.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">NOOP</code></td> <td>A do-nothing macro to use for empty macro functions.</td> </tr> </tbody> </table> <h2 id="adding-a-new-feature">Adding a New Feature</h2> <p>Since Marlin needs to runs on the most modest hardware, much care has been taken to keep code size small and avoid overtaxing the CPU. AVR and some 32-bit CPUs have no FPU, so it’s best to avoid floating point operations whenever possible, and add-on features should also conserve SRAM. Right out of the gate, the default configuration of Marlin 1.1 uses over 2.6K of SRAM, and won’t fit on an UNO.</p> <ul> <li> <code class="language-plaintext highlighter-rouge">#define</code> is used liberally, especially for configuration values</li> <li>Use <code class="language-plaintext highlighter-rouge">#define MYFEATURE</code> for feature switches.</li> <li>Feature settings have some flexibility, and can have values.</li> <li>Use <code class="language-plaintext highlighter-rouge">#if ENABLED(MYFEATURE)</code> / <code class="language-plaintext highlighter-rouge">#if DISABLED(MYFEATURE)</code> rather than <code class="language-plaintext highlighter-rouge">#ifdef</code> or <code class="language-plaintext highlighter-rouge">#if defined()</code>. The <code class="language-plaintext highlighter-rouge">ENABLED</code>/<code class="language-plaintext highlighter-rouge">DISABLED</code> macros allow features to be overridden by <code class="language-plaintext highlighter-rouge">make</code>.</li> <li>Indent <code class="language-plaintext highlighter-rouge">#if…</code>/<code class="language-plaintext highlighter-rouge">#endif</code> blocks and their contents with the rest of the cascade. This allows editors that only have naive code-folding to fold blocks properly.</li> <li>Add a comment: <code class="language-plaintext highlighter-rouge">#endif // MYFEATURE</code> — but only if the <code class="language-plaintext highlighter-rouge">#endif</code> is far away (lets say, over 10 lines) from the starting <code class="language-plaintext highlighter-rouge">#if</code>.</li> </ul> <h3 id="new-feature-example">New Feature Example</h3> <p><strong>In Configuration.h:</strong></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Enable this to make something new happen</span>
<span class="cp">#define MYFEATURE
#if ENABLED(MYFEATURE)
</span>  <span class="cp">#define MYFEATURE_SETTING 12.5
</span>  <span class="cp">#undef OVERRIDDEN_FEATURE // This won't be needed with MYFEATURE
#endif
</span></code></pre></div></div> <p><strong>In SanityCheck.h:</strong></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * My feature
 */</span>
<span class="cp">#if ENABLED(MYFEATURE) &amp;&amp; ENABLED(INCOMPAT_FEATURE)
</span>  <span class="cp">#error MYFEATURE is not compatible with INCOMPAT_FEATURE
#endif
</span></code></pre></div></div> <p><strong>In Conditionals.h:</strong></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * My feature
 */</span>
<span class="cp">#if ENABLED(MYFEATURE)
</span>  <span class="cp">#undef OVERRIDDEN_FEATURE // This feature is disabled by MYFEATURE
</span>  <span class="cp">#undef OVERRIDDEN_SETTING // This setting will always be 1234 with MYFEATURE
</span>  <span class="cp">#define OVERRIDDEN_SETTING 1234
#endif
</span></code></pre></div></div> <p><strong>In MarlinCore.cpp, for example:</strong></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// My Feature, when Your Feature is disabled</span>
<span class="cp">#if ENABLED(MYFEATURE) &amp;&amp; DISABLED(YOURFEATURE)
</span>  <span class="n">my_feature_function</span><span class="p">();</span> <span class="c1">// Run my feature, possible an inline function taking refs</span>
  <span class="cp">#if ENABLED(HISFEATURE)
</span>    <span class="p">...</span>
    <span class="n">call_something</span><span class="p">();</span>
    <span class="p">...</span>
  <span class="cp">#else // !HISFEATURE
</span>    <span class="p">...</span>
    <span class="n">call_something_else</span><span class="p">();</span>
    <span class="p">...</span>
  <span class="cp">#endif // !HISFEATURE
#endif // MYFEATURE
</span></code></pre></div></div> </div> </div> </div> </div> </div> <footer> <div class="container shift-footer "> <div class="row"> <div class="col-8"> <p>Brought to you with <i class="fa fa-heart text-danger" aria-hidden="true"></i> lack of <i class="fa fa-bed" aria-hidden="true"></i> and lots of <i class="fa fa-coffee" aria-hidden="true"></i>. <br> The contents of this website are © 2024 under the terms of the <a href="//www.gnu.org/licenses/gpl-3.0.txt">GPLv3</a> License.</p> </div> <div class="col-4"> <div class="pull-right back-to-top"> <a href="#top" data-proofer-ignore> Back to top <i class="fa fa-level-up" aria-hidden="true"></i></a> </div> </div> </div> </div> </footer> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-76230130-1', {
          'cookieDomain': 'marlinfw.org',
          'siteSpeedSampleRate': 80
      });

      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script> </body> </html>